import{f as k,a as o,c as be,t as D}from"../chunks/TFX7ugsA.js";import"../chunks/D6SK0GIy.js";import{a as ga}from"../chunks/DujhYGdh.js";import{p as _a,ao as ke,ap as ba,t as E,g as e,a as ka,Y as d,e as qa,c as n,s as l,o as t,ar as ha,as as B,b as i,u,au as M,at as ya,f as J}from"../chunks/C9SIyTFa.js";import{i as b,e as L,s as F}from"../chunks/bwNj2O70.js";import{e as xa,i as wa}from"../chunks/DShnAKY6.js";import{h as Ea}from"../chunks/0poByBks.js";import{r as $,s as qe}from"../chunks/xoXkTC80.js";import{s as z}from"../chunks/lJrTxOp0.js";import{b as H,c as he,p as Ia}from"../chunks/BMCtT5ss.js";import{i as Sa}from"../chunks/CSrNcNRV.js";import{s as Ta,a as Ma}from"../chunks/9ZnQYv7J.js";import{b as G}from"../chunks/DvH0yMmo.js";import{g as He}from"../chunks/De4q2J6q.js";import{E as La,F as $a,G as Aa,H as Ca}from"../chunks/95k2wcHO.js";import{i as Fa}from"../chunks/EHLbj6ui.js";import{S as za}from"../chunks/D-G3Vv_Y.js";var Na=k('<span class="hint svelte-kmqcod">확인 중...</span>'),Ga=k("<span> </span>"),Ra=k('<span class="timer svelte-kmqcod"> </span>'),Ua=k(" <!>",1),Va=k("<span><!></span>"),Za=k('<span class="hint success svelte-kmqcod">이메일 인증 완료</span>'),Da=k('<button type="button" class="resend-btn svelte-kmqcod">인증 코드 재발송</button>'),Ha=k('<div class="field svelte-kmqcod"><label for="verificationCode" class="svelte-kmqcod">인증 코드</label> <div class="input-row svelte-kmqcod"><input type="text" id="verificationCode" placeholder="6자리 코드" maxlength="6" inputmode="numeric" pattern="[0-9]*" class="svelte-kmqcod"/> <button type="button" class="inline-btn svelte-kmqcod"> </button></div> <!></div>'),Pa=k('<button type="button"> </button>'),Oa=k('<div class="error-msg svelte-kmqcod"> </div>'),Wa=k('<div class="page svelte-kmqcod"><header class="header svelte-kmqcod"><!> <p class="subtitle svelte-kmqcod">새 계정을 만드세요</p></header> <form class="form svelte-kmqcod"><div class="field svelte-kmqcod"><label for="username" class="svelte-kmqcod">아이디</label> <input type="text" id="username" placeholder="4자 이상, 영문/숫자" autocomplete="username"/> <!></div> <div class="field svelte-kmqcod"><label for="email" class="svelte-kmqcod">이메일</label> <div class="input-row svelte-kmqcod"><input type="email" id="email" placeholder="example@email.com" autocomplete="email"/> <button type="button" class="inline-btn svelte-kmqcod"><!></button></div> <!> <!></div> <!> <div class="field svelte-kmqcod"><label for="password" class="svelte-kmqcod">비밀번호</label> <input type="password" id="password" placeholder="8자 이상" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label for="passwordConfirm" class="svelte-kmqcod">비밀번호 확인</label> <input type="password" id="passwordConfirm" placeholder="비밀번호 재입력" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label class="svelte-kmqcod">성별</label> <div class="segment-control svelte-kmqcod"><button type="button">남성</button> <button type="button">여성</button></div></div> <div class="field svelte-kmqcod"><label class="svelte-kmqcod">연령대</label> <div class="segment-control wide svelte-kmqcod"></div></div> <div class="agreements svelte-kmqcod"><label class="agreement svelte-kmqcod"><input type="checkbox" class="svelte-kmqcod"/> <span class="checkbox-custom svelte-kmqcod"></span> <span class="agreement-text svelte-kmqcod"><a target="_blank" rel="noopener" class="svelte-kmqcod">서비스 이용약관</a>에 동의합니다 (필수)</span></label> <label class="agreement svelte-kmqcod"><input type="checkbox" class="svelte-kmqcod"/> <span class="checkbox-custom svelte-kmqcod"></span> <span class="agreement-text svelte-kmqcod"><a target="_blank" rel="noopener" class="svelte-kmqcod">개인정보처리방침</a>에 동의합니다 (필수)</span></label> <div class="agreement-divider svelte-kmqcod"></div> <label class="agreement svelte-kmqcod"><input type="checkbox" class="svelte-kmqcod"/> <span class="checkbox-custom svelte-kmqcod"></span> <span class="agreement-text svelte-kmqcod">푸시 알림 수신에 동의합니다 (선택) <span class="agreement-desc svelte-kmqcod">속보, 북마크 업데이트, 트렌드 알림 등</span></span></label></div> <!> <button type="submit" class="submit svelte-kmqcod"> </button></form> <div class="footer svelte-kmqcod"><span>이미 계정이 있으신가요?</span> <a class="svelte-kmqcod">로그인</a></div></div>');function vs(Pe,Oe){_a(Oe,!1);const ye=()=>Ma(Fa,"$isLoggedIn",We),[We,Xe]=Ta(),K=d(),I=d();ga(()=>{S&&clearInterval(S)});let y=d(""),R=d(""),Q=d(""),x=d(""),N=d(""),U=d("MALE"),ee=d("TWENTIES"),c=d({checking:!1,available:null,message:""}),s=d({sending:!1,sent:!1,verifying:!1,verified:!1,message:"",expireMinutes:null}),g=d(""),P=d(!1),O=d(!1),W=d(!1),X=d(!1),S=null,w=d(0);function Ye(a){S&&clearInterval(S),t(w,a*60),S=setInterval(()=>{ya(w,-1),e(w)<=0&&(S&&clearInterval(S),S=null)},1e3)}let xe;function je(){if(t(c,{checking:!1,available:null,message:""}),e(y).length<4){e(y).length>0&&M(c,e(c).message="4자 이상 입력해주세요");return}clearTimeout(xe),xe=setTimeout(async()=>{M(c,e(c).checking=!0);try{const a=await La(e(y));t(c,{checking:!1,available:a.available,message:a.available?"사용 가능":"이미 사용중"})}catch{t(c,{checking:!1,available:null,message:"확인 실패"})}},500)}function we(a){return/^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(a)}async function Ee(){if(!we(e(x))){M(s,e(s).message="유효한 이메일을 입력해주세요");return}M(s,e(s).sending=!0),M(s,e(s).message="");try{const a=await $a({email:e(x)});a.success?(t(s,{...e(s),sending:!1,sent:!0,message:"인증 코드가 발송되었습니다",expireMinutes:a.expireMinutes}),a.expireMinutes&&Ye(a.expireMinutes)):t(s,{...e(s),sending:!1,message:a.message??"발송 실패"})}catch{t(s,{...e(s),sending:!1,message:"서버 오류"})}}async function Be(){if(e(N).length!==6){M(s,e(s).message="6자리 코드를 입력해주세요");return}M(s,e(s).verifying=!0),M(s,e(s).message="");try{const a=await Ca({email:e(x),code:e(N)});a.success?t(s,{...e(s),verifying:!1,verified:!0,message:"인증 완료"}):t(s,{...e(s),verifying:!1,message:a.message??"인증 실패"})}catch{t(s,{...e(s),verifying:!1,message:"서버 오류"})}}async function Je(){if(t(g,""),!e(y).trim()||e(y).length<4){t(g,"아이디는 4자 이상이어야 합니다");return}if(!/^[a-zA-Z0-9]+$/.test(e(y))){t(g,"아이디는 영문과 숫자만 가능합니다");return}if(!we(e(x))){t(g,"유효한 이메일을 입력해주세요");return}if(!e(s).verified){t(g,"이메일 인증이 필요합니다");return}if(e(R).length<8){t(g,"비밀번호는 8자 이상이어야 합니다");return}if(e(R)!==e(Q)){t(g,"비밀번호가 일치하지 않습니다");return}if(e(c).available===!1){t(g,"이미 사용중인 아이디입니다");return}if(!e(O)||!e(W)){t(g,"이용약관 및 개인정보처리방침에 동의해주세요");return}t(P,!0);try{const a=await Aa({username:e(y),password:e(R),email:e(x),gender:e(U),ageGroup:e(ee),pushNotificationConsent:e(X)});a.success?(typeof window<"u"&&localStorage.setItem("push_consent_on_signup",e(X)?"true":"false"),He(`${G}/login?signup=success`)):t(g,a.message??"가입 실패")}catch{t(g,"서버 오류가 발생했습니다")}t(P,!1)}const Ke=[{value:"TEENS",label:"10대"},{value:"TWENTIES",label:"20대"},{value:"THIRTIES",label:"30대"},{value:"FORTIES",label:"40대"},{value:"FIFTIES",label:"50대"},{value:"SIXTIES_PLUS",label:"60대+"}];ke(()=>(ye(),G),()=>{ye()&&He(`${G}/`)}),ke(()=>e(w),()=>{t(K,e(w)>0?`${Math.floor(e(w)/60)}:${(e(w)%60).toString().padStart(2,"0")}`:"")}),ke(()=>(e(s),e(w)),()=>{t(I,e(s).sent&&e(w)===0)}),ba(),Sa();var ae=Wa();Ea("kmqcod",a=>{qa(()=>{ha.title="회원가입 - SHIFT"})});var se=n(ae),Qe=n(se);za(Qe,{size:"lg"}),B(2),i(se);var Y=l(se,2),te=n(Y),V=l(n(te),2);$(V);let Ie;var ea=l(V,2);{var aa=a=>{var r=Na();o(a,r)},sa=a=>{var r=be(),v=J(r);{var _=p=>{var f=Ga();let m;var q=n(f,!0);i(f),E(()=>{m=z(f,1,"hint svelte-kmqcod",null,m,{success:e(c).available,error:e(c).available===!1}),F(q,(e(c),u(()=>e(c).message)))}),o(p,f)};b(v,p=>{e(c),u(()=>e(c).message)&&p(_)},!0)}o(a,r)};b(ea,a=>{e(c),u(()=>e(c).checking)?a(aa):a(sa,!1)})}i(te);var le=l(te,2),re=l(n(le),2),Z=n(re);$(Z);let Se;var j=l(Z,2),ta=n(j);{var la=a=>{var r=D("발송중");o(a,r)},ra=a=>{var r=be(),v=J(r);{var _=f=>{var m=D("완료");o(f,m)},p=f=>{var m=be(),q=J(m);{var h=T=>{var C=D("재발송");o(T,C)},A=T=>{var C=D("인증");o(T,C)};b(q,T=>{e(s),u(()=>e(s).sent)?T(h):T(A,!1)},!0)}o(f,m)};b(v,f=>{e(s),u(()=>e(s).verified)?f(_):f(p,!1)},!0)}o(a,r)};b(ta,a=>{e(s),u(()=>e(s).sending)?a(la):a(ra,!1)})}i(j),i(re);var Te=l(re,2);{var ia=a=>{var r=Va();let v;var _=n(r);{var p=m=>{var q=D("인증 코드가 만료되었습니다. 다시 발송해주세요.");o(m,q)},f=m=>{var q=Ua(),h=J(q),A=l(h);{var T=C=>{var _e=Ra(),pa=n(_e);i(_e),E(()=>F(pa,`(${e(K)??""})`)),o(C,_e)};b(A,C=>{e(K)&&C(T)})}E(()=>F(h,`${e(s),u(()=>e(s).message)??""} `)),o(m,q)};b(_,m=>{e(I)?m(p):m(f,!1)})}i(r),E(()=>v=z(r,1,"hint svelte-kmqcod",null,v,{success:e(s).sent&&!e(I),error:!e(s).sent||e(I)})),o(a,r)};b(Te,a=>{e(s),u(()=>e(s).message&&!e(s).verified)&&a(ia)})}var na=l(Te,2);{var oa=a=>{var r=Za();o(a,r)};b(na,a=>{e(s),u(()=>e(s).verified)&&a(oa)})}i(le);var Me=l(le,2);{var ca=a=>{var r=Ha(),v=l(n(r),2),_=n(v);$(_);var p=l(_,2),f=n(p,!0);i(p),i(v);var m=l(v,2);{var q=h=>{var A=Da();E(()=>A.disabled=(e(s),u(()=>e(s).sending))),L("click",A,Ee),o(h,A)};b(m,h=>{e(I)||h(q)})}i(r),E(()=>{_.disabled=e(I),p.disabled=(e(s),e(N),e(I),u(()=>e(s).verifying||e(N).length!==6||e(I))),F(f,(e(s),u(()=>e(s).verifying?"확인중":"확인")))}),H(_,()=>e(N),h=>t(N,h)),L("click",p,Be),o(a,r)};b(Me,a=>{e(s),u(()=>e(s).sent&&!e(s).verified)&&a(ca)})}var ie=l(Me,2),Le=l(n(ie),2);$(Le),i(ie);var ne=l(ie,2),$e=l(n(ne),2);$($e),i(ne);var oe=l(ne,2),Ae=l(n(oe),2),ce=n(Ae);let Ce;var Fe=l(ce,2);let ze;i(Ae),i(oe);var ve=l(oe,2),Ne=l(n(ve),2);xa(Ne,5,()=>Ke,wa,(a,r)=>{var v=Pa();let _;var p=n(v,!0);i(v),E(()=>{_=z(v,1,"segment svelte-kmqcod",null,_,{active:e(ee)===e(r).value}),F(p,(e(r),u(()=>e(r).label)))}),L("click",v,()=>t(ee,e(r).value)),o(a,v)}),i(Ne),i(ve);var de=l(ve,2),me=n(de),ue=n(me);$(ue);var Ge=l(ue,4),va=n(Ge);B(),i(Ge),i(me);var fe=l(me,2),pe=n(fe);$(pe);var Re=l(pe,4),da=n(Re);B(),i(Re),i(fe);var Ue=l(fe,4),Ve=n(Ue);$(Ve),B(4),i(Ue),i(de);var Ze=l(de,2);{var ma=a=>{var r=Oa(),v=n(r,!0);i(r),E(()=>F(v,e(g))),o(a,r)};b(Ze,a=>{e(g)&&a(ma)})}var ge=l(Ze,2),ua=n(ge,!0);i(ge),i(Y);var De=l(Y,2),fa=l(n(De),2);i(De),i(ae),E(()=>{Ie=z(V,1,"svelte-kmqcod",null,Ie,{success:e(c).available===!0,error:e(c).available===!1}),Z.disabled=(e(s),u(()=>e(s).verified)),Se=z(Z,1,"svelte-kmqcod",null,Se,{success:e(s).verified}),j.disabled=(e(s),e(x),u(()=>e(s).sending||e(s).verified||!e(x))),Ce=z(ce,1,"segment svelte-kmqcod",null,Ce,{active:e(U)==="MALE"}),ze=z(Fe,1,"segment svelte-kmqcod",null,ze,{active:e(U)==="FEMALE"}),qe(va,"href",`${G??""}/terms`),qe(da,"href",`${G??""}/privacy`),ge.disabled=e(P)||!e(O)||!e(W),F(ua,e(P)?"가입 중...":"회원가입"),qe(fa,"href",`${G??""}/login`)}),H(V,()=>e(y),a=>t(y,a)),L("input",V,je),H(Z,()=>e(x),a=>t(x,a)),L("click",j,Ee),H(Le,()=>e(R),a=>t(R,a)),H($e,()=>e(Q),a=>t(Q,a)),L("click",ce,()=>t(U,"MALE")),L("click",Fe,()=>t(U,"FEMALE")),he(ue,()=>e(O),a=>t(O,a)),he(pe,()=>e(W),a=>t(W,a)),he(Ve,()=>e(X),a=>t(X,a)),L("submit",Y,Ia(Je)),o(Pe,ae),ka(),Xe()}export{vs as component};
