import{f as g,a as c,t as X,c as Z}from"../chunks/TFX7ugsA.js";import"../chunks/D6SK0GIy.js";import{a as Be}from"../chunks/DujhYGdh.js";import{p as Ee,ao as ve,ap as Pe,t as S,a as Ve,g as e,Y as m,e as Fe,o as a,ar as He,c as r,s as i,b as s,f as H,at as Le,as as oe,u as Ye}from"../chunks/C9SIyTFa.js";import{i as I,s as h,e as L}from"../chunks/bwNj2O70.js";import{h as je}from"../chunks/0poByBks.js";import{s as $,r as ne}from"../chunks/xoXkTC80.js";import{b as ce,p as fe}from"../chunks/BMCtT5ss.js";import{i as qe}from"../chunks/CSrNcNRV.js";import{b as ee}from"../chunks/DvH0yMmo.js";import{S as Ae}from"../chunks/D-G3Vv_Y.js";import{y as Ge,z as Je}from"../chunks/95k2wcHO.js";var Ke=g('<div class="error svelte-156r759"> </div>'),Ne=g('<form class="svelte-156r759"><div class="field svelte-156r759"><label for="email" class="svelte-156r759">이메일</label> <input type="email" id="email" placeholder="가입 시 등록한 이메일" autocomplete="email" class="svelte-156r759"/></div> <!> <button type="submit" class="submit svelte-156r759"> </button></form>'),Oe=g('<p class="expire expired svelte-156r759">인증 코드가 만료되었습니다.</p>'),Qe=g('<p class="expire svelte-156r759">남은 시간: <span class="timer svelte-156r759"> </span></p>'),We=g('<p class="expire svelte-156r759"> </p>'),Xe=g('<div class="error svelte-156r759"> </div>'),Ze=g('<form class="svelte-156r759"><div class="info-box svelte-156r759"><p class="svelte-156r759"><strong class="svelte-156r759"> </strong>으로</p> <p class="svelte-156r759">인증 코드를 발송했습니다.</p> <!></div> <div class="field svelte-156r759"><label for="code" class="svelte-156r759">인증 코드</label> <input type="text" id="code" placeholder="6자리 숫자 코드" maxlength="6" inputmode="numeric" autocomplete="one-time-code" class="svelte-156r759"/></div> <!> <button type="submit" class="submit svelte-156r759"> </button> <div class="actions svelte-156r759"><button type="button" class="link-btn svelte-156r759"> </button> <button type="button" class="link-btn svelte-156r759">이메일 다시 입력</button></div></form>'),$e=g('<div class="result svelte-156r759"><div class="result-icon svelte-156r759"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--system-green)" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg></div> <p class="result-label svelte-156r759">가입된 아이디</p> <p class="result-username svelte-156r759"> </p> <p class="result-hint svelte-156r759">보안을 위해 일부가 가려졌습니다.</p></div> <div class="result-actions svelte-156r759"><a class="btn-primary svelte-156r759">로그인하기</a> <a class="btn-secondary svelte-156r759">비밀번호 재설정</a></div>',1),et=g('<div class="page svelte-156r759"><header class="header svelte-156r759"><!> <p class="subtitle svelte-156r759"><!></p></header> <div class="card svelte-156r759"><!></div> <div class="footer svelte-156r759"><a class="svelte-156r759">로그인으로 돌아가기</a></div></div>');function pt(de,pe){Ee(pe,!1);const Y=m(),B=m();let p=m("email"),M=m(""),x=m(""),j=m(""),v=m(""),u=m(!1),q=m(10),y=null,_=m(0);Be(()=>{y&&clearInterval(y)});function me(t){y&&clearInterval(y),a(_,t*60),y=setInterval(()=>{Le(_,-1),e(_)<=0&&(y&&clearInterval(y),y=null)},1e3)}async function te(){if(a(v,""),!e(M).trim()){a(v,"이메일을 입력해주세요.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e(M))){a(v,"올바른 이메일 형식을 입력해주세요.");return}a(u,!0);try{const l=await Ge({email:e(M)});l.success?(a(q,l.expireMinutes||10),me(e(q)),a(p,"verify")):a(v,l.message||"인증 코드 발송에 실패했습니다.")}catch{a(v,"서버 오류가 발생했습니다.")}finally{a(u,!1)}}async function ue(){if(a(v,""),!e(x).trim()){a(v,"인증 코드를 입력해주세요.");return}if(e(x).length!==6||!/^\d+$/.test(e(x))){a(v,"6자리 숫자 코드를 입력해주세요.");return}a(u,!0);try{const t=await Je({email:e(M),code:e(x)});t.success&&t.username?(a(j,t.username),a(p,"result")):a(v,t.message||"아이디를 찾을 수 없습니다.")}catch{a(v,"서버 오류가 발생했습니다.")}finally{a(u,!1)}}function _e(){a(x,""),a(v,""),te()}function be(){e(p)==="verify"&&(a(p,"email"),a(x,"")),a(v,"")}function he(t){if(t.length<=2)return t[0]+"*".repeat(t.length-1);const l=Math.ceil(t.length/2);return t.slice(0,l)+"*".repeat(t.length-l)}ve(()=>e(_),()=>{a(Y,e(_)>0?`${Math.floor(e(_)/60)}:${(e(_)%60).toString().padStart(2,"0")}`:"")}),ve(()=>(e(p),e(_)),()=>{a(B,e(p)==="verify"&&e(_)===0)}),Pe(),qe();var A=et();je("156r759",t=>{Fe(()=>{He.title="아이디 찾기 - SHIFT"})});var G=r(A),ae=r(G);Ae(ae,{size:"lg"});var re=i(ae,2),ge=r(re);{var xe=t=>{var l=X("가입 시 등록한 이메일로 아이디를 찾을 수 있습니다.");c(t,l)},ye=t=>{var l=Z(),R=H(l);{var D=o=>{var n=X("이메일로 발송된 인증 코드를 입력해주세요.");c(o,n)},T=o=>{var n=X("아이디를 찾았습니다.");c(o,n)};I(R,o=>{e(p)==="verify"?o(D):o(T,!1)},!0)}c(t,l)};I(ge,t=>{e(p)==="email"?t(xe):t(ye,!1)})}s(re),s(G);var J=i(G,2),ke=r(J);{var we=t=>{var l=Ne(),R=r(l),D=i(r(R),2);ne(D),s(R);var T=i(R,2);{var o=f=>{var k=Ke(),U=r(k,!0);s(k),S(()=>h(U,e(v))),c(f,k)};I(T,f=>{e(v)&&f(o)})}var n=i(T,2),b=r(n,!0);s(n),s(l),S(()=>{n.disabled=e(u),h(b,e(u)?"발송 중...":"인증 코드 받기")}),ce(D,()=>e(M),f=>a(M,f)),L("submit",l,fe(te)),c(t,l)},Se=t=>{var l=Z(),R=H(l);{var D=o=>{var n=Ze(),b=r(n),f=r(b),k=r(f),U=r(k,!0);s(k),oe(),s(f);var P=i(f,4);{var K=d=>{var w=Oe();c(d,w)},N=d=>{var w=Z(),W=H(w);{var Te=z=>{var C=Qe(),F=i(r(C)),ze=r(F,!0);s(F),s(C),S(()=>h(ze,e(Y))),c(z,C)},Ue=z=>{var C=We(),F=r(C);s(C),S(()=>h(F,`코드는 ${e(q)??""}분간 유효합니다.`)),c(z,C)};I(W,z=>{e(Y)?z(Te):z(Ue,!1)},!0)}c(d,w)};I(P,d=>{e(B)?d(K):d(N,!1)})}s(b);var O=i(b,2),Q=i(r(O),2);ne(Q),s(O);var le=i(O,2);{var Me=d=>{var w=Xe(),W=r(w,!0);s(w),S(()=>h(W,e(v))),c(d,w)};I(le,d=>{e(v)&&d(Me)})}var V=i(le,2),Re=r(V,!0);s(V);var ie=i(V,2),E=r(ie),Ce=r(E,!0);s(E);var De=i(E,2);s(ie),s(n),S(()=>{h(U,e(M)),Q.disabled=e(B),V.disabled=e(u)||e(B),h(Re,e(u)?"확인 중...":"확인"),E.disabled=e(u),h(Ce,e(B)?"인증 코드 재발송":"인증 코드 다시 받기")}),ce(Q,()=>e(x),d=>a(x,d)),L("click",E,_e),L("click",De,be),L("submit",n,fe(ue)),c(o,n)},T=o=>{var n=$e(),b=H(n),f=i(r(b),4),k=r(f,!0);s(f),oe(2),s(b);var U=i(b,2),P=r(U),K=i(P,2);s(U),S(N=>{h(k,N),$(P,"href",`${ee??""}/login`),$(K,"href",`${ee??""}/forgot-password`)},[()=>(e(j),Ye(()=>he(e(j))))]),c(o,n)};I(R,o=>{e(p)==="verify"?o(D):o(T,!1)},!0)}c(t,l)};I(ke,t=>{e(p)==="email"?t(we):t(Se,!1)})}s(J);var se=i(J,2),Ie=r(se);s(se),s(A),S(()=>$(Ie,"href",`${ee??""}/login`)),c(de,A),Ve()}export{pt as component};
