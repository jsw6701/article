const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/Ceq2Ej2p.js","../chunks/95k2wcHO.js"])))=>i.map(i=>d[i]);
import{c as me,a as U,f as G}from"../chunks/TFX7ugsA.js";import"../chunks/D6SK0GIy.js";import{c as pe,o as ue,g as re}from"../chunks/DujhYGdh.js";import{p as ie,ao as fe,o as s,g as e,Y as v,ap as be,f as ne,a as ve,c as t,s as l,as as V,b as r,t as W,e as ge,ar as he}from"../chunks/C9SIyTFa.js";import{i as Y,s as j,e as L}from"../chunks/bwNj2O70.js";import{h as xe}from"../chunks/0poByBks.js";import{r as F,s as ae}from"../chunks/xoXkTC80.js";import{c as te,b as le,p as _e}from"../chunks/BMCtT5ss.js";import{i as ce}from"../chunks/CSrNcNRV.js";import{s as ke,a as we}from"../chunks/9ZnQYv7J.js";import{b as E}from"../chunks/DvH0yMmo.js";import{g as ye}from"../chunks/De4q2J6q.js";import{i as ze,b as $e,c as Pe}from"../chunks/EHLbj6ui.js";import{s as Ie,c as Le}from"../chunks/C4sVfP8L.js";import{S as Te}from"../chunks/D-G3Vv_Y.js";import{p as oe}from"../chunks/BsetF9sD.js";import{C as Se,D as De,M as Me}from"../chunks/95k2wcHO.js";import{_ as qe}from"../chunks/PPVm8Dsz.js";const Ae=Se("Browser",{web:()=>qe(()=>import("../chunks/Ceq2Ej2p.js"),__vite__mapDeps([0,1]),import.meta.url).then(T=>new T.BrowserWeb)});var Be=G('<div class="error svelte-1h0k91m"> </div>'),Ce=G('<div class="modal-backdrop svelte-1h0k91m" role="presentation"><div class="modal svelte-1h0k91m" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="modal-header svelte-1h0k91m"><h2 id="modal-title" class="svelte-1h0k91m">약관 동의 필요</h2> <p class="modal-desc svelte-1h0k91m">서비스 이용을 위해 약관에 동의해 주세요.</p></div> <div class="modal-body svelte-1h0k91m"><div class="agreement-item svelte-1h0k91m"><label class="agreement-label svelte-1h0k91m"><input type="checkbox" class="svelte-1h0k91m"/> <span class="checkbox-custom svelte-1h0k91m"></span> <span class="agreement-text svelte-1h0k91m"><button type="button" class="link-btn svelte-1h0k91m">서비스 이용약관</button> <span class="required svelte-1h0k91m">(필수)</span></span></label></div> <div class="agreement-item svelte-1h0k91m"><label class="agreement-label svelte-1h0k91m"><input type="checkbox" class="svelte-1h0k91m"/> <span class="checkbox-custom svelte-1h0k91m"></span> <span class="agreement-text svelte-1h0k91m"><button type="button" class="link-btn svelte-1h0k91m">개인정보처리방침</button> <span class="required svelte-1h0k91m">(필수)</span></span></label></div> <button type="button" class="agree-all-btn svelte-1h0k91m">전체 동의</button> <!></div> <div class="modal-footer svelte-1h0k91m"><button type="button" class="submit-btn svelte-1h0k91m"> </button></div></div></div>');function Ee(T,S){ie(S,!1);const D=v();let J=oe(S,"userId",8),K=oe(S,"show",8,!1);const x=pe();let c=v(!1),p=v(!1),i=v(!1),d=v("");async function g(o,m){o.preventDefault(),o.stopPropagation();const u=window.location.origin+E+m;De.isNativePlatform()?await Ae.open({url:u}):window.open(u,"_blank","noopener,noreferrer")}async function _(){if(e(D)){s(i,!0),s(d,"");try{const o=await Me({userId:J()});o.success?x("agreed"):s(d,o.message||"약관 동의 처리에 실패했습니다.")}catch{s(d,"서버 오류가 발생했습니다.")}finally{s(i,!1)}}}function Q(o){}fe(()=>(e(c),e(p),e(i)),()=>{s(D,e(c)&&e(p)&&!e(i))}),be(),ce();var k=me(),X=ne(k);{var Z=o=>{var m=Ce(),u=t(m),M=l(t(u),2),f=t(M),w=t(f),y=t(w);F(y);var z=l(y,4),H=t(z);V(2),r(z),r(w),r(f);var h=l(f,2),q=t(h),A=t(q);F(A);var $=l(A,4),N=t($);V(2),r($),r(q),r(h);var B=l(h,2),O=l(B,2);{var ee=n=>{var C=Be(),se=t(C,!0);r(C),W(()=>j(se,e(d))),U(n,C)};Y(O,n=>{e(d)&&n(ee)})}r(M);var P=l(M,2),I=t(P),R=t(I,!0);r(I),r(P),r(u),r(m),W(()=>{I.disabled=!e(D),j(R,e(i)?"처리 중...":"동의하고 계속하기")}),te(y,()=>e(c),n=>s(c,n)),L("click",H,n=>g(n,"/terms")),te(A,()=>e(p),n=>s(p,n)),L("click",N,n=>g(n,"/privacy")),L("click",B,()=>{s(c,!0),s(p,!0)}),L("click",I,_),L("click",m,Q),U(o,m)};Y(X,o=>{K()&&o(Z)})}U(T,k),ve()}var Ue=G('<div class="error svelte-1x05zx6"> </div>'),Fe=G('<div class="page svelte-1x05zx6"><header class="header svelte-1x05zx6"><!> <p class="subtitle svelte-1x05zx6">계정에 로그인하세요</p></header> <form class="form svelte-1x05zx6"><div class="field svelte-1x05zx6"><label for="username" class="svelte-1x05zx6">아이디</label> <input type="text" id="username" placeholder="아이디 입력" autocomplete="username" class="svelte-1x05zx6"/></div> <div class="field svelte-1x05zx6"><label for="password" class="svelte-1x05zx6">비밀번호</label> <input type="password" id="password" placeholder="비밀번호 입력" autocomplete="current-password" class="svelte-1x05zx6"/></div> <div class="help-links svelte-1x05zx6"><a class="svelte-1x05zx6">아이디 찾기</a> <span class="divider svelte-1x05zx6"></span> <a class="svelte-1x05zx6">비밀번호 찾기</a></div> <div class="options-row svelte-1x05zx6"><label class="checkbox-label svelte-1x05zx6"><input type="checkbox" class="svelte-1x05zx6"/> <span class="checkbox-text svelte-1x05zx6">자동 로그인</span></label></div> <!> <button type="submit" class="submit svelte-1x05zx6"> </button></form> <div class="footer svelte-1x05zx6"><span>계정이 없으신가요?</span> <a class="svelte-1x05zx6">회원가입</a></div></div> <!>',1);function rs(T,S){ie(S,!1);const D=()=>we(ze,"$isLoggedIn",J),[J,K]=ke();let x=v(""),c=v(""),p=v(!1),i=v(""),d=v(!1),g=v(!1),_=v(null);const Q={home:"/",feed:"/today",trending:"/trending"};ue(()=>{D()&&k()});async function k(){await Ie.init();const a=re(Le),b=Q[a]||"/";ye(`${E}${b}`)}async function X(){if(s(i,""),!e(x).trim()){s(i,"아이디를 입력해주세요.");return}if(!e(c)){s(i,"비밀번호를 입력해주세요.");return}s(d,!0),console.log("[Login] Starting login request...");try{const a=await $e.login(e(x),e(c),e(p));if(console.log("[Login] Login result:",a),a.success){if(a.requiresTermsAgreement){const b=re(Pe);if(b){s(_,b.userId),s(g,!0);return}}await k()}else s(i,a.message)}catch(a){console.error("[Login] Login error:",a),s(i,"로그인 중 오류가 발생했습니다.")}finally{s(d,!1)}}function Z(){s(g,!1),s(_,null),k()}ce();var o=Fe();xe("1x05zx6",a=>{ge(()=>{he.title="로그인 - SHIFT"})});var m=ne(o),u=t(m),M=t(u);Te(M,{size:"lg"}),V(2),r(u);var f=l(u,2),w=t(f),y=l(t(w),2);F(y),r(w);var z=l(w,2),H=l(t(z),2);F(H),r(z);var h=l(z,2),q=t(h),A=l(q,4);r(h);var $=l(h,2),N=t($),B=t(N);F(B),V(2),r(N),r($);var O=l($,2);{var ee=a=>{var b=Ue(),de=t(b,!0);r(b),W(()=>j(de,e(i))),U(a,b)};Y(O,a=>{e(i)&&a(ee)})}var P=l(O,2),I=t(P,!0);r(P),r(f);var R=l(f,2),n=l(t(R),2);r(R),r(m);var C=l(m,2);{var se=a=>{Ee(a,{get userId(){return e(_)},get show(){return e(g)},$$events:{agreed:Z}})};Y(C,a=>{e(g)&&e(_)&&a(se)})}W(()=>{ae(q,"href",`${E??""}/find-username`),ae(A,"href",`${E??""}/forgot-password`),P.disabled=e(d),j(I,e(d)?"로그인 중...":"로그인"),ae(n,"href",`${E??""}/signup`)}),le(y,()=>e(x),a=>s(x,a)),le(H,()=>e(c),a=>s(c,a)),te(B,()=>e(p),a=>s(p,a)),L("submit",f,_e(X)),U(T,o),ve(),K()}export{rs as component};
