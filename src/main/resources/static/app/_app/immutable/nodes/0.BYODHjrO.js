import{f as T,a as r,b as k,c as y}from"../chunks/CSDkEukK.js";import"../chunks/G9K82XB2.js";import{o as ya,g as K}from"../chunks/D2Z1D5OA.js";import{h as xa,H as qa,p as Ma,aq as E,ar as Pa,a as Ca,o as S,Y,g as a,c as x,b as _,s as N,u as l,t as Aa,f as q}from"../chunks/TeviCJ82.js";import{s as Ba}from"../chunks/DJUeCBpJ.js";import{i as b}from"../chunks/iMg5e8oI.js";import{e as La}from"../chunks/CqNPvWgI.js";import{s as Va}from"../chunks/B9lDzZO_.js";import{s as $a}from"../chunks/C9eT_MQU.js";import{i as za}from"../chunks/DgK7GOei.js";import{s as Ha,a as D}from"../chunks/CmgmZfZy.js";import{b as v}from"../chunks/DFC9nrag.js";import{s as Ia,g as R}from"../chunks/Du9Km8vb.js";import{y as O,i as Q,c as ja}from"../chunks/C8ccASB2.js";import{s as Ea,c as Sa}from"../chunks/CxvkBVpW.js";/* empty css                */function Ya(s,f,d,c,z){xa&&qa();var n=f.$$slots?.[d],M=!1;n===!0&&(n=f.children,M=!0),n===void 0||n(s,M?()=>c:c)}const Da=()=>{const s=Ia;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},Ra={subscribe(s){return Da().page.subscribe(s)}};var Wa=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1h-5v-6a1 1 0 00-1-1h-4a1 1 0 00-1 1v6H4a1 1 0 01-1-1V9.5z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"></path></svg>'),Fa=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="1.8"></rect><path d="M8 8h8M8 12h8M8 16h5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></path></svg>'),Ga=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><path d="M3 17l6-6 4 4 8-8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17 7h4v4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),Ja=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><path d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-4-7 4V5z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"></path></svg>'),Ka=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="1.8"></circle><path d="M4 20c0-4 4-6 8-6s8 2 8 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></path></svg>'),Na=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><path d="M12 15a3 3 0 100-6 3 3 0 000 6z" stroke="currentColor" stroke-width="1.8"></path><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 112.83-2.83l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 114 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 112.83 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" stroke="currentColor" stroke-width="1.8"></path></svg>'),Oa=T('<a><div class="tab-icon svelte-12qhfyh"><!></div> <span class="tab-label svelte-12qhfyh"> </span></a>'),Qa=T('<div class="app svelte-12qhfyh"><main class="main svelte-12qhfyh"><!></main> <nav class="tab-bar svelte-12qhfyh"></nav></div>');function fe(s,f){Ma(f,!1);const d=()=>D(Q,"$isLoggedIn",n),c=()=>D(Ra,"$page",n),z=()=>D(ja,"$isAdmin",n),[n,M]=Ha(),P=Y(),W=Y(),U=["/login","/signup","/privacy","/terms"];let C=Y(!1),F=!1;const X={home:"/",feed:"/today",trending:"/trending"};ya(async()=>{O.init(),await Ea.init(),S(C,!0);const t=window.location.pathname.replace(v,"")||"/";if(K(Q)&&t==="/"&&!F){const o=K(Sa),h=X[o]||"/";h!=="/"&&(F=!0,R(`${v}${h}`,{replaceState:!0}))}const e=()=>{O.clear(),R(`${v}/login`)};return window.addEventListener("auth:expired",e),()=>window.removeEventListener("auth:expired",e)});function Z(t,e){if(!a(C))return;const o=e.replace(v,"")||"/",h=U.some(w=>o.startsWith(w));!t&&!h&&R(`${v}/login`)}function aa(t){return t==="/"?a(P)==="/"||a(P)===v+"/":a(P).includes(t)}const ea=[{path:"/",label:"홈",icon:"home",show:"always"},{path:"/today",label:"피드",icon:"feed",show:"always"},{path:"/trending",label:"트렌드",icon:"trend",show:"always"},{path:"/bookmarks",label:"저장",icon:"bookmark",show:"logged-in"},{path:"/mypage",label:"MY",icon:"user",show:"logged-in"},{path:"/admin",label:"관리",icon:"admin",show:"admin"}];E(()=>(a(C),d(),c()),()=>{a(C)&&Z(d(),c().url.pathname)}),E(()=>c(),()=>{S(P,c().url.pathname)}),E(()=>(d(),z()),()=>{S(W,ea.filter(t=>t.show==="always"?!0:t.show==="logged-in"?d():t.show==="admin"?z():!1))}),Pa(),za();var H=Qa(),I=x(H),ta=x(I);Ya(ta,f,"default",{}),_(I);var G=N(I,2);La(G,5,()=>a(W),t=>t.path,(t,e)=>{var o=Oa();let h;var w=x(o),ra=x(w);{var sa=i=>{var A=Wa();r(i,A)},oa=i=>{var A=y(),ia=q(A);{var la=u=>{var B=Fa();r(u,B)},ca=u=>{var B=y(),ha=q(B);{var va=p=>{var L=Ga();r(p,L)},fa=p=>{var L=y(),da=q(L);{var ua=g=>{var V=Ja();r(g,V)},pa=g=>{var V=y(),ga=q(V);{var ma=m=>{var $=Ka();r(m,$)},_a=m=>{var $=y(),ba=q($);{var ka=j=>{var wa=Na();r(j,wa)};b(ba,j=>{a(e),l(()=>a(e).icon==="admin")&&j(ka)},!0)}r(m,$)};b(ga,m=>{a(e),l(()=>a(e).icon==="user")?m(ma):m(_a,!1)},!0)}r(g,V)};b(da,g=>{a(e),l(()=>a(e).icon==="bookmark")?g(ua):g(pa,!1)},!0)}r(p,L)};b(ha,p=>{a(e),l(()=>a(e).icon==="trend")?p(va):p(fa,!1)},!0)}r(u,B)};b(ia,u=>{a(e),l(()=>a(e).icon==="feed")?u(la):u(ca,!1)},!0)}r(i,A)};b(ra,i=>{a(e),l(()=>a(e).icon==="home")?i(sa):i(oa,!1)})}_(w);var J=N(w,2),na=x(J,!0);_(J),_(o),Aa(i=>{h=$a(o,1,"tab-item svelte-12qhfyh",null,h,i),Va(o,"href",`${v??""}${a(e),l(()=>a(e).path==="/"?"/":a(e).path)??""}`),Ba(na,(a(e),l(()=>a(e).label)))},[()=>({active:aa(a(e).path)})]),r(t,o)}),_(G),_(H),r(s,H),Ca(),M()}export{fe as component};
