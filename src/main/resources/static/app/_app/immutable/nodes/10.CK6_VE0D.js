import{f as w,a as m,c as ia}from"../chunks/C5g7XBZA.js";import"../chunks/1N9P_ows.js";import{o as Ra}from"../chunks/DjCfrimd.js";import{au as Wa,T as qe,e as _a,aw as Ka,i as Xa,aA as Ya,ax as Za,a9 as ja,p as Ja,aq as Qa,ar as Va,f as me,a as et,g as e,Y as f,o as l,ap as at,s,c as t,b as a,t as P,u as b,aB as tt,ao as lt,d as oa}from"../chunks/V-LZvqf2.js";import{s as _,e as u}from"../chunks/C_y0Aa-3.js";import{i as C}from"../chunks/BSeBmDgX.js";import{e as ge,i as he}from"../chunks/U3QY9uhu.js";import{h as st}from"../chunks/DLPZc01m.js";import{r as ue,s as va}from"../chunks/gBni9Ox-.js";import{s as Oe}from"../chunks/35QTP2O1.js";import{s as na}from"../chunks/Cx9o5UuT.js";import{b as we,s as Ue,a as rt}from"../chunks/DDRt-sAN.js";import{i as it}from"../chunks/BhZ1EOWQ.js";import{b as Be}from"../chunks/Ce5-bVvw.js";import{s as ot,a as ca}from"../chunks/BJpLCdRy.js";import{g as vt}from"../chunks/CCZINJK3.js";import{b as ze}from"../chunks/Bs7FA3So.js";import{F as nt,G as ct,H as dt,I as ut}from"../chunks/BPtt4w3D.js";import{c as ft,b as da}from"../chunks/DyZVRJKY.js";import{s as ke}from"../chunks/AWvmR92A.js";import{d as ua,e as fa}from"../chunks/8QpmlEFl.js";function pa(n,k,ee=!1){if(n.multiple){if(k==null)return;if(!Xa(k))return Ya();for(var $ of n.options)$.selected=k.includes(fe($));return}for($ of n.options){var N=fe($);if(Za(N,k)){$.selected=!0;return}}(!ee||k!==void 0)&&(n.selectedIndex=-1)}function _t(n){var k=new MutationObserver(()=>{pa(n,n.__value)});k.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ja(()=>{k.disconnect()})}function pt(n,k,ee=k){var $=new WeakSet,N=!0;Wa(n,"change",B=>{var M=B?"[selected]":":checked",R;if(n.multiple)R=[].map.call(n.querySelectorAll(M),fe);else{var _e=n.querySelector(M)??n.querySelector("option:not([disabled])");R=_e&&fe(_e)}ee(R),qe!==null&&$.add(qe)}),_a(()=>{var B=k();if(n===document.activeElement){var M=Ka??qe;if($.has(M))return}if(pa(n,B,N),N&&B===void 0){var R=n.querySelector(":checked");R!==null&&(B=fe(R),ee(B))}n.__value=B,N=!1}),_t(n)}function fe(n){return"__value"in n?n.__value:n.value}var bt=w('<div class="loading svelte-leta3i"><div class="spinner svelte-leta3i"></div></div>'),mt=w('<div class="error-box svelte-leta3i"><p> </p></div>'),gt=w("<button> </button>"),ht=w("<button> </button>"),wt=w('<section class="section svelte-leta3i"><div class="profile-row svelte-leta3i"><div class="profile-avatar svelte-leta3i"> </div> <div class="profile-info svelte-leta3i"><h2 class="profile-name svelte-leta3i"> </h2> <p class="profile-email svelte-leta3i"> </p></div></div></section> <section class="section svelte-leta3i"><h3 class="section-title svelte-leta3i">앱 설정</h3> <div class="group svelte-leta3i"><div class="row svelte-leta3i"><span class="row-label svelte-leta3i">다크 모드</span> <button><span class="toggle-knob svelte-leta3i"></span></button></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">텍스트 크기</span> <div class="segment-control svelte-leta3i"></div></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">시작 화면</span> <div class="segment-control svelte-leta3i"></div></div></div></section> <section class="section svelte-leta3i"><div class="section-header svelte-leta3i"><h3 class="section-title svelte-leta3i">계정 정보</h3> <button class="edit-btn svelte-leta3i">수정</button></div> <div class="group svelte-leta3i"><div class="row svelte-leta3i"><span class="row-label svelte-leta3i">성별</span> <span class="row-value svelte-leta3i"> </span></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">연령대</span> <span class="row-value svelte-leta3i"> </span></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">가입일</span> <span class="row-value svelte-leta3i"> </span></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">저장한 브리핑</span> <span class="row-value svelte-leta3i"> </span></div></div></section> <section class="section svelte-leta3i"><h3 class="section-title svelte-leta3i">보안</h3> <div class="group svelte-leta3i"><button class="row link svelte-leta3i"><span class="row-label svelte-leta3i">비밀번호 변경</span> <svg class="chevron svelte-leta3i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"></path></svg></button></div></section> <section class="section svelte-leta3i"><h3 class="section-title svelte-leta3i">정보</h3> <div class="group svelte-leta3i"><a class="row link svelte-leta3i"><span class="row-label svelte-leta3i">이용약관</span> <svg class="chevron svelte-leta3i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"></path></svg></a> <a class="row link svelte-leta3i"><span class="row-label svelte-leta3i">개인정보처리방침</span> <svg class="chevron svelte-leta3i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"></path></svg></a></div></section> <section class="section svelte-leta3i"><div class="group svelte-leta3i"><button class="row link svelte-leta3i"><span class="row-label logout svelte-leta3i">로그아웃</span></button> <button class="row link svelte-leta3i"><span class="row-label danger svelte-leta3i">회원 탈퇴</span></button></div></section>',1),kt=w('<p class="modal-error svelte-leta3i"> </p>'),yt=w('<div class="modal-backdrop svelte-leta3i" role="button" tabindex="-1"><div class="modal svelte-leta3i" role="dialog" aria-modal="true"><h2 class="modal-title svelte-leta3i">회원 탈퇴</h2> <p class="modal-desc svelte-leta3i">정말 탈퇴하시겠습니까?<br/> 모든 데이터가 삭제되며 복구할 수 없습니다.</p> <input type="password" class="modal-input svelte-leta3i" placeholder="비밀번호 확인"/> <!> <div class="modal-buttons svelte-leta3i"><button class="modal-btn cancel svelte-leta3i">취소</button> <button class="modal-btn danger svelte-leta3i"> </button></div></div></div>'),xt=w('<div class="password-strength svelte-leta3i"><div class="strength-bar svelte-leta3i"><div class="strength-fill svelte-leta3i"></div></div> <span class="strength-label svelte-leta3i"> </span></div>'),Pt=w('<p class="modal-error svelte-leta3i"> </p>'),Et=w('<p class="modal-success svelte-leta3i"> </p>'),St=w('<div class="modal-backdrop svelte-leta3i" role="button" tabindex="-1"><div class="modal modal-lg svelte-leta3i" role="dialog" aria-modal="true"><h2 class="modal-title svelte-leta3i">비밀번호 변경</h2> <p class="modal-desc svelte-leta3i">새 비밀번호는 8자 이상, 숫자와 특수문자를 포함해야 합니다.</p> <div class="modal-form svelte-leta3i"><div class="modal-field svelte-leta3i"><label for="currentPassword" class="svelte-leta3i">현재 비밀번호</label> <input type="password" id="currentPassword" class="modal-input svelte-leta3i" placeholder="현재 비밀번호"/></div> <div class="modal-field svelte-leta3i"><label for="newPassword" class="svelte-leta3i">새 비밀번호</label> <input type="password" id="newPassword" class="modal-input svelte-leta3i" placeholder="새 비밀번호"/> <!></div> <div class="modal-field svelte-leta3i"><label for="confirmPassword" class="svelte-leta3i">새 비밀번호 확인</label> <input type="password" id="confirmPassword" class="modal-input svelte-leta3i" placeholder="새 비밀번호 확인"/></div></div> <!> <!> <div class="modal-buttons svelte-leta3i"><button class="modal-btn cancel svelte-leta3i">취소</button> <button class="modal-btn primary svelte-leta3i"> </button></div></div></div>'),Mt=w('<label class="radio-option svelte-leta3i"><input type="radio" name="gender" class="svelte-leta3i"/> <span class="radio-custom svelte-leta3i"></span> <span> </span></label>'),Tt=w("<option> </option>"),At=w('<p class="modal-error svelte-leta3i"> </p>'),It=w('<p class="modal-success svelte-leta3i"> </p>'),Lt=w('<div class="modal-backdrop svelte-leta3i" role="button" tabindex="-1"><div class="modal svelte-leta3i" role="dialog" aria-modal="true"><h2 class="modal-title svelte-leta3i">프로필 수정</h2> <div class="modal-form svelte-leta3i"><div class="modal-field svelte-leta3i"><label class="svelte-leta3i">성별</label> <div class="radio-group svelte-leta3i"></div></div> <div class="modal-field svelte-leta3i"><label class="svelte-leta3i">연령대</label> <div class="select-wrapper svelte-leta3i"><select class="svelte-leta3i"></select> <svg class="select-chevron svelte-leta3i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"></path></svg></div></div></div> <!> <!> <div class="modal-buttons svelte-leta3i"><button class="modal-btn cancel svelte-leta3i">취소</button> <button class="modal-btn primary svelte-leta3i"> </button></div></div></div>'),Gt=w('<div class="page svelte-leta3i"><h1 class="page-title svelte-leta3i">설정</h1> <!></div> <!> <!> <!>',1);function el(n,k){Ja(k,!1);const ee=()=>ca(ft,"$currentUser",N),$=()=>ca(ke,"$settings",N),[N,B]=ot(),M=f(),R=[],_e=[{value:"small",label:"작게"},{value:"medium",label:"보통"},{value:"large",label:"크게"}],ba=[{value:"home",label:"홈"},{value:"feed",label:"피드"},{value:"trending",label:"트렌드"}],ma=[{value:"MALE",label:"남성"},{value:"FEMALE",label:"여성"}],ga=[{value:"TEENS",label:"10대"},{value:"TWENTIES",label:"20대"},{value:"THIRTIES",label:"30대"},{value:"FORTIES",label:"40대"},{value:"FIFTIES",label:"50대"},{value:"SIXTIES_PLUS",label:"60대 이상"}];let d=f(null),ye=f(!0),xe=f(""),Pe=f(!1),ae=f(""),te=f(!1),W=f(""),Ee=f(!1),le=f(""),q=f(""),ve=f(""),K=f(!1),O=f(""),se=f(""),Se=f(!1),ne=f("MALE"),re=f("TWENTIES"),X=f(!1),Q=f(""),ie=f("");Ra(async()=>{if(!ee()){l(ye,!1);return}try{l(d,await nt())}catch(r){console.error("getMyProfile error:",r),l(xe,r instanceof Error?r.message:"프로필을 불러올 수 없습니다.")}finally{l(ye,!1)}});function ha(r){return new Date(r).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}async function wa(){await da.logout()}async function ka(){if(!e(ae)){l(W,"비밀번호를 입력해주세요.");return}l(te,!0),l(W,"");try{const r=await ct(e(ae));r.success?(da.clear(),vt(`${ze}/login`)):l(W,r.message||"탈퇴 처리 중 오류가 발생했습니다.")}catch(r){l(W,r instanceof Error?r.message:"탈퇴 처리 중 오류가 발생했습니다.")}finally{l(te,!1)}}function ya(){l(Pe,!0),l(ae,""),l(W,"")}function Me(){l(Pe,!1),l(ae,""),l(W,"")}function xa(){l(Ee,!0),l(le,""),l(q,""),l(ve,""),l(O,""),l(se,"")}function pe(){l(Ee,!1),l(le,""),l(q,""),l(ve,""),l(O,""),l(se,"")}function Pa(r){return r.length<8?{valid:!1,message:"비밀번호는 8자 이상이어야 합니다."}:/\d/.test(r)?/[!@#$%^&*(),.?":{}|<>]/.test(r)?{valid:!0,message:""}:{valid:!1,message:"비밀번호에 특수문자가 포함되어야 합니다."}:{valid:!1,message:"비밀번호에 숫자가 포함되어야 합니다."}}function Ea(r){if(!r)return{level:0,label:"",color:""};let i=0;return r.length>=8&&i++,r.length>=12&&i++,/[a-z]/.test(r)&&/[A-Z]/.test(r)&&i++,/\d/.test(r)&&i++,/[!@#$%^&*(),.?":{}|<>]/.test(r)&&i++,i<=2?{level:1,label:"약함",color:"var(--system-red)"}:i<=3?{level:2,label:"보통",color:"var(--system-yellow)"}:{level:3,label:"강함",color:"var(--system-green)"}}async function Sa(){if(l(O,""),l(se,""),!e(le)){l(O,"현재 비밀번호를 입력해주세요.");return}const r=Pa(e(q));if(!r.valid){l(O,r.message);return}if(e(q)!==e(ve)){l(O,"새 비밀번호가 일치하지 않습니다.");return}l(K,!0);try{const i=await dt({currentPassword:e(le),newPassword:e(q)});i.success?(l(se,"비밀번호가 변경되었습니다."),setTimeout(()=>pe(),1500)):l(O,i.message||"비밀번호 변경에 실패했습니다.")}catch(i){l(O,i instanceof Error?i.message:"비밀번호 변경 중 오류가 발생했습니다.")}finally{l(K,!1)}}function Ma(){e(d)&&(l(ne,e(d).gender),l(re,e(d).ageGroup)),l(Se,!0),l(Q,""),l(ie,"")}function be(){l(Se,!1),l(Q,""),l(ie,"")}async function Ta(){l(Q,""),l(ie,""),l(X,!0);try{const r=await ut({gender:e(ne),ageGroup:e(re)});r.success?(l(ie,"프로필이 수정되었습니다."),e(d)&&l(d,{...e(d),gender:e(ne),ageGroup:e(re)}),setTimeout(()=>be(),1500)):l(Q,r.message||"프로필 수정에 실패했습니다.")}catch(r){l(Q,r instanceof Error?r.message:"프로필 수정 중 오류가 발생했습니다.")}finally{l(X,!1)}}Qa(()=>e(q),()=>{l(M,Ea(e(q)))}),Va(),it();var He=Gt();st("leta3i",r=>{_a(()=>{at.title="설정 - SHIFT"})});var Te=me(He),Aa=s(t(Te),2);{var Ia=r=>{var i=bt();m(r,i)},La=r=>{var i=ia(),L=me(i);{var T=E=>{var y=mt(),x=t(y),S=t(x,!0);a(x),a(y),P(()=>_(S,e(xe))),m(E,y)},F=E=>{var y=ia(),x=me(y);{var S=U=>{var g=wt(),A=me(g),z=t(A),Y=t(z),Z=t(Y,!0);a(Y);var H=s(Y,2),j=t(H),c=t(j,!0);a(j);var v=s(j,2),h=t(v,!0);a(v),a(H),a(z),a(A);var o=s(A,2),p=s(t(o),2),I=t(p),oe=s(t(I),2);let J;a(I);var ce=s(I,2),We=s(t(ce),2);ge(We,5,()=>_e,he,(de,D)=>{var G=gt();let V;var De=t(G,!0);a(G),P(()=>{V=Oe(G,1,"segment svelte-leta3i",null,V,{active:$().fontSize===e(D).value}),_(De,(e(D),b(()=>e(D).label)))}),u("click",G,()=>ke.setFontSize(e(D).value)),m(de,G)}),a(We),a(ce);var Ke=s(ce,2),Xe=s(t(Ke),2);ge(Xe,5,()=>ba,he,(de,D)=>{var G=ht();let V;var De=t(G,!0);a(G),P(()=>{V=Oe(G,1,"segment svelte-leta3i",null,V,{active:$().startPage===e(D).value}),_(De,(e(D),b(()=>e(D).label)))}),u("click",G,()=>ke.setStartPage(e(D).value)),m(de,G)}),a(Xe),a(Ke),a(p),a(o);var Ae=s(o,2),Ie=t(Ae),Da=s(t(Ie),2);a(Ie);var Ye=s(Ie,2),Le=t(Ye),Ze=s(t(Le),2),qa=t(Ze,!0);a(Ze),a(Le);var Ge=s(Le,2),je=s(t(Ge),2),Oa=t(je,!0);a(je),a(Ge);var $e=s(Ge,2),Je=s(t($e),2),Ua=t(Je,!0);a(Je),a($e);var Qe=s($e,2),Ve=s(t(Qe),2),Ba=t(Ve);a(Ve),a(Qe),a(Ye),a(Ae);var Fe=s(Ae,2),ea=s(t(Fe),2),za=t(ea);a(ea),a(Fe);var Ce=s(Fe,2),aa=s(t(Ce),2),ta=t(aa),Ha=s(ta,2);a(aa),a(Ce);var la=s(Ce,2),sa=t(la),ra=t(sa),Na=s(ra,2);a(sa),a(la),P((de,D,G,V)=>{_(Z,de),_(c,(e(d),b(()=>e(d).username))),_(h,(e(d),b(()=>e(d).email))),J=Oe(oe,1,"toggle svelte-leta3i",null,J,{active:$().theme==="dark"}),_(qa,D),_(Oa,G),_(Ua,V),_(Ba,`${e(d),b(()=>e(d).bookmarkCount)??""}개`),va(ta,"href",`${ze??""}/terms`),va(Ha,"href",`${ze??""}/privacy`)},[()=>(e(d),b(()=>e(d).username.charAt(0).toUpperCase())),()=>(oa(ua),e(d),b(()=>ua(e(d).gender))),()=>(oa(fa),e(d),b(()=>fa(e(d).ageGroup))),()=>(e(d),b(()=>ha(e(d).createdAt)))]),u("click",oe,()=>ke.toggleTheme()),u("click",Da,Ma),u("click",za,xa),u("click",ra,wa),u("click",Na,ya),m(U,g)};C(x,U=>{e(d)&&U(S)},!0)}m(E,y)};C(L,E=>{e(xe)?E(T):E(F,!1)},!0)}m(r,i)};C(Aa,r=>{e(ye)?r(Ia):r(La,!1)})}a(Te);var Ne=s(Te,2);{var Ga=r=>{var i=yt(),L=t(i),T=s(t(L),4);ue(T);var F=s(T,2);{var E=g=>{var A=kt(),z=t(A,!0);a(A),P(()=>_(z,e(W))),m(g,A)};C(F,g=>{e(W)&&g(E)})}var y=s(F,2),x=t(y),S=s(x,2),U=t(S,!0);a(S),a(y),a(L),a(i),P(()=>{T.disabled=e(te),x.disabled=e(te),S.disabled=e(te),_(U,e(te)?"처리 중...":"탈퇴하기")}),we(T,()=>e(ae),g=>l(ae,g)),u("click",x,Me),u("click",S,ka),u("click",L,Ue(function(g){Be.call(this,k,g)})),u("click",i,Me),u("keydown",i,g=>g.key==="Escape"&&Me()),m(r,i)};C(Ne,r=>{e(Pe)&&r(Ga)})}var Re=s(Ne,2);{var $a=r=>{var i=St(),L=t(i),T=s(t(L),4),F=t(T),E=s(t(F),2);ue(E),a(F);var y=s(F,2),x=s(t(y),2);ue(x);var S=s(x,2);{var U=o=>{var p=xt(),I=t(p),oe=t(I);a(I);var J=s(I,2),ce=t(J,!0);a(J),a(p),P(()=>{na(oe,`width: ${e(M),b(()=>e(M).level*33.33)??""}%; background: ${e(M),b(()=>e(M).color)??""}`),na(J,`color: ${e(M),b(()=>e(M).color)??""}`),_(ce,(e(M),b(()=>e(M).label)))}),m(o,p)};C(S,o=>{e(q)&&o(U)})}a(y);var g=s(y,2),A=s(t(g),2);ue(A),a(g),a(T);var z=s(T,2);{var Y=o=>{var p=Pt(),I=t(p,!0);a(p),P(()=>_(I,e(O))),m(o,p)};C(z,o=>{e(O)&&o(Y)})}var Z=s(z,2);{var H=o=>{var p=Et(),I=t(p,!0);a(p),P(()=>_(I,e(se))),m(o,p)};C(Z,o=>{e(se)&&o(H)})}var j=s(Z,2),c=t(j),v=s(c,2),h=t(v,!0);a(v),a(j),a(L),a(i),P(()=>{E.disabled=e(K),x.disabled=e(K),A.disabled=e(K),c.disabled=e(K),v.disabled=e(K),_(h,e(K)?"변경 중...":"변경하기")}),we(E,()=>e(le),o=>l(le,o)),we(x,()=>e(q),o=>l(q,o)),we(A,()=>e(ve),o=>l(ve,o)),u("click",c,pe),u("click",v,Sa),u("click",L,Ue(function(o){Be.call(this,k,o)})),u("click",i,pe),u("keydown",i,o=>o.key==="Escape"&&pe()),m(r,i)};C(Re,r=>{e(Ee)&&r($a)})}var Fa=s(Re,2);{var Ca=r=>{var i=Lt(),L=t(i),T=s(t(L),2),F=t(T),E=s(t(F),2);ge(E,5,()=>ma,he,(c,v)=>{var h=Mt(),o=t(h);ue(o);var p,I=s(o,4),oe=t(I,!0);a(I),a(h),P(()=>{o.disabled=e(X),p!==(p=(e(v),b(()=>e(v).value)))&&(o.value=(o.__value=(e(v),b(()=>e(v).value)))??""),_(oe,(e(v),b(()=>e(v).label)))}),rt(R,[],o,()=>(e(v),b(()=>e(v).value),e(ne)),J=>l(ne,J)),m(c,h)}),a(E),a(F);var y=s(F,2),x=s(t(y),2),S=t(x);P(()=>{e(re),tt(()=>{e(X)})}),ge(S,5,()=>ga,he,(c,v)=>{var h=Tt(),o=t(h,!0);a(h);var p={};P(()=>{_(o,(e(v),b(()=>e(v).label))),p!==(p=(e(v),b(()=>e(v).value)))&&(h.value=(h.__value=(e(v),b(()=>e(v).value)))??"")}),m(c,h)}),a(S),lt(2),a(x),a(y),a(T);var U=s(T,2);{var g=c=>{var v=At(),h=t(v,!0);a(v),P(()=>_(h,e(Q))),m(c,v)};C(U,c=>{e(Q)&&c(g)})}var A=s(U,2);{var z=c=>{var v=It(),h=t(v,!0);a(v),P(()=>_(h,e(ie))),m(c,v)};C(A,c=>{e(ie)&&c(z)})}var Y=s(A,2),Z=t(Y),H=s(Z,2),j=t(H,!0);a(H),a(Y),a(L),a(i),P(()=>{S.disabled=e(X),Z.disabled=e(X),H.disabled=e(X),_(j,e(X)?"저장 중...":"저장하기")}),pt(S,()=>e(re),c=>l(re,c)),u("click",Z,be),u("click",H,Ta),u("click",L,Ue(function(c){Be.call(this,k,c)})),u("click",i,be),u("keydown",i,c=>c.key==="Escape"&&be()),m(r,i)};C(Fa,r=>{e(Se)&&r(Ca)})}m(n,He),et(),B()}export{el as component};
