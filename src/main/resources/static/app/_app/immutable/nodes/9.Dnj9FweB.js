const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DauHAJ20.js","../chunks/Do2HDaJV.js"])))=>i.map(i=>d[i]);
import{c as pe,a as U,f as G}from"../chunks/TFX7ugsA.js";import"../chunks/D6SK0GIy.js";import{c as ue,o as fe,g as re}from"../chunks/DujhYGdh.js";import{p as ne,ao as be,o as a,g as e,Y as v,ap as he,f as ve,a as ce,c as s,s as l,as as V,b as t,t as W,e as xe,ar as ge}from"../chunks/C9SIyTFa.js";import{i as Y,s as j,e as T}from"../chunks/bwNj2O70.js";import{h as _e}from"../chunks/0poByBks.js";import{r as F,s as se}from"../chunks/xoXkTC80.js";import{c as te,b as le,p as ke}from"../chunks/BMCtT5ss.js";import{i as de}from"../chunks/CSrNcNRV.js";import{s as we,a as ze}from"../chunks/9ZnQYv7J.js";import{b as E}from"../chunks/CDBHGxnl.js";import{g as ye}from"../chunks/t2ZFSGcY.js";import{b as oe,i as $e,c as Pe}from"../chunks/CMcePfVQ.js";import{s as Ie,c as Te}from"../chunks/DHsHBKWo.js";import{S as Se}from"../chunks/D-G3Vv_Y.js";import{p as ie}from"../chunks/BsetF9sD.js";import{C as Le,D as De,M as Me}from"../chunks/Do2HDaJV.js";import{_ as Ae}from"../chunks/PPVm8Dsz.js";const Be=Le("Browser",{web:()=>Ae(()=>import("../chunks/DauHAJ20.js"),__vite__mapDeps([0,1]),import.meta.url).then(S=>new S.BrowserWeb)});var qe=G('<div class="error svelte-1h0k91m"> </div>'),Ce=G('<div class="modal-backdrop svelte-1h0k91m" role="presentation"><div class="modal svelte-1h0k91m" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="modal-header svelte-1h0k91m"><h2 id="modal-title" class="svelte-1h0k91m">약관 동의 필요</h2> <p class="modal-desc svelte-1h0k91m">서비스 이용을 위해 약관에 동의해 주세요.</p></div> <div class="modal-body svelte-1h0k91m"><div class="agreement-item svelte-1h0k91m"><label class="agreement-label svelte-1h0k91m"><input type="checkbox" class="svelte-1h0k91m"/> <span class="checkbox-custom svelte-1h0k91m"></span> <span class="agreement-text svelte-1h0k91m"><button type="button" class="link-btn svelte-1h0k91m">서비스 이용약관</button> <span class="required svelte-1h0k91m">(필수)</span></span></label></div> <div class="agreement-item svelte-1h0k91m"><label class="agreement-label svelte-1h0k91m"><input type="checkbox" class="svelte-1h0k91m"/> <span class="checkbox-custom svelte-1h0k91m"></span> <span class="agreement-text svelte-1h0k91m"><button type="button" class="link-btn svelte-1h0k91m">개인정보처리방침</button> <span class="required svelte-1h0k91m">(필수)</span></span></label></div> <button type="button" class="agree-all-btn svelte-1h0k91m">전체 동의</button> <!></div> <div class="modal-footer svelte-1h0k91m"><button type="button" class="submit-btn svelte-1h0k91m"> </button></div></div></div>');function Ee(S,L){ne(L,!1);const D=v();let J=ie(L,"userId",8),K=ie(L,"show",8,!1);const g=ue();let c=v(!1),p=v(!1),n=v(!1),d=v("");async function h(o,m){o.preventDefault(),o.stopPropagation();const u=window.location.origin+E+m;De.isNativePlatform()?await Be.open({url:u}):window.open(u,"_blank","noopener,noreferrer")}async function _(){if(e(D)){a(n,!0),a(d,"");try{const o=await Me({userId:J()});o.success?g("agreed"):a(d,o.message||"약관 동의 처리에 실패했습니다.")}catch{a(d,"서버 오류가 발생했습니다.")}finally{a(n,!1)}}}function Q(o){}be(()=>(e(c),e(p),e(n)),()=>{a(D,e(c)&&e(p)&&!e(n))}),he(),de();var k=pe(),X=ve(k);{var Z=o=>{var m=Ce(),u=s(m),M=l(s(u),2),f=s(M),w=s(f),z=s(w);F(z);var y=l(z,4),H=s(y);V(2),t(y),t(w),t(f);var x=l(f,2),A=s(x),B=s(A);F(B);var $=l(B,4),N=s($);V(2),t($),t(A),t(x);var q=l(x,2),O=l(q,2);{var ee=i=>{var C=qe(),ae=s(C,!0);t(C),W(()=>j(ae,e(d))),U(i,C)};Y(O,i=>{e(d)&&i(ee)})}t(M);var P=l(M,2),I=s(P),R=s(I,!0);t(I),t(P),t(u),t(m),W(()=>{I.disabled=!e(D),j(R,e(n)?"처리 중...":"동의하고 계속하기")}),te(z,()=>e(c),i=>a(c,i)),T("click",H,i=>h(i,"/terms")),te(B,()=>e(p),i=>a(p,i)),T("click",N,i=>h(i,"/privacy")),T("click",q,()=>{a(c,!0),a(p,!0)}),T("click",I,_),T("click",m,Q),U(o,m)};Y(X,o=>{K()&&o(Z)})}U(S,k),ce()}var Ue=G('<div class="error svelte-1x05zx6"> </div>'),Fe=G('<div class="page svelte-1x05zx6"><header class="header svelte-1x05zx6"><!> <p class="subtitle svelte-1x05zx6">계정에 로그인하세요</p></header> <form class="form svelte-1x05zx6"><div class="field svelte-1x05zx6"><label for="username" class="svelte-1x05zx6">아이디</label> <input type="text" id="username" placeholder="아이디 입력" autocomplete="username" class="svelte-1x05zx6"/></div> <div class="field svelte-1x05zx6"><label for="password" class="svelte-1x05zx6">비밀번호</label> <input type="password" id="password" placeholder="비밀번호 입력" autocomplete="current-password" class="svelte-1x05zx6"/></div> <div class="help-links svelte-1x05zx6"><a class="svelte-1x05zx6">아이디 찾기</a> <span class="divider svelte-1x05zx6"></span> <a class="svelte-1x05zx6">비밀번호 찾기</a></div> <div class="options-row svelte-1x05zx6"><label class="checkbox-label svelte-1x05zx6"><input type="checkbox" class="svelte-1x05zx6"/> <span class="checkbox-text svelte-1x05zx6">자동 로그인</span></label></div> <!> <button type="submit" class="submit svelte-1x05zx6"> </button></form> <div class="footer svelte-1x05zx6"><span>계정이 없으신가요?</span> <a class="svelte-1x05zx6">회원가입</a></div></div> <!>',1);function ra(S,L){ne(L,!1);const D=()=>ze($e,"$isLoggedIn",J),[J,K]=we();let g=v(""),c=v(""),p=v(!1),n=v(""),d=v(!1),h=v(!1),_=v(null);const Q={home:"/",feed:"/today",trending:"/trending"};fe(()=>{oe.init(),D()&&k()});async function k(){await Ie.init();const r=re(Te),b=Q[r]||"/";ye(`${E}${b}`)}async function X(){if(a(n,""),!e(g).trim()){a(n,"아이디를 입력해주세요.");return}if(!e(c)){a(n,"비밀번호를 입력해주세요.");return}a(d,!0);const r=await oe.login(e(g),e(c),e(p));if(a(d,!1),r.success){if(r.requiresTermsAgreement){const b=re(Pe);if(b){a(_,b.userId),a(h,!0);return}}await k()}else a(n,r.message)}function Z(){a(h,!1),a(_,null),k()}de();var o=Fe();_e("1x05zx6",r=>{xe(()=>{ge.title="로그인 - SHIFT"})});var m=ve(o),u=s(m),M=s(u);Se(M,{size:"lg"}),V(2),t(u);var f=l(u,2),w=s(f),z=l(s(w),2);F(z),t(w);var y=l(w,2),H=l(s(y),2);F(H),t(y);var x=l(y,2),A=s(x),B=l(A,4);t(x);var $=l(x,2),N=s($),q=s(N);F(q),V(2),t(N),t($);var O=l($,2);{var ee=r=>{var b=Ue(),me=s(b,!0);t(b),W(()=>j(me,e(n))),U(r,b)};Y(O,r=>{e(n)&&r(ee)})}var P=l(O,2),I=s(P,!0);t(P),t(f);var R=l(f,2),i=l(s(R),2);t(R),t(m);var C=l(m,2);{var ae=r=>{Ee(r,{get userId(){return e(_)},get show(){return e(h)},$$events:{agreed:Z}})};Y(C,r=>{e(h)&&e(_)&&r(ae)})}W(()=>{se(A,"href",`${E??""}/find-username`),se(B,"href",`${E??""}/forgot-password`),P.disabled=e(d),j(I,e(d)?"로그인 중...":"로그인"),se(i,"href",`${E??""}/signup`)}),le(z,()=>e(g),r=>a(g,r)),le(H,()=>e(c),r=>a(c,r)),te(q,()=>e(p),r=>a(p,r)),T("submit",f,ke(X)),U(S,o),ce(),K()}export{ra as component};
