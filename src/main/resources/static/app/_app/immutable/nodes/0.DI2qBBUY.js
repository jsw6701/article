import{f as A,e as R,a as u,s as X,b as Z}from"../chunks/B-OvIa1U.js";import{i as de}from"../chunks/CdXFSiSg.js";import{y as ye,A as ue,aF as ge,a4 as me,a5 as Y,ac as k,ad as pe,ab as $,a7 as qe,s as p,o as q,a as l,a9 as o,a8 as h,aa as c,a6 as be,u as xe}from"../chunks/C_qc7GMT.js";import{i as U}from"../chunks/7qhV2vbv.js";import{c as V,s as b,i as _e,n as we}from"../chunks/D2PtFGOZ.js";import{s as I}from"../chunks/tHjlPVu2.js";import{s as ke,a as S}from"../chunks/CqCY2mX9.js";import{b as v}from"../chunks/rYzDofXa.js";import{s as $e,g as F}from"../chunks/D-tmCrlR.js";function Ie(a,y,f,r,g){ye&&ue();var i=y.$$slots?.[f],s=!1;i===!0&&(i=y.children,s=!0),i===void 0||i(a,s?()=>r:r)}const Se=()=>{const a=$e;return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},updated:a.updated}},Ae={subscribe(a){return Se().page.subscribe(a)}};function Ee(){const a="dark",f=localStorage.getItem("theme")||a,{subscribe:r,set:g,update:i}=ge(f);return{subscribe:r,set:s=>{localStorage.setItem("theme",s),document.documentElement.setAttribute("data-theme",s),g(s)},toggle:()=>{i(s=>{const d=s==="dark"?"light":"dark";return localStorage.setItem("theme",d),document.documentElement.setAttribute("data-theme",d),d})},init:()=>{{const d=localStorage.getItem("theme")||a;document.documentElement.setAttribute("data-theme",d),g(d)}}}}const H=Ee();var Le=Z('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><circle cx="12" cy="12" r="5" class="svelte-12qhfyh"></circle><line x1="12" y1="1" x2="12" y2="3" class="svelte-12qhfyh"></line><line x1="12" y1="21" x2="12" y2="23" class="svelte-12qhfyh"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="svelte-12qhfyh"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="svelte-12qhfyh"></line><line x1="1" y1="12" x2="3" y2="12" class="svelte-12qhfyh"></line><line x1="21" y1="12" x2="23" y2="12" class="svelte-12qhfyh"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="svelte-12qhfyh"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="svelte-12qhfyh"></line></svg>'),Be=Z('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" class="svelte-12qhfyh"></path></svg>'),Ce=A('<span class="user-name svelte-12qhfyh"> </span> <button class="logout-btn svelte-12qhfyh">logout</button>',1),Me=A('<a class="login-btn svelte-12qhfyh">login</a>'),ze=A('<a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" class="svelte-12qhfyh"></path></svg></div> <span class="nav-label svelte-12qhfyh">Saved</span></a>'),Pe=A('<div class="app svelte-12qhfyh"><header class="status-bar svelte-12qhfyh"><div class="status-left svelte-12qhfyh"><span class="live-dot svelte-12qhfyh"></span> <span class="live-text svelte-12qhfyh">LIVE</span></div> <div class="status-center svelte-12qhfyh"><span class="time svelte-12qhfyh"> </span></div> <div class="status-right svelte-12qhfyh"><button class="theme-btn svelte-12qhfyh" aria-label="테마 전환"><!></button> <!></div></header> <main class="main svelte-12qhfyh"><!></main> <nav class="bottom-nav svelte-12qhfyh"><a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><rect x="3" y="3" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="14" y="3" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="3" y="14" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="14" y="14" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect></svg></div> <span class="nav-label svelte-12qhfyh">Dashboard</span></a> <a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" class="svelte-12qhfyh"></path><polyline points="14,2 14,8 20,8" class="svelte-12qhfyh"></polyline><line x1="16" y1="13" x2="8" y2="13" class="svelte-12qhfyh"></line><line x1="16" y1="17" x2="8" y2="17" class="svelte-12qhfyh"></line><line x1="10" y1="9" x2="8" y2="9" class="svelte-12qhfyh"></line></svg></div> <span class="nav-label svelte-12qhfyh">Feed</span></a> <a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><polyline points="23,6 13.5,15.5 8.5,10.5 1,18" class="svelte-12qhfyh"></polyline><polyline points="17,6 23,6 23,12" class="svelte-12qhfyh"></polyline></svg></div> <span class="nav-label svelte-12qhfyh">Trending</span></a> <!></nav></div>');function Je(a,y){me(y,!1);const f=()=>S(Ae,"$page",s),r=()=>S(_e,"$isLoggedIn",s),g=()=>S(H,"$theme",s),i=()=>S(we,"$currentUser",s),[s,d]=ke(),x=q(),W=q(),j=q(),ee=["/login","/signup"];let E=q(!1);Y(()=>{V.init(),H.init(),p(E,!0);const e=()=>{V.clear(),F(`${v}/login`)};return window.addEventListener("auth:expired",e),()=>window.removeEventListener("auth:expired",e)});async function te(){await V.logout()}function _(e){return e==="/"?l(x)==="/"||l(x)===v+"/":l(x).includes(e)}let m=q(new Date);Y(()=>{const e=setInterval(()=>{p(m,new Date)},1e3);return()=>clearInterval(e)}),k(()=>(l(E),f(),r(),F),()=>{if(l(E)&&typeof window<"u"){const e=f().url.pathname.replace(v,"")||"/",t=ee.some(n=>e.startsWith(n));!r()&&!t&&F(`${v}/login`)}}),k(()=>f(),()=>{p(x,f().url.pathname)}),k(()=>l(m),()=>{p(W,l(m).getHours().toString().padStart(2,"0"))}),k(()=>l(m),()=>{p(j,l(m).getMinutes().toString().padStart(2,"0"))}),pe(),de();var L=Pe(),B=o(L),C=h(o(B),2),G=o(C),se=o(G);c(G),c(C);var J=h(C,2),w=o(J),ae=o(w);{var le=e=>{var t=Le();u(e,t)},ne=e=>{var t=Be();u(e,t)};U(ae,e=>{g()==="dark"?e(le):e(ne,!1)})}c(w);var re=h(w,2);{var ie=e=>{var t=Ce(),n=be(t),T=o(n,!0);c(n);var fe=h(n,2);$(()=>X(T,(i(),xe(()=>i()?.username)))),R("click",fe,te),u(e,t)},oe=e=>{var t=Me();$(()=>b(t,"href",`${v??""}/login`)),u(e,t)};U(re,e=>{r()?e(ie):e(oe,!1)})}c(J),c(B);var M=h(B,2),he=o(M);Ie(he,y,"default",{}),c(M);var K=h(M,2),z=o(K);let N;var P=h(z,2);let O;var D=h(P,2);let Q;var ce=h(D,2);{var ve=e=>{var t=ze();let n;$(T=>{n=I(t,1,"nav-item svelte-12qhfyh",null,n,T),b(t,"href",`${v??""}/bookmarks`)},[()=>({active:_("/bookmarks")})]),u(e,t)};U(ce,e=>{r()&&e(ve)})}c(K),c(L),$((e,t,n)=>{X(se,`${l(W)??""}:${l(j)??""}`),N=I(z,1,"nav-item svelte-12qhfyh",null,N,e),b(z,"href",`${v??""}/`),O=I(P,1,"nav-item svelte-12qhfyh",null,O,t),b(P,"href",`${v??""}/today`),Q=I(D,1,"nav-item svelte-12qhfyh",null,Q,n),b(D,"href",`${v??""}/trending`)},[()=>({active:_("/")}),()=>({active:_("/today")}),()=>({active:_("/trending")})]),R("click",w,()=>H.toggle()),u(a,L),qe(),d()}export{Je as component};
