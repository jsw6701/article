import{c as ne,a as _,f as u,s as c,e as ls}from"../chunks/CC4GLFaW.js";import{i as vs}from"../chunks/Vuw_Qtj8.js";import{o as is}from"../chunks/D2MiqHYE.js";import{w as ke,a2 as os,a3 as V,a4 as cs,s as f,o as B,a as e,a6 as a,a7 as s,a5 as t,a8 as h,u as r,as as ps,aq as re}from"../chunks/BCBllwWT.js";import{i as b}from"../chunks/vsECunA6.js";import{e as xe,i as ye}from"../chunks/B1qOUn_2.js";import{h as _s,i as gs,s as U,e as us,j as ds}from"../chunks/CQlLVhH8.js";import{t as ms,s as fs}from"../chunks/0zgmL7Io.js";import{p as hs}from"../chunks/DNAUCKhy.js";import{s as bs,a as we}from"../chunks/Bl3D_aLP.js";import{b as $e}from"../chunks/BlpVvTHe.js";import{g as Ce,a as Ie,f as Te}from"../chunks/CWF1PM-K.js";import{i as ks,c as xs}from"../chunks/c5vKzgo2.js";function ys(k,$,G,x){var J=k.__style;if(ke||J!==$){var L=ms($);(!ke||L!==k.getAttribute("style"))&&(L==null?k.removeAttribute("style"):k.style.cssText=L),k.__style=$}return x}var ws=u('<div class="loading svelte-n723gn"><div class="spinner svelte-n723gn"></div></div>'),$s=u('<div class="error svelte-n723gn"><p> </p> <a class="svelte-n723gn">홈으로 돌아가기</a></div>'),Cs=u('<button><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-n723gn"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></button>'),Is=u('<p class="signal svelte-n723gn"> </p>'),Ts=u("<span>·</span> <span> </span>",1),Bs=u('<li class="svelte-n723gn"><span class="ev-source svelte-n723gn"> </span> <span class="ev-fact svelte-n723gn"> </span></li>'),Ls=u('<section class="section svelte-n723gn"><h2 class="svelte-n723gn">근거</h2> <ul class="evidence svelte-n723gn"></ul></section>'),As=u('<li class="svelte-n723gn"><a target="_blank" rel="noopener noreferrer" class="svelte-n723gn"><span class="art-title svelte-n723gn"> </span> <span class="art-meta svelte-n723gn"> </span></a></li>'),Ns=u('<section class="section svelte-n723gn"><h2 class="svelte-n723gn"> </h2> <ul class="articles svelte-n723gn"></ul></section>'),Ds=u('<article class="article svelte-n723gn"><a class="back svelte-n723gn">← 뒤로</a> <header class="header svelte-n723gn"><div class="header-top svelte-n723gn"><span class="cat svelte-n723gn"> </span> <!></div> <h1 class="title svelte-n723gn"> </h1> <!> <div class="meta svelte-n723gn"><span> </span> <span>·</span> <span> </span> <span>·</span> <span> </span> <!></div></header> <section class="section highlight svelte-n723gn"><h2 class="svelte-n723gn">핵심 요약</h2> <p class="lead svelte-n723gn"> </p></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">왜 중요한가</h2> <p class="svelte-n723gn"> </p></section> <!> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">반대 시나리오</h2> <p class="svelte-n723gn"> </p></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">영향도</h2> <div class="impact svelte-n723gn"><div class="impact-score svelte-n723gn"><span class="score-num svelte-n723gn"> </span> <span class="score-max svelte-n723gn">/5</span></div> <div class="impact-bar svelte-n723gn"><div class="impact-fill svelte-n723gn"></div></div> <p class="impact-reason svelte-n723gn"> </p></div></section> <section class="section action svelte-n723gn"><h2 class="svelte-n723gn">행동 가이드</h2> <p class="svelte-n723gn"> </p></section> <!></article>');function Fs(k,$){os($,!1);const G=()=>we(ks,"$isLoggedIn",J),x=()=>we(xs,"$currentUser",J),[J,L]=bs();let P=hs($,"params",8),n=B(null),i=B(null),le=B(!0),j=B(null),y=B(!1),q=B(!1);is(async()=>{try{f(n,await _s(Number(P().issueId)));const o=e(n).cardJson;if(f(i,typeof o=="string"?JSON.parse(o):o),G()&&x())try{const d=await gs(Number(P().issueId),x().accessToken);f(y,d.bookmarked)}catch{}}catch(o){f(j,o?.message??"불러오기 실패")}finally{f(le,!1)}});async function Be(){if(!(!G()||!x())){f(q,!0);try{e(y)?(await us(Number(P().issueId),x().accessToken),f(y,!1)):(await ds(Number(P().issueId),x().accessToken),f(y,!0))}catch(o){console.error("북마크 처리 실패:",o)}finally{f(q,!1)}}}function Le(o){const d=new Date(o);return`${d.getMonth()+1}월 ${d.getDate()}일`}function Ae(o){return o.headline||o.issueTitle}vs();var ve=ne(),Ne=V(ve);{var De=o=>{var d=ws();_(o,d)},Se=o=>{var d=ne(),Me=V(d);{var Ue=C=>{var I=$s(),A=a(I),z=a(A,!0);s(A);var N=t(A,2);s(I),h(()=>{c(z,e(j)),U(N,"href",`${$e??""}/`)}),_(C,I)},Ge=C=>{var I=ne(),A=V(I);{var z=N=>{var O=Ds(),ie=a(O),R=t(ie,2),E=a(R),F=a(E),Je=a(F,!0);s(F);var Pe=t(F,2);{var Ve=v=>{var l=Cs();let p;var w=a(l);s(l),h(()=>{p=fs(l,1,"bookmark-btn svelte-n723gn",null,p,{active:e(y)}),l.disabled=e(q),U(l,"aria-label",e(y)?"북마크 해제":"북마크 추가"),U(w,"fill",e(y)?"currentColor":"none")}),ls("click",l,Be),_(v,l)};b(Pe,v=>{G()&&v(Ve)})}s(E);var H=t(E,2),je=a(H,!0);s(H);var oe=t(H,2);{var qe=v=>{var l=Is(),p=a(l,!0);s(l),h(()=>c(p,(e(n),r(()=>e(n).signalSummary)))),_(v,l)};b(oe,v=>{e(n),r(()=>e(n).signalSummary)&&v(qe)})}var ce=t(oe,2),K=a(ce),ze=a(K,!0);s(K);var Q=t(K,4),Oe=a(Q);s(Q);var W=t(Q,4),Re=a(W);s(W);var Ee=t(W,2);{var Fe=v=>{var l=Ts(),p=t(V(l),2),w=a(p);s(p),h(m=>c(w,`${m??""} 조회`),[()=>(re(Te),e(n),r(()=>Te(e(n).viewCount)))]),_(v,l)};b(Ee,v=>{e(n),r(()=>e(n).viewCount)&&v(Fe)})}s(ce),s(R);var X=t(R,2),pe=t(a(X),2),He=a(pe,!0);s(pe),s(X);var Y=t(X,2),_e=t(a(Y),2),Ke=a(_e,!0);s(_e),s(Y);var ge=t(Y,2);{var Qe=v=>{var l=Ls(),p=t(a(l),2);xe(p,5,()=>(e(i),r(()=>e(i).evidence)),ye,(w,m)=>{var D=Bs(),g=a(D),S=a(g,!0);s(g);var T=t(g,2),M=a(T,!0);s(T),s(D),h(()=>{c(S,(e(m),r(()=>e(m).source))),c(M,(e(m),r(()=>e(m).fact)))}),_(w,D)}),s(p),s(l),_(v,l)};b(ge,v=>{e(i),r(()=>e(i).evidence?.length>0)&&v(Qe)})}var Z=t(ge,2),ue=t(a(Z),2),We=a(ue,!0);s(ue),s(Z);var ee=t(Z,2),de=t(a(ee),2),se=a(de),me=a(se),Xe=a(me,!0);s(me),ps(2),s(se);var ae=t(se,2),Ye=a(ae);s(ae);var fe=t(ae,2),Ze=a(fe,!0);s(fe),s(de),s(ee);var te=t(ee,2),he=t(a(te),2),es=a(he,!0);s(he),s(te);var ss=t(te,2);{var as=v=>{var l=Ns(),p=a(l),w=a(p);s(p);var m=t(p,2);xe(m,5,()=>(e(n),r(()=>e(n).articles)),ye,(D,g)=>{var S=As(),T=a(S),M=a(T),ts=a(M,!0);s(M);var be=t(M,2),ns=a(be);s(be),s(T),s(S),h(rs=>{U(T,"href",(e(g),r(()=>e(g).link))),c(ts,(e(g),r(()=>e(g).title))),c(ns,`${e(g),r(()=>e(g).publisher)??""} · ${rs??""}`)},[()=>(e(g),r(()=>Le(e(g).publishedAt)))]),_(D,S)}),s(m),s(l),h(()=>c(w,`관련 기사 (${e(n),r(()=>e(n).articles.length)??""})`)),_(v,l)};b(ss,v=>{e(n),r(()=>e(n).articles?.length>0)&&v(as)})}s(O),h((v,l,p)=>{U(ie,"href",`${$e??""}/`),c(Je,v),c(je,l),c(ze,p),c(Oe,`${e(n),r(()=>e(n).issueArticleCount)??""}개 기사`),c(Re,`${e(n),r(()=>e(n).issuePublisherCount)??""}개 매체`),c(He,(e(i),r(()=>e(i).conclusion))),c(Ke,(e(i),r(()=>e(i).why_it_matters))),c(We,(e(i),r(()=>e(i).counter_scenario))),c(Xe,(e(i),r(()=>e(i).impact?.score??"-"))),ys(Ye,`width: ${e(i),r(()=>(e(i).impact?.score??0)/5*100)??""}%`),c(Ze,(e(i),r(()=>e(i).impact?.reason))),c(es,(e(i),r(()=>e(i).action_guide)))},[()=>(re(Ce),e(n),r(()=>Ce(e(n).issueGroup))),()=>(e(n),r(()=>Ae(e(n)))),()=>(re(Ie),e(n),r(()=>Ie(e(n).issueLastPublishedAt)))]),_(N,O)};b(A,N=>{e(n)&&e(i)&&N(z)},!0)}_(C,I)};b(Me,C=>{e(j)?C(Ue):C(Ge,!1)},!0)}_(o,d)};b(Ne,o=>{e(le)?o(De):o(Se,!1)})}_(k,ve),cs(),L()}export{Fs as component};
