import{c as me,a as _,f}from"../chunks/TFX7ugsA.js";import"../chunks/D6SK0GIy.js";import{o as ba}from"../chunks/DujhYGdh.js";import{p as xa,f as F,a as ka,o as C,Y as G,g as e,c as s,b as a,s as v,t as u,u as l,as as wa,d as $,j as Ca}from"../chunks/C9SIyTFa.js";import{i as b,s as c,e as $a}from"../chunks/bwNj2O70.js";import{e as N,i as D}from"../chunks/DShnAKY6.js";import{s as z}from"../chunks/xoXkTC80.js";import{s as La}from"../chunks/lJrTxOp0.js";import{s as Aa}from"../chunks/6RZwXm1a.js";import{i as Ia}from"../chunks/CSrNcNRV.js";import{p as Ba}from"../chunks/BsetF9sD.js";import{s as Na,a as Da}from"../chunks/9ZnQYv7J.js";import{b as De}from"../chunks/CDBHGxnl.js";import{v as Pa,w as Sa,t as ja,x as Ea}from"../chunks/Do2HDaJV.js";import{b as Pe,c as K,a as Se,f as je,g as Ee}from"../chunks/8QpmlEFl.js";import{i as Ma}from"../chunks/CMcePfVQ.js";import{L as Ra}from"../chunks/FuepL3qI.js";var Ta=f('<div class="loading svelte-n723gn"><div class="spinner svelte-n723gn"></div></div>'),Ga=f('<div class="error svelte-n723gn"><p> </p> <a class="svelte-n723gn">홈으로 돌아가기</a></div>'),za=f('<button><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-n723gn"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></button>'),Ja=f('<p class="signal svelte-n723gn"> </p>'),Va=f("<span>·</span> <span> </span>",1),qa=f('<div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">정점 도달</span> <span class="stat-value svelte-n723gn"> </span></div>'),Ha=f('<div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">정점 기사 수</span> <span class="stat-value svelte-n723gn"> </span></div>'),Oa=f('<section class="section lifecycle-section svelte-n723gn"><h2 class="svelte-n723gn">이슈 생애주기</h2> <div class="lifecycle-content svelte-n723gn"><div class="lifecycle-stage svelte-n723gn"><span class="lifecycle-emoji svelte-n723gn"> </span> <div class="lifecycle-info svelte-n723gn"><span class="lifecycle-label svelte-n723gn"> </span> <span class="lifecycle-desc svelte-n723gn"> </span></div></div> <div class="lifecycle-stats svelte-n723gn"><div class="lifecycle-stat svelte-n723gn"><span class="stat-value svelte-n723gn"> </span></div> <!> <div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">현재 기사 수</span> <span class="stat-value svelte-n723gn"> </span></div> <!></div></div></section>'),Ya=f('<p class="lead svelte-n723gn"> </p>'),Fa=f('<p class="svelte-n723gn"> </p>'),Ka=f('<span class="ev-fact svelte-n723gn"> </span>'),Qa=f('<li class="svelte-n723gn"><span class="ev-source svelte-n723gn"> </span> <!></li>'),Ua=f('<section class="section svelte-n723gn"><h2 class="svelte-n723gn">근거</h2> <ul class="evidence svelte-n723gn"></ul></section>'),Wa=f('<p class="svelte-n723gn"> </p>'),Xa=f('<p class="impact-reason svelte-n723gn"> </p>'),Za=f('<p class="svelte-n723gn"> </p>'),es=f('<li class="svelte-n723gn"><a target="_blank" rel="noopener noreferrer" class="svelte-n723gn"><span class="art-title svelte-n723gn"> </span> <span class="art-meta svelte-n723gn"> </span></a></li>'),as=f('<section class="section svelte-n723gn"><h2 class="svelte-n723gn"> </h2> <ul class="articles svelte-n723gn"></ul></section>'),ss=f('<article class="article svelte-n723gn"><a class="back svelte-n723gn">← 뒤로</a> <header class="header svelte-n723gn"><div class="header-top svelte-n723gn"><div class="header-left svelte-n723gn"><span class="cat svelte-n723gn"> </span> <!></div> <!></div> <h1 class="title svelte-n723gn"> </h1> <!> <div class="meta svelte-n723gn"><span> </span> <span>·</span> <span> </span> <span>·</span> <span> </span> <!></div></header> <!> <section class="section highlight svelte-n723gn"><h2 class="svelte-n723gn">핵심 요약</h2> <!></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">왜 중요한가</h2> <!></section> <!> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">반대 시나리오</h2> <!></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">영향도</h2> <div class="impact svelte-n723gn"><div class="impact-score svelte-n723gn"><span class="score-num svelte-n723gn"> </span> <span class="score-max svelte-n723gn">/5</span></div> <div class="impact-bar svelte-n723gn"><div class="impact-fill svelte-n723gn"></div></div> <!></div></section> <section class="section action svelte-n723gn"><h2 class="svelte-n723gn">행동 가이드</h2> <!></section> <!></article>');function bs(Me,he){xa(he,!1);const Q=()=>Da(Ma,"$isLoggedIn",Re),[Re,Te]=Na();let Y=Ba(he,"params",8),t=G(null),g=G(null),ye=G(!0),U=G(null),P=G(!1),W=G(!1);ba(async()=>{try{C(t,await Pa(Number(Y().issueId)));const o=e(t).cardJson;if(C(g,typeof o=="string"?JSON.parse(o):o),Q())try{const m=await Sa(Number(Y().issueId));C(P,m.bookmarked)}catch{}}catch(o){C(U,o?.message??"불러오기 실패")}finally{C(ye,!1)}});async function Ge(){if(Q()){C(W,!0);try{e(P)?(await ja(Number(Y().issueId)),C(P,!1)):(await Ea(Number(Y().issueId)),C(P,!0))}catch(o){console.error("북마크 처리 실패:",o)}finally{C(W,!1)}}}function ze(o){const m=new Date(o);return`${m.getMonth()+1}월 ${m.getDate()}일`}function Je(o){return o.headline||o.issueTitle}function M(o){if(!o)return[];const m=o.trim();if(m.includes(`

`))return m.split(/\n\n+/).map(p=>p.trim()).filter(p=>p);if(m.includes(`
`))return m.split(/\n+/).map(p=>p.trim()).filter(p=>p);const J=m.split(new RegExp("(?<=[다요죠음임함됨됩니까][\\.\\?!])\\s+")).flatMap(p=>p.split(new RegExp("(?<=[^0-9])[\\.\\?!]\\s+(?=[가-힣])"))).map(p=>p.trim()).filter(p=>p.length>0);if(J.length<=2)return[m];const V=[];let L=[];const A=3;return J.forEach((p,S)=>{L.push(p),(L.length>=A||S===J.length-1)&&(V.push(L.join(" ")),L=[])}),L.length>0&&V.push(L.join(" ")),V}Ia();var be=me(),Ve=F(be);{var qe=o=>{var m=Ta();_(o,m)},He=o=>{var m=me(),J=F(m);{var V=A=>{var p=Ga(),S=s(p),X=s(S,!0);a(S);var q=v(S,2);a(p),u(()=>{c(X,e(U)),z(q,"href",`${De??""}/`)}),_(A,p)},L=A=>{var p=me(),S=F(p);{var X=q=>{var Z=ss(),xe=s(Z),ee=v(xe,2),ae=s(ee),se=s(ae),te=s(se),Oe=s(te,!0);a(te);var Ye=v(te,2);{var Fe=i=>{Ra(i,{get lifecycle(){return e(t),l(()=>e(t).lifecycle)},size:"medium"})};b(Ye,i=>{e(t),l(()=>e(t).lifecycle)&&i(Fe)})}a(se);var Ke=v(se,2);{var Qe=i=>{var n=za();let r;var d=s(n);a(n),u(()=>{r=La(n,1,"bookmark-btn svelte-n723gn",null,r,{active:e(P)}),n.disabled=e(W),z(n,"aria-label",e(P)?"북마크 해제":"북마크 추가"),z(d,"fill",e(P)?"currentColor":"none")}),$a("click",n,Ge),_(i,n)};b(Ke,i=>{Q()&&i(Qe)})}a(ae);var ne=v(ae,2),Ue=s(ne,!0);a(ne);var ke=v(ne,2);{var We=i=>{var n=Ja(),r=s(n,!0);a(n),u(()=>c(r,(e(t),l(()=>e(t).signalSummary)))),_(i,n)};b(ke,i=>{e(t),l(()=>e(t).signalSummary)&&i(We)})}var we=v(ke,2),re=s(we),Xe=s(re,!0);a(re);var le=v(re,4),Ze=s(le);a(le);var ve=v(le,4),ea=s(ve);a(ve);var aa=v(ve,2);{var sa=i=>{var n=Va(),r=v(F(n),2),d=s(r);a(r),u(y=>c(d,`${y??""} 조회`),[()=>($(Se),e(t),l(()=>Se(e(t).viewCount)))]),_(i,n)};b(aa,i=>{e(t),l(()=>e(t).viewCount)&&i(sa)})}a(we),a(ee);var Ce=v(ee,2);{var ta=i=>{const n=Ca(()=>($(Ee),e(t),l(()=>Ee(e(t).lifecycle.stage))));var r=Oa(),d=v(s(r),2),y=s(d),x=s(y),h=s(x,!0);a(x);var I=v(x,2),k=s(I),j=s(k,!0);a(k);var R=v(k,2),B=s(R,!0);a(R),a(I),a(y);var T=v(y,2),H=s(T),Ie=s(H),da=s(Ie,!0);a(Ie),a(H);var Be=v(H,2);{var fa=w=>{var E=qa(),O=v(s(E),2),ue=s(O,!0);a(O),a(E),u(ya=>c(ue,ya),[()=>($(K),e(t),l(()=>K(e(t).lifecycle.peakDate)))]),_(w,E)};b(Be,w=>{e(t),l(()=>e(t).lifecycle.peakDate)&&w(fa)})}var fe=v(Be,2),Ne=v(s(fe),2),ua=s(Ne);a(Ne),a(fe);var ma=v(fe,2);{var ha=w=>{var E=Ha(),O=v(s(E),2),ue=s(O);a(O),a(E),u(()=>c(ue,`${e(t),l(()=>e(t).lifecycle.peakArticleCount)??""}개`)),_(w,E)};b(ma,w=>{e(t),l(()=>e(t).lifecycle.peakArticleCount>0)&&w(ha)})}a(T),a(d),a(r),u(w=>{z(r,"data-stage",(e(t),l(()=>e(t).lifecycle.stage))),c(h,($(e(n)),l(()=>e(n).emoji))),c(j,($(e(n)),l(()=>e(n).label))),c(B,($(e(n)),l(()=>e(n).description))),c(da,w),c(ua,`${e(t),l(()=>e(t).lifecycle.currentArticleCount)??""}개 (24시간)`)},[()=>($(je),e(t),l(()=>je(e(t).lifecycle)))]),_(i,r)};b(Ce,i=>{e(t),l(()=>e(t).lifecycle)&&i(ta)})}var ie=v(Ce,2),na=v(s(ie),2);N(na,1,()=>(e(g),l(()=>M(e(g).conclusion))),D,(i,n)=>{var r=Ya(),d=s(r,!0);a(r),u(()=>c(d,e(n))),_(i,r)}),a(ie);var ce=v(ie,2),ra=v(s(ce),2);N(ra,1,()=>(e(g),l(()=>M(e(g).why_it_matters))),D,(i,n)=>{var r=Fa(),d=s(r,!0);a(r),u(()=>c(d,e(n))),_(i,r)}),a(ce);var $e=v(ce,2);{var la=i=>{var n=Ua(),r=v(s(n),2);N(r,5,()=>(e(g),l(()=>e(g).evidence)),D,(d,y)=>{var x=Qa(),h=s(x),I=s(h,!0);a(h);var k=v(h,2);N(k,1,()=>(e(y),l(()=>M(e(y).fact))),D,(j,R)=>{var B=Ka(),T=s(B,!0);a(B),u(()=>c(T,e(R))),_(j,B)}),a(x),u(()=>c(I,(e(y),l(()=>e(y).source)))),_(d,x)}),a(r),a(n),_(i,n)};b($e,i=>{e(g),l(()=>e(g).evidence?.length>0)&&i(la)})}var oe=v($e,2),va=v(s(oe),2);N(va,1,()=>(e(g),l(()=>M(e(g).counter_scenario))),D,(i,n)=>{var r=Wa(),d=s(r,!0);a(r),u(()=>c(d,e(n))),_(i,r)}),a(oe);var pe=v(oe,2),Le=v(s(pe),2),_e=s(Le),Ae=s(_e),ia=s(Ae,!0);a(Ae),wa(2),a(_e);var ge=v(_e,2),ca=s(ge);a(ge);var oa=v(ge,2);N(oa,1,()=>(e(g),l(()=>M(e(g).impact?.reason))),D,(i,n)=>{var r=Xa(),d=s(r,!0);a(r),u(()=>c(d,e(n))),_(i,r)}),a(Le),a(pe);var de=v(pe,2),pa=v(s(de),2);N(pa,1,()=>(e(g),l(()=>M(e(g).action_guide))),D,(i,n)=>{var r=Za(),d=s(r,!0);a(r),u(()=>c(d,e(n))),_(i,r)}),a(de);var _a=v(de,2);{var ga=i=>{var n=as(),r=s(n),d=s(r);a(r);var y=v(r,2);N(y,5,()=>(e(t),l(()=>e(t).articles)),D,(x,h)=>{var I=es(),k=s(I),j=s(k),R=s(j,!0);a(j);var B=v(j,2),T=s(B);a(B),a(k),a(I),u(H=>{z(k,"href",(e(h),l(()=>e(h).link))),c(R,(e(h),l(()=>e(h).title))),c(T,`${e(h),l(()=>e(h).publisher)??""} · ${H??""}`)},[()=>(e(h),l(()=>ze(e(h).publishedAt)))]),_(x,I)}),a(y),a(n),u(()=>c(d,`관련 기사 (${e(t),l(()=>e(t).articles.length)??""})`)),_(i,n)};b(_a,i=>{e(t),l(()=>e(t).articles?.length>0)&&i(ga)})}a(Z),u((i,n,r)=>{z(xe,"href",`${De??""}/`),c(Oe,i),c(Ue,n),c(Xe,r),c(Ze,`${e(t),l(()=>e(t).issueArticleCount)??""}개 기사`),c(ea,`${e(t),l(()=>e(t).issuePublisherCount)??""}개 매체`),c(ia,(e(g),l(()=>e(g).impact?.score??"-"))),Aa(ca,`width: ${e(g),l(()=>(e(g).impact?.score??0)/5*100)??""}%`)},[()=>($(Pe),e(t),l(()=>Pe(e(t).issueGroup))),()=>(e(t),l(()=>Je(e(t)))),()=>($(K),e(t),l(()=>K(e(t).issueLastPublishedAt)))]),_(q,Z)};b(S,q=>{e(t)&&e(g)&&q(X)},!0)}_(A,p)};b(J,A=>{e(U)?A(V):A(L,!1)},!0)}_(o,m)};b(Ve,o=>{e(ye)?o(qe):o(He,!1)})}_(Me,be),ka(),Te()}export{bs as component};
