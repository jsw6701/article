import{f as l,a as n,c as O}from"../chunks/C5g7XBZA.js";import"../chunks/1N9P_ows.js";import{o as ye,a as Me}from"../chunks/DjCfrimd.js";import{p as Ce,a as Te,e as Le,g as e,Y as M,ap as Ie,s as u,c as v,b as t,o as m,f as C,t as A}from"../chunks/V-LZvqf2.js";import{s as g,e as De}from"../chunks/C_y0Aa-3.js";import{i as d}from"../chunks/BSeBmDgX.js";import{e as Se,i as ke}from"../chunks/U3QY9uhu.js";import{h as Ae}from"../chunks/DLPZc01m.js";import{s as Ge}from"../chunks/gBni9Ox-.js";import{b as Be}from"../chunks/DRwuwEXk.js";import{i as Fe}from"../chunks/BhZ1EOWQ.js";import{b as He}from"../chunks/Bs7FA3So.js";import{b as Oe}from"../chunks/BPtt4w3D.js";import{b as Pe,a as Ve}from"../chunks/8QpmlEFl.js";import{i as Ye}from"../chunks/DyZVRJKY.js";import{L as je}from"../chunks/O9gDGDVr.js";var qe=l('<div class="loading svelte-1u0ngwm"><div class="spinner svelte-1u0ngwm"></div></div>'),ze=l('<div class="message-box svelte-1u0ngwm"><p class="svelte-1u0ngwm"> </p> <button class="action-btn svelte-1u0ngwm">다시 시도</button></div>'),Ee=l('<div class="message-box svelte-1u0ngwm"><p class="svelte-1u0ngwm">브리핑 카드가 없습니다</p></div>'),Je=l('<p class="card-highlight svelte-1u0ngwm"> </p>'),Ke=l('<p class="card-desc svelte-1u0ngwm"> </p>'),Ne=l("<span>·</span> <span> </span>",1),Qe=l('<a class="card svelte-1u0ngwm"><div class="card-header svelte-1u0ngwm"><div class="card-meta svelte-1u0ngwm"><span class="card-category svelte-1u0ngwm"> </span> <!></div> <span class="card-time svelte-1u0ngwm"> </span></div> <h2 class="card-title svelte-1u0ngwm"> </h2> <!> <div class="card-footer svelte-1u0ngwm"><span> </span> <!></div></a>'),Re=l('<div class="loading-more svelte-1u0ngwm"><div class="spinner svelte-1u0ngwm"></div></div>'),Ue=l('<p class="end-message svelte-1u0ngwm">모든 브리핑을 불러왔습니다</p>'),We=l('<div class="cards svelte-1u0ngwm"></div> <div class="sentinel svelte-1u0ngwm"><!></div>',1),Xe=l('<div class="page svelte-1u0ngwm"><header class="header svelte-1u0ngwm"><h1 class="title svelte-1u0ngwm">피드</h1> <p class="subtitle svelte-1u0ngwm">모든 브리핑 카드</p></header> <!></div>');function fa(ee,ae){Ce(ae,!1);let w=M([]),P=M(!0),T=M(!1),V=M(null),G=M(!0),Y=0;const U=10;let B=M(),F=null;async function W(a=!1){if(!(e(T)||!a&&!e(G))){a?(m(P,!0),Y=0,m(w,[])):m(T,!0);try{const o=await Oe({limit:U,offset:Y});a?m(w,o.items):m(w,[...e(w),...o.items]),Y+=o.items.length,m(G,o.items.length===U)}catch(o){m(V,o?.message??"불러오기 실패")}finally{m(P,!1),m(T,!1)}}}ye(()=>{const a=Ye.subscribe(async o=>{o&&(await W(!0),F=new IntersectionObserver(L=>{L[0].isIntersecting&&e(G)&&!e(T)&&W()},{rootMargin:"100px"}),e(B)&&F.observe(e(B)),a())});return a}),Me(()=>{F&&F.disconnect()});function se(a){const o=new Date,L=new Date(a),p=Math.floor((o.getTime()-L.getTime())/1e3/60);return p<60?`${p}분 전`:p<1440?`${Math.floor(p/60)}시간 전`:`${Math.floor(p/1440)}일 전`}function re(a){return a.headline||a.issueTitle}Fe();var j=Xe();Ae("1u0ngwm",a=>{Le(()=>{Ie.title="피드 - SHIFT"})});var te=u(v(j),2);{var oe=a=>{var o=qe();n(a,o)},ne=a=>{var o=O(),L=C(o);{var p=h=>{var b=ze(),I=v(b),q=v(I,!0);t(I);var z=u(I,2);t(b),A(()=>g(q,e(V))),De("click",z,()=>location.reload()),n(h,b)},ve=h=>{var b=O(),I=C(b);{var q=x=>{var H=Ee();n(x,H)},z=x=>{var H=We(),E=C(H);Se(E,5,()=>e(w),ke,(c,s)=>{var y=Qe(),D=v(y),_=v(D),S=v(_),ue=v(S,!0);t(S);var me=u(S,2);{var de=r=>{je(r,{get lifecycle(){return e(s).lifecycle},showChange:!0})};d(me,r=>{e(s).lifecycle&&r(de)})}t(_);var X=u(_,2),fe=v(X,!0);t(X),t(D);var K=u(D,2),ge=v(K,!0);t(K);var Z=u(K,2);{var pe=r=>{var i=Je(),f=v(i,!0);t(i),A(()=>g(f,e(s).signalSummary)),n(r,i)},_e=r=>{var i=O(),f=C(i);{var Q=k=>{var R=Ke(),xe=v(R,!0);t(R),A(()=>g(xe,e(s).conclusion)),n(k,R)};d(f,k=>{e(s).conclusion&&k(Q)},!0)}n(r,i)};d(Z,r=>{e(s).signalSummary?r(pe):r(_e,!1)})}var $=u(Z,2),N=v($),we=v(N);t(N);var he=u(N,2);{var be=r=>{var i=Ne(),f=u(C(i),2),Q=v(f);t(f),A(k=>g(Q,`${k??""} 조회`),[()=>Ve(e(s).viewCount)]),n(r,i)};d(he,r=>{e(s).viewCount&&r(be)})}t($),t(y),A((r,i,f)=>{Ge(y,"href",`${He??""}/cards/${e(s).issueId??""}`),g(ue,r),g(fe,i),g(ge,f),g(we,`${e(s).articleCount??""}개 기사`)},[()=>Pe(e(s).issueGroup),()=>se(e(s).issueLastPublishedAt),()=>re(e(s))]),n(c,y)}),t(E);var J=u(E,2),ie=v(J);{var le=c=>{var s=Re();n(c,s)},ce=c=>{var s=O(),y=C(s);{var D=_=>{var S=Ue();n(_,S)};d(y,_=>{e(G)||_(D)},!0)}n(c,s)};d(ie,c=>{e(T)?c(le):c(ce,!1)})}t(J),Be(J,c=>m(B,c),()=>e(B)),n(x,H)};d(I,x=>{e(w).length===0?x(q):x(z,!1)},!0)}n(h,b)};d(L,h=>{e(V)?h(p):h(ve,!1)},!0)}n(a,o)};d(te,a=>{e(P)?a(oe):a(ne,!1)})}t(j),n(ee,j),Te()}export{fa as component};
