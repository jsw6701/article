import{f as o,a as i,c as V,s as d,e as xe}from"../chunks/DeXMNu7C.js";import{i as Me}from"../chunks/one-rmOF.js";import{N as Ce,O as Te,a4 as Le,Q as De,d as e,w as M,T as c,U as n,V as r,R as m,P as k,W as A}from"../chunks/_mKCt0Dg.js";import{i as f}from"../chunks/n77eKvsn.js";import{e as Ie,i as ke}from"../chunks/CfL7-1lS.js";import{i as Ae,l as Ge,s as Oe}from"../chunks/25gMEqND.js";import{b as Pe}from"../chunks/Bkt4WM8X.js";import{b as Se}from"../chunks/kn-GG7-K.js";import{g as Ve,f as Be}from"../chunks/D1mA3LF1.js";import{L as Ne}from"../chunks/CVMTtDmx.js";var Qe=o('<div class="loading svelte-1u0ngwm"><div class="spinner svelte-1u0ngwm"></div></div>'),Re=o('<div class="error svelte-1u0ngwm"><p> </p> <button class="svelte-1u0ngwm">다시 시도</button></div>'),Ue=o('<div class="empty svelte-1u0ngwm"><p>브리핑 카드가 없습니다</p></div>'),We=o('<p class="item-signal svelte-1u0ngwm"> </p>'),je=o('<p class="item-desc svelte-1u0ngwm"> </p>'),qe=o('<span class="item-views svelte-1u0ngwm"> </span>'),ze=o('<a class="item svelte-1u0ngwm"><div class="item-header svelte-1u0ngwm"><div class="item-meta svelte-1u0ngwm"><span class="item-cat svelte-1u0ngwm"> </span> <!></div> <span class="item-time svelte-1u0ngwm"> </span></div> <h2 class="item-title svelte-1u0ngwm"> </h2> <!> <div class="item-footer svelte-1u0ngwm"><span> </span> <!></div></a>'),Ee=o('<div class="loading-more svelte-1u0ngwm"><div class="spinner svelte-1u0ngwm"></div></div>'),Fe=o('<p class="end-message svelte-1u0ngwm">모든 브리핑을 불러왔습니다</p>'),He=o('<div class="list svelte-1u0ngwm"></div> <div class="sentinel svelte-1u0ngwm"><!></div>',1),Je=o('<div class="page svelte-1u0ngwm"><header class="page-header svelte-1u0ngwm"><h1 class="svelte-1u0ngwm">전체 브리핑</h1> <p class="svelte-1u0ngwm">모든 브리핑 카드</p></header> <!></div>');function va(ee,ae){Ce(ae,!1);let w=M([]),B=M(!0),C=M(!1),N=M(null),G=M(!0),Q=0;const K=10;let O=M(),P=null;async function X(a=!1){if(!(e(C)||!a&&!e(G))){a?(m(B,!0),Q=0,m(w,[])):m(C,!0);try{const v=await Ge({limit:K,offset:Q});a?m(w,v.items):m(w,[...e(w),...v.items]),Q+=v.items.length,m(G,v.items.length===K)}catch(v){m(N,v?.message??"불러오기 실패")}finally{m(B,!1),m(C,!1)}}}Te(()=>{const a=Ae.subscribe(async v=>{v&&(await X(!0),P=new IntersectionObserver(T=>{T[0].isIntersecting&&e(G)&&!e(C)&&X()},{rootMargin:"100px"}),e(O)&&P.observe(e(O)),a())});return a}),Le(()=>{P&&P.disconnect()});function se(a){const v=new Date,T=new Date(a),g=Math.floor((v.getTime()-T.getTime())/1e3/60);return g<60?`${g}분 전`:g<1440?`${Math.floor(g/60)}시간 전`:`${Math.floor(g/1440)}일 전`}function te(a){return a.headline||a.issueTitle}Me();var R=Je(),re=c(n(R),2);{var ve=a=>{var v=Qe();i(a,v)},ie=a=>{var v=V(),T=k(v);{var g=h=>{var b=Re(),L=n(b),U=n(L,!0);r(L);var W=c(L,2);r(b),A(()=>d(U,e(N))),xe("click",W,()=>location.reload()),i(h,b)},ne=h=>{var b=V(),L=k(b);{var U=y=>{var S=Ue();i(y,S)},W=y=>{var S=He(),j=k(S);Ie(j,5,()=>e(w),ke,(u,s)=>{var x=ze(),D=n(x),p=n(D),I=n(p),me=n(I,!0);r(I);var ce=c(I,2);{var fe=t=>{Ne(t,{get lifecycle(){return e(s).lifecycle},showChange:!0})};f(ce,t=>{e(s).lifecycle&&t(fe)})}r(p);var Y=c(p,2),de=n(Y,!0);r(Y),r(D);var z=c(D,2),ge=n(z,!0);r(z);var Z=c(z,2);{var pe=t=>{var l=We(),_=n(l,!0);r(l),A(()=>d(_,e(s).signalSummary)),i(t,l)},_e=t=>{var l=V(),_=k(l);{var F=H=>{var J=je(),ye=n(J,!0);r(J),A(()=>d(ye,e(s).conclusion)),i(H,J)};f(_,H=>{e(s).conclusion&&H(F)},!0)}i(t,l)};f(Z,t=>{e(s).signalSummary?t(pe):t(_e,!1)})}var $=c(Z,2),E=n($),we=n(E);r(E);var he=c(E,2);{var be=t=>{var l=qe(),_=n(l);r(l),A(F=>d(_,`${F??""} 조회`),[()=>Be(e(s).viewCount)]),i(t,l)};f(he,t=>{e(s).viewCount&&t(be)})}r($),r(x),A((t,l,_)=>{Oe(x,"href",`${Se??""}/cards/${e(s).issueId??""}`),d(me,t),d(de,l),d(ge,_),d(we,`${e(s).articleCount??""}개 기사`)},[()=>Ve(e(s).issueGroup),()=>se(e(s).issueLastPublishedAt),()=>te(e(s))]),i(u,x)}),r(j);var q=c(j,2),le=n(q);{var oe=u=>{var s=Ee();i(u,s)},ue=u=>{var s=V(),x=k(s);{var D=p=>{var I=Fe();i(p,I)};f(x,p=>{e(G)||p(D)},!0)}i(u,s)};f(le,u=>{e(C)?u(oe):u(ue,!1)})}r(q),Pe(q,u=>m(O,u),()=>e(O)),i(y,S)};f(L,y=>{e(w).length===0?y(U):y(W,!1)},!0)}i(h,b)};f(T,h=>{e(N)?h(g):h(ne,!1)},!0)}i(a,v)};f(re,a=>{e(B)?a(ve):a(ie,!1)})}r(R),i(ee,R),De()}export{va as component};
