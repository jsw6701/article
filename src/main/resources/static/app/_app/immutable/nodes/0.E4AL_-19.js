import{f as X,a as r,b as k,c as y}from"../chunks/C5g7XBZA.js";import"../chunks/1N9P_ows.js";import{o as ya,g as Q}from"../chunks/DjCfrimd.js";import{h as xa,H as qa,p as Pa,aq as Y,ar as Ma,a as Ca,o as D,Y as R,g as a,c as x,b,s as T,u as l,t as Aa,f as q}from"../chunks/V-LZvqf2.js";import{s as $a}from"../chunks/C_y0Aa-3.js";import{i as w}from"../chunks/BSeBmDgX.js";import{e as Ba}from"../chunks/U3QY9uhu.js";import{s as La}from"../chunks/gBni9Ox-.js";import{s as Va}from"../chunks/35QTP2O1.js";import{i as za}from"../chunks/BhZ1EOWQ.js";import{s as Ha,a as F}from"../chunks/BJpLCdRy.js";import{b as c}from"../chunks/Bs7FA3So.js";import{s as Ia,g as H}from"../chunks/CCZINJK3.js";import{b as I,i as U,a as ja}from"../chunks/DyZVRJKY.js";import{s as Ea,c as Sa}from"../chunks/AWvmR92A.js";/* empty css                */function Wa(o,d,u,h,j){xa&&qa();var n=d.$$slots?.[u],P=!1;n===!0&&(n=d.children,P=!0),n===void 0||n(o,P?()=>h:h)}const Ya=()=>{const o=Ia;return{page:{subscribe:o.page.subscribe},navigating:{subscribe:o.navigating.subscribe},updated:o.updated}},Da={subscribe(o){return Ya().page.subscribe(o)}};var Ra=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1h-5v-6a1 1 0 00-1-1h-4a1 1 0 00-1 1v6H4a1 1 0 01-1-1V9.5z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"></path></svg>'),Fa=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="1.8"></rect><path d="M8 8h8M8 12h8M8 16h5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></path></svg>'),Ga=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><path d="M3 17l6-6 4 4 8-8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17 7h4v4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),Ja=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><path d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-4-7 4V5z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"></path></svg>'),Ka=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="1.8"></circle><path d="M4 20c0-4 4-6 8-6s8 2 8 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></path></svg>'),Na=k('<svg viewBox="0 0 24 24" fill="none" class="svelte-12qhfyh"><path d="M12 15a3 3 0 100-6 3 3 0 000 6z" stroke="currentColor" stroke-width="1.8"></path><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 112.83-2.83l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 114 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 112.83 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" stroke="currentColor" stroke-width="1.8"></path></svg>'),Oa=X('<a><div class="tab-icon svelte-12qhfyh"><!></div> <span class="tab-label svelte-12qhfyh"> </span></a>'),Qa=X('<div class="app svelte-12qhfyh"><main class="main svelte-12qhfyh"><!></main> <nav class="tab-bar svelte-12qhfyh"></nav></div>');function fe(o,d){Pa(d,!1);const u=()=>F(U,"$isLoggedIn",n),h=()=>F(Da,"$page",n),j=()=>F(ja,"$isAdmin",n),[n,P]=Ha(),M=R(),G=R(),J=["/login","/signup","/privacy","/terms","/forgot-password","/find-username"];let C=R(!1),K=!1;const Z={home:"/",feed:"/today",trending:"/trending"};ya(async()=>{I.init(),await Ea.init(),D(C,!0);const t=window.location.pathname.replace(c,"")||"/",e=J.some(v=>t.startsWith(v));if(Q(U)){if(!await I.refresh()&&!e){I.clear(),H(`${c}/login`);return}if(t==="/"&&!K){const f=Q(Sa),A=Z[f]||"/";A!=="/"&&(K=!0,H(`${c}${A}`,{replaceState:!0}))}}const s=()=>{I.clear(),H(`${c}/login`)};return window.addEventListener("auth:expired",s),()=>window.removeEventListener("auth:expired",s)});function aa(t,e){if(!a(C))return;const s=e.replace(c,"")||"/",v=J.some(f=>s.startsWith(f));!t&&!v&&H(`${c}/login`)}function ea(t){return t==="/"?a(M)==="/"||a(M)===c+"/":a(M).includes(t)}const ta=[{path:"/",label:"홈",icon:"home",show:"always"},{path:"/today",label:"피드",icon:"feed",show:"always"},{path:"/trending",label:"트렌드",icon:"trend",show:"always"},{path:"/bookmarks",label:"저장",icon:"bookmark",show:"logged-in"},{path:"/mypage",label:"MY",icon:"user",show:"logged-in"},{path:"/admin",label:"관리",icon:"admin",show:"admin"}];Y(()=>(a(C),u(),h()),()=>{a(C)&&aa(u(),h().url.pathname)}),Y(()=>h(),()=>{D(M,h().url.pathname)}),Y(()=>(u(),j()),()=>{D(G,ta.filter(t=>t.show==="always"?!0:t.show==="logged-in"?u():t.show==="admin"?j():!1))}),Ma(),za();var E=Qa(),S=x(E),ra=x(S);Wa(ra,d,"default",{}),b(S);var N=T(S,2);Ba(N,5,()=>a(G),t=>t.path,(t,e)=>{var s=Oa();let v;var f=x(s),A=x(f);{var sa=i=>{var $=Ra();r(i,$)},oa=i=>{var $=y(),ia=q($);{var la=p=>{var B=Fa();r(p,B)},ca=p=>{var B=y(),ha=q(B);{var va=g=>{var L=Ga();r(g,L)},fa=g=>{var L=y(),da=q(L);{var ua=m=>{var V=Ja();r(m,V)},pa=m=>{var V=y(),ga=q(V);{var ma=_=>{var z=Ka();r(_,z)},_a=_=>{var z=y(),ba=q(z);{var wa=W=>{var ka=Na();r(W,ka)};w(ba,W=>{a(e),l(()=>a(e).icon==="admin")&&W(wa)},!0)}r(_,z)};w(ga,_=>{a(e),l(()=>a(e).icon==="user")?_(ma):_(_a,!1)},!0)}r(m,V)};w(da,m=>{a(e),l(()=>a(e).icon==="bookmark")?m(ua):m(pa,!1)},!0)}r(g,L)};w(ha,g=>{a(e),l(()=>a(e).icon==="trend")?g(va):g(fa,!1)},!0)}r(p,B)};w(ia,p=>{a(e),l(()=>a(e).icon==="feed")?p(la):p(ca,!1)},!0)}r(i,$)};w(A,i=>{a(e),l(()=>a(e).icon==="home")?i(sa):i(oa,!1)})}b(f);var O=T(f,2),na=x(O,!0);b(O),b(s),Aa(i=>{v=Va(s,1,"tab-item svelte-12qhfyh",null,v,i),La(s,"href",`${c??""}${a(e),l(()=>a(e).path==="/"?"/":a(e).path)??""}`),$a(na,(a(e),l(()=>a(e).label)))},[()=>({active:ea(a(e).path)})]),r(t,s)}),b(N),b(E),r(o,E),Ca(),P()}export{fe as component};
