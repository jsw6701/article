import{f as E,e as J,a as u,s as X,b as ee}from"../chunks/JBNUid9-.js";import{i as ue}from"../chunks/D--sC15e.js";import{h as ge,a as me,aF as pe,K as qe,L as Z,T as $,U as be,S,N as xe,O as q,q as b,d as l,Q as r,P as i,R as o,M as _e,Y as we}from"../chunks/DExS8c7-.js";import{i as V}from"../chunks/CziFgNj8.js";import{c as F,s as g,i as ke,n as $e}from"../chunks/D4c94o38.js";import{s as I}from"../chunks/D4DO-hTu.js";import{s as Se,a as L}from"../chunks/BWMsIlHo.js";import{b as h}from"../chunks/B0N0VACA.js";import{s as Ie,g as H}from"../chunks/CS_G86ak.js";import{S as Le}from"../chunks/DAus8HYY.js";function Ee(a,y,f,c,m){ge&&me();var v=y.$$slots?.[f],s=!1;v===!0&&(v=y.children,s=!0),v===void 0||v(a,s?()=>c:c)}const Ae=()=>{const a=Ie;return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},updated:a.updated}},Be={subscribe(a){return Ae().page.subscribe(a)}};function Ce(){const a="dark",f=localStorage.getItem("theme")||a,{subscribe:c,set:m,update:v}=pe(f);return{subscribe:c,set:s=>{localStorage.setItem("theme",s),document.documentElement.setAttribute("data-theme",s),m(s)},toggle:()=>{v(s=>{const d=s==="dark"?"light":"dark";return localStorage.setItem("theme",d),document.documentElement.setAttribute("data-theme",d),d})},init:()=>{{const d=localStorage.getItem("theme")||a;document.documentElement.setAttribute("data-theme",d),m(d)}}}}const K=Ce();var Me=ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><circle cx="12" cy="12" r="5" class="svelte-12qhfyh"></circle><line x1="12" y1="1" x2="12" y2="3" class="svelte-12qhfyh"></line><line x1="12" y1="21" x2="12" y2="23" class="svelte-12qhfyh"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="svelte-12qhfyh"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="svelte-12qhfyh"></line><line x1="1" y1="12" x2="3" y2="12" class="svelte-12qhfyh"></line><line x1="21" y1="12" x2="23" y2="12" class="svelte-12qhfyh"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="svelte-12qhfyh"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="svelte-12qhfyh"></line></svg>'),ze=ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" class="svelte-12qhfyh"></path></svg>'),Pe=E('<span class="user-name svelte-12qhfyh"> </span> <button class="logout-btn svelte-12qhfyh">logout</button>',1),Te=E('<a class="login-btn svelte-12qhfyh">login</a>'),Ue=E('<a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" class="svelte-12qhfyh"></path></svg></div> <span class="nav-label svelte-12qhfyh">Saved</span></a>'),De=E('<div class="app svelte-12qhfyh"><header class="status-bar svelte-12qhfyh"><div class="status-left svelte-12qhfyh"><span class="live-dot svelte-12qhfyh"></span> <span class="live-text svelte-12qhfyh">LIVE</span> <span class="time svelte-12qhfyh"> </span></div> <a class="status-center svelte-12qhfyh"><!></a> <div class="status-right svelte-12qhfyh"><button class="theme-btn svelte-12qhfyh" aria-label="테마 전환"><!></button> <!></div></header> <main class="main svelte-12qhfyh"><!></main> <nav class="bottom-nav svelte-12qhfyh"><a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><rect x="3" y="3" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="14" y="3" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="3" y="14" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="14" y="14" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect></svg></div> <span class="nav-label svelte-12qhfyh">Dashboard</span></a> <a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" class="svelte-12qhfyh"></path><polyline points="14,2 14,8 20,8" class="svelte-12qhfyh"></polyline><line x1="16" y1="13" x2="8" y2="13" class="svelte-12qhfyh"></line><line x1="16" y1="17" x2="8" y2="17" class="svelte-12qhfyh"></line><line x1="10" y1="9" x2="8" y2="9" class="svelte-12qhfyh"></line></svg></div> <span class="nav-label svelte-12qhfyh">Feed</span></a> <a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><polyline points="23,6 13.5,15.5 8.5,10.5 1,18" class="svelte-12qhfyh"></polyline><polyline points="17,6 23,6 23,12" class="svelte-12qhfyh"></polyline></svg></div> <span class="nav-label svelte-12qhfyh">Trending</span></a> <!></nav></div>');function je(a,y){qe(y,!1);const f=()=>L(Be,"$page",s),c=()=>L(ke,"$isLoggedIn",s),m=()=>L(K,"$theme",s),v=()=>L($e,"$currentUser",s),[s,d]=Se(),x=b(),N=b(),O=b(),te=["/login","/signup"];let A=b(!1);Z(()=>{F.init(),K.init(),q(A,!0);const e=()=>{F.clear(),H(`${h}/login`)};return window.addEventListener("auth:expired",e),()=>window.removeEventListener("auth:expired",e)});async function se(){await F.logout()}function _(e){return e==="/"?l(x)==="/"||l(x)===h+"/":l(x).includes(e)}let p=b(new Date);Z(()=>{const e=setInterval(()=>{q(p,new Date)},1e3);return()=>clearInterval(e)}),$(()=>(l(A),f(),c(),H),()=>{if(l(A)&&typeof window<"u"){const e=f().url.pathname.replace(h,"")||"/",t=te.some(n=>e.startsWith(n));!c()&&!t&&H(`${h}/login`)}}),$(()=>f(),()=>{q(x,f().url.pathname)}),$(()=>l(p),()=>{q(N,l(p).getHours().toString().padStart(2,"0"))}),$(()=>l(p),()=>{q(O,l(p).getMinutes().toString().padStart(2,"0"))}),be(),ue();var B=De(),C=r(B),M=r(C),Q=i(r(M),4),ae=r(Q);o(Q),o(M);var w=i(M,2),le=r(w);Le(le,{size:"sm"}),o(w);var R=i(w,2),k=r(R),ne=r(k);{var re=e=>{var t=Me();u(e,t)},ie=e=>{var t=ze();u(e,t)};V(ne,e=>{m()==="dark"?e(re):e(ie,!1)})}o(k);var oe=i(k,2);{var he=e=>{var t=Pe(),n=_e(t),D=r(n,!0);o(n);var ye=i(n,2);S(()=>X(D,(v(),we(()=>v()?.username)))),J("click",ye,se),u(e,t)},ce=e=>{var t=Te();S(()=>g(t,"href",`${h??""}/login`)),u(e,t)};V(oe,e=>{c()?e(he):e(ce,!1)})}o(R),o(C);var z=i(C,2),ve=r(z);Ee(ve,y,"default",{}),o(z);var W=i(z,2),P=r(W);let Y;var T=i(P,2);let j;var U=i(T,2);let G;var fe=i(U,2);{var de=e=>{var t=Ue();let n;S(D=>{n=I(t,1,"nav-item svelte-12qhfyh",null,n,D),g(t,"href",`${h??""}/bookmarks`)},[()=>({active:_("/bookmarks")})]),u(e,t)};V(fe,e=>{c()&&e(de)})}o(W),o(B),S((e,t,n)=>{X(ae,`${l(N)??""}:${l(O)??""}`),g(w,"href",`${h??""}/`),Y=I(P,1,"nav-item svelte-12qhfyh",null,Y,e),g(P,"href",`${h??""}/`),j=I(T,1,"nav-item svelte-12qhfyh",null,j,t),g(T,"href",`${h??""}/today`),G=I(U,1,"nav-item svelte-12qhfyh",null,G,n),g(U,"href",`${h??""}/trending`)},[()=>({active:_("/")}),()=>({active:_("/today")}),()=>({active:_("/trending")})]),J("click",k,()=>K.toggle()),u(a,B),xe(),d()}export{je as component};
