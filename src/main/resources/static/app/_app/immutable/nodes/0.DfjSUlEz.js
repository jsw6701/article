import{f as S,e as X,a as u,s as Y,b as se}from"../chunks/DeXMNu7C.js";import{i as pe}from"../chunks/one-rmOF.js";import{h as qe,a as be,aG as xe,N as _e,O as ee,Z as B,_ as we,W as x,Q as ke,R as _,w,d as r,U as h,T as i,V as v,P as $e,u as Se}from"../chunks/_mKCt0Dg.js";import{i as C}from"../chunks/n77eKvsn.js";import{p as D,s as m,i as Ae,b as Ie,t as Le}from"../chunks/25gMEqND.js";import{s as k}from"../chunks/DKK5T5rF.js";import{s as Be,a as $}from"../chunks/DDnpUyjA.js";import{b as o}from"../chunks/kn-GG7-K.js";import{s as Ce,g as W}from"../chunks/BapkDQCs.js";import{S as Ee}from"../chunks/CsIKBILP.js";function Ve(a,y,d,c,g){qe&&be();var f=y.$$slots?.[d],n=!1;f===!0&&(f=y.children,n=!0),f===void 0||f(a,n?()=>c:c)}const ze=()=>{const a=Ce;return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},updated:a.updated}},Me={subscribe(a){return ze().page.subscribe(a)}};function He(){const a="dark",d=localStorage.getItem("theme")||a,{subscribe:c,set:g,update:f}=xe(d);return{subscribe:c,set:n=>{localStorage.setItem("theme",n),document.documentElement.setAttribute("data-theme",n),g(n)},toggle:()=>{f(n=>{const l=n==="dark"?"light":"dark";return localStorage.setItem("theme",l),document.documentElement.setAttribute("data-theme",l),l})},init:()=>{{const l=localStorage.getItem("theme")||a;document.documentElement.setAttribute("data-theme",l),g(l)}}}}const F=He();var Pe=se('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><circle cx="12" cy="12" r="5" class="svelte-12qhfyh"></circle><line x1="12" y1="1" x2="12" y2="3" class="svelte-12qhfyh"></line><line x1="12" y1="21" x2="12" y2="23" class="svelte-12qhfyh"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="svelte-12qhfyh"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="svelte-12qhfyh"></line><line x1="1" y1="12" x2="3" y2="12" class="svelte-12qhfyh"></line><line x1="21" y1="12" x2="23" y2="12" class="svelte-12qhfyh"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="svelte-12qhfyh"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="svelte-12qhfyh"></line></svg>'),Te=se('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" class="svelte-12qhfyh"></path></svg>'),Ue=S('<span class="user-name svelte-12qhfyh"> </span> <button class="logout-btn svelte-12qhfyh">logout</button>',1),De=S('<a class="login-btn svelte-12qhfyh">login</a>'),We=S('<a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" class="svelte-12qhfyh"></path></svg></div> <span class="nav-label svelte-12qhfyh">Saved</span></a>'),Fe=S('<a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><circle cx="12" cy="12" r="3" class="svelte-12qhfyh"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-12qhfyh"></path></svg></div> <span class="nav-label svelte-12qhfyh">Admin</span></a>'),Ge=S('<div class="app svelte-12qhfyh"><header class="status-bar svelte-12qhfyh"><div class="status-left svelte-12qhfyh"><span class="live-dot svelte-12qhfyh"></span> <span class="live-text svelte-12qhfyh">LIVE</span> <span class="time svelte-12qhfyh"> </span></div> <a class="status-center svelte-12qhfyh"><!></a> <div class="status-right svelte-12qhfyh"><button class="theme-btn svelte-12qhfyh" aria-label="테마 전환"><!></button> <!></div></header> <main class="main svelte-12qhfyh"><!></main> <nav class="bottom-nav svelte-12qhfyh"><a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><rect x="3" y="3" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="14" y="3" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="3" y="14" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect><rect x="14" y="14" width="7" height="7" rx="1" class="svelte-12qhfyh"></rect></svg></div> <span class="nav-label svelte-12qhfyh">Dashboard</span></a> <a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" class="svelte-12qhfyh"></path><polyline points="14,2 14,8 20,8" class="svelte-12qhfyh"></polyline><line x1="16" y1="13" x2="8" y2="13" class="svelte-12qhfyh"></line><line x1="16" y1="17" x2="8" y2="17" class="svelte-12qhfyh"></line><line x1="10" y1="9" x2="8" y2="9" class="svelte-12qhfyh"></line></svg></div> <span class="nav-label svelte-12qhfyh">Feed</span></a> <a><div class="nav-icon svelte-12qhfyh"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12qhfyh"><polyline points="23,6 13.5,15.5 8.5,10.5 1,18" class="svelte-12qhfyh"></polyline><polyline points="17,6 23,6 23,12" class="svelte-12qhfyh"></polyline></svg></div> <span class="nav-label svelte-12qhfyh">Trending</span></a> <!> <!></nav></div>');function es(a,y){_e(y,!1);const d=()=>$(Me,"$page",l),c=()=>$(Ae,"$isLoggedIn",l),g=()=>$(F,"$theme",l),f=()=>$(Le,"$currentUser",l),n=()=>$(Ie,"$isAdmin",l),[l,te]=Be(),A=w(),G=w(),N=w(),ae=["/login","/signup"];let E=w(!1);ee(()=>{D.init(),F.init(),_(E,!0);const e=()=>{D.clear(),W(`${o}/login`)};return window.addEventListener("auth:expired",e),()=>window.removeEventListener("auth:expired",e)});async function le(){await D.logout()}function p(e){return e==="/"?r(A)==="/"||r(A)===o+"/":r(A).includes(e)}let q=w(new Date);ee(()=>{const e=setInterval(()=>{_(q,new Date)},1e3);return()=>clearInterval(e)}),B(()=>(r(E),d(),c(),W),()=>{if(r(E)&&typeof window<"u"){const e=d().url.pathname.replace(o,"")||"/",s=ae.some(t=>e.startsWith(t));!c()&&!s&&W(`${o}/login`)}}),B(()=>d(),()=>{_(A,d().url.pathname)}),B(()=>r(q),()=>{_(G,r(q).getHours().toString().padStart(2,"0"))}),B(()=>r(q),()=>{_(N,r(q).getMinutes().toString().padStart(2,"0"))}),we(),pe();var V=Ge(),z=h(V),M=h(z),O=i(h(M),4),ne=h(O);v(O),v(M);var I=i(M,2),re=h(I);Ee(re,{size:"sm"}),v(I);var Q=i(I,2),L=h(Q),ie=h(L);{var oe=e=>{var s=Pe();u(e,s)},he=e=>{var s=Te();u(e,s)};C(ie,e=>{g()==="dark"?e(oe):e(he,!1)})}v(L);var ve=i(L,2);{var ce=e=>{var s=Ue(),t=$e(s),b=h(t,!0);v(t);var ge=i(t,2);x(()=>Y(b,(f(),Se(()=>f()?.username)))),X("click",ge,le),u(e,s)},fe=e=>{var s=De();x(()=>m(s,"href",`${o??""}/login`)),u(e,s)};C(ve,e=>{c()?e(ce):e(fe,!1)})}v(Q),v(z);var H=i(z,2),de=h(H);Ve(de,y,"default",{}),v(H);var R=i(H,2),P=h(R);let Z;var T=i(P,2);let j;var U=i(T,2);let J;var K=i(U,2);{var ye=e=>{var s=We();let t;x(b=>{t=k(s,1,"nav-item svelte-12qhfyh",null,t,b),m(s,"href",`${o??""}/bookmarks`)},[()=>({active:p("/bookmarks")})]),u(e,s)};C(K,e=>{c()&&e(ye)})}var ue=i(K,2);{var me=e=>{var s=Fe();let t;x(b=>{t=k(s,1,"nav-item svelte-12qhfyh",null,t,b),m(s,"href",`${o??""}/admin`)},[()=>({active:p("/admin")})]),u(e,s)};C(ue,e=>{n()&&e(me)})}v(R),v(V),x((e,s,t)=>{Y(ne,`${r(G)??""}:${r(N)??""}`),m(I,"href",`${o??""}/`),Z=k(P,1,"nav-item svelte-12qhfyh",null,Z,e),m(P,"href",`${o??""}/`),j=k(T,1,"nav-item svelte-12qhfyh",null,j,s),m(T,"href",`${o??""}/today`),J=k(U,1,"nav-item svelte-12qhfyh",null,J,t),m(U,"href",`${o??""}/trending`)},[()=>({active:p("/")}),()=>({active:p("/today")}),()=>({active:p("/trending")})]),X("click",L,()=>F.toggle()),u(a,V),ke(),te()}export{es as component};
