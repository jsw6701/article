import{c as pe,a as _,f as u,s as i,e as $a}from"../chunks/DeXMNu7C.js";import{i as Ca}from"../chunks/one-rmOF.js";import{N as La,O as Ia,P as O,Q as Ba,R as w,w as N,d as e,U as s,V as a,T as r,W as m,u as n,X as Aa,Y as $,f as Da}from"../chunks/_mKCt0Dg.js";import{i as f}from"../chunks/n77eKvsn.js";import{e as De,i as Ne}from"../chunks/CfL7-1lS.js";import{m as Na,n as Sa,i as Ta,s as S,r as Ma,o as Pa}from"../chunks/25gMEqND.js";import{s as Va}from"../chunks/DKK5T5rF.js";import{s as ja}from"../chunks/BtAqC_qU.js";import{p as za,s as Ga,a as Ja}from"../chunks/DDnpUyjA.js";import{b as Se}from"../chunks/kn-GG7-K.js";import{g as Te,a as R,f as Me,b as Pe,c as Ve}from"../chunks/D1mA3LF1.js";import{L as Oa}from"../chunks/CVMTtDmx.js";var Ra=u('<div class="loading svelte-n723gn"><div class="spinner svelte-n723gn"></div></div>'),qa=u('<div class="error svelte-n723gn"><p> </p> <a class="svelte-n723gn">홈으로 돌아가기</a></div>'),Qa=u('<button><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-n723gn"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></button>'),Ua=u('<p class="signal svelte-n723gn"> </p>'),Wa=u("<span>·</span> <span> </span>",1),Xa=u('<div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">정점 도달</span> <span class="stat-value svelte-n723gn"> </span></div>'),Ya=u('<div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">정점 기사 수</span> <span class="stat-value svelte-n723gn"> </span></div>'),Ea=u('<section class="section lifecycle-section svelte-n723gn"><h2 class="svelte-n723gn">이슈 생애주기</h2> <div class="lifecycle-content svelte-n723gn"><div class="lifecycle-stage svelte-n723gn"><span class="lifecycle-emoji svelte-n723gn"> </span> <div class="lifecycle-info svelte-n723gn"><span class="lifecycle-label svelte-n723gn"> </span> <span class="lifecycle-desc svelte-n723gn"> </span></div></div> <div class="lifecycle-stats svelte-n723gn"><div class="lifecycle-stat svelte-n723gn"><span class="stat-value svelte-n723gn"> </span></div> <!> <div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">현재 기사 수</span> <span class="stat-value svelte-n723gn"> </span></div> <!></div></div></section>'),Fa=u('<li class="svelte-n723gn"><span class="ev-source svelte-n723gn"> </span> <span class="ev-fact svelte-n723gn"> </span></li>'),Ha=u('<section class="section svelte-n723gn"><h2 class="svelte-n723gn">근거</h2> <ul class="evidence svelte-n723gn"></ul></section>'),Ka=u('<li class="svelte-n723gn"><a target="_blank" rel="noopener noreferrer" class="svelte-n723gn"><span class="art-title svelte-n723gn"> </span> <span class="art-meta svelte-n723gn"> </span></a></li>'),Za=u('<section class="section svelte-n723gn"><h2 class="svelte-n723gn"> </h2> <ul class="articles svelte-n723gn"></ul></section>'),es=u('<article class="article svelte-n723gn"><a class="back svelte-n723gn">← 뒤로</a> <header class="header svelte-n723gn"><div class="header-top svelte-n723gn"><div class="header-left svelte-n723gn"><span class="cat svelte-n723gn"> </span> <!></div> <!></div> <h1 class="title svelte-n723gn"> </h1> <!> <div class="meta svelte-n723gn"><span> </span> <span>·</span> <span> </span> <span>·</span> <span> </span> <!></div></header> <!> <section class="section highlight svelte-n723gn"><h2 class="svelte-n723gn">핵심 요약</h2> <p class="lead svelte-n723gn"> </p></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">왜 중요한가</h2> <p class="svelte-n723gn"> </p></section> <!> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">반대 시나리오</h2> <p class="svelte-n723gn"> </p></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">영향도</h2> <div class="impact svelte-n723gn"><div class="impact-score svelte-n723gn"><span class="score-num svelte-n723gn"> </span> <span class="score-max svelte-n723gn">/5</span></div> <div class="impact-bar svelte-n723gn"><div class="impact-fill svelte-n723gn"></div></div> <p class="impact-reason svelte-n723gn"> </p></div></section> <section class="section action svelte-n723gn"><h2 class="svelte-n723gn">행동 가이드</h2> <p class="svelte-n723gn"> </p></section> <!></article>');function gs(je,_e){La(_e,!1);const q=()=>Ja(Ta,"$isLoggedIn",ze),[ze,Ge]=Ga();let j=za(_e,"params",8),t=N(null),o=N(null),ge=N(!0),Q=N(null),L=N(!1),U=N(!1);Ia(async()=>{try{w(t,await Na(Number(j().issueId)));const p=e(t).cardJson;if(w(o,typeof p=="string"?JSON.parse(p):p),q())try{const b=await Sa(Number(j().issueId));w(L,b.bookmarked)}catch{}}catch(p){w(Q,p?.message??"불러오기 실패")}finally{w(ge,!1)}});async function Je(){if(q()){w(U,!0);try{e(L)?(await Ma(Number(j().issueId)),w(L,!1)):(await Pa(Number(j().issueId)),w(L,!0))}catch(p){console.error("북마크 처리 실패:",p)}finally{w(U,!1)}}}function Oe(p){const b=new Date(p);return`${b.getMonth()+1}월 ${b.getDate()}일`}function Re(p){return p.headline||p.issueTitle}Ca();var de=pe(),qe=O(de);{var Qe=p=>{var b=Ra();_(p,b)},Ue=p=>{var b=pe(),We=O(b);{var Xe=A=>{var D=qa(),T=s(D),W=s(T,!0);a(T);var M=r(T,2);a(D),m(()=>{i(W,e(Q)),S(M,"href",`${Se??""}/`)}),_(A,D)},Ye=A=>{var D=pe(),T=O(D);{var W=M=>{var X=es(),ue=s(X),Y=r(ue,2),E=s(Y),F=s(E),H=s(F),Ee=s(H,!0);a(H);var Fe=r(H,2);{var He=v=>{Oa(v,{get lifecycle(){return e(t),n(()=>e(t).lifecycle)},size:"medium"})};f(Fe,v=>{e(t),n(()=>e(t).lifecycle)&&v(He)})}a(F);var Ke=r(F,2);{var Ze=v=>{var l=Qa();let c;var h=s(l);a(l),m(()=>{c=Va(l,1,"bookmark-btn svelte-n723gn",null,c,{active:e(L)}),l.disabled=e(U),S(l,"aria-label",e(L)?"북마크 해제":"북마크 추가"),S(h,"fill",e(L)?"currentColor":"none")}),$a("click",l,Je),_(v,l)};f(Ke,v=>{q()&&v(Ze)})}a(E);var K=r(E,2),ea=s(K,!0);a(K);var fe=r(K,2);{var aa=v=>{var l=Ua(),c=s(l,!0);a(l),m(()=>i(c,(e(t),n(()=>e(t).signalSummary)))),_(v,l)};f(fe,v=>{e(t),n(()=>e(t).signalSummary)&&v(aa)})}var me=r(fe,2),Z=s(me),sa=s(Z,!0);a(Z);var ee=r(Z,4),ta=s(ee);a(ee);var ae=r(ee,4),na=s(ae);a(ae);var ra=r(ae,2);{var la=v=>{var l=Wa(),c=r(O(l),2),h=s(c);a(c),m(d=>i(h,`${d??""} 조회`),[()=>($(Me),e(t),n(()=>Me(e(t).viewCount)))]),_(v,l)};f(ra,v=>{e(t),n(()=>e(t).viewCount)&&v(la)})}a(me),a(Y);var he=r(Y,2);{var va=v=>{const l=Da(()=>($(Ve),e(t),n(()=>Ve(e(t).lifecycle.stage))));var c=Ea(),h=r(s(c),2),d=s(h),x=s(d),g=s(x,!0);a(x);var C=r(x,2),y=s(C),I=s(y,!0);a(y);var z=r(y,2),G=s(z,!0);a(z),a(C),a(d);var J=r(d,2),P=s(J),Ie=s(P),ha=s(Ie,!0);a(Ie),a(P);var Be=r(P,2);{var ya=k=>{var B=Xa(),V=r(s(B),2),oe=s(V,!0);a(V),a(B),m(wa=>i(oe,wa),[()=>($(R),e(t),n(()=>R(e(t).lifecycle.peakDate)))]),_(k,B)};f(Be,k=>{e(t),n(()=>e(t).lifecycle.peakDate)&&k(ya)})}var ce=r(Be,2),Ae=r(s(ce),2),ba=s(Ae);a(Ae),a(ce);var xa=r(ce,2);{var ka=k=>{var B=Ya(),V=r(s(B),2),oe=s(V);a(V),a(B),m(()=>i(oe,`${e(t),n(()=>e(t).lifecycle.peakArticleCount)??""}개`)),_(k,B)};f(xa,k=>{e(t),n(()=>e(t).lifecycle.peakArticleCount>0)&&k(ka)})}a(J),a(h),a(c),m(k=>{S(c,"data-stage",(e(t),n(()=>e(t).lifecycle.stage))),i(g,($(e(l)),n(()=>e(l).emoji))),i(I,($(e(l)),n(()=>e(l).label))),i(G,($(e(l)),n(()=>e(l).description))),i(ha,k),i(ba,`${e(t),n(()=>e(t).lifecycle.currentArticleCount)??""}개 (24시간)`)},[()=>($(Pe),e(t),n(()=>Pe(e(t).lifecycle)))]),_(v,c)};f(he,v=>{e(t),n(()=>e(t).lifecycle)&&v(va)})}var se=r(he,2),ye=r(s(se),2),ia=s(ye,!0);a(ye),a(se);var te=r(se,2),be=r(s(te),2),ca=s(be,!0);a(be),a(te);var xe=r(te,2);{var oa=v=>{var l=Ha(),c=r(s(l),2);De(c,5,()=>(e(o),n(()=>e(o).evidence)),Ne,(h,d)=>{var x=Fa(),g=s(x),C=s(g,!0);a(g);var y=r(g,2),I=s(y,!0);a(y),a(x),m(()=>{i(C,(e(d),n(()=>e(d).source))),i(I,(e(d),n(()=>e(d).fact)))}),_(h,x)}),a(c),a(l),_(v,l)};f(xe,v=>{e(o),n(()=>e(o).evidence?.length>0)&&v(oa)})}var ne=r(xe,2),ke=r(s(ne),2),pa=s(ke,!0);a(ke),a(ne);var re=r(ne,2),we=r(s(re),2),le=s(we),$e=s(le),_a=s($e,!0);a($e),Aa(2),a(le);var ve=r(le,2),ga=s(ve);a(ve);var Ce=r(ve,2),da=s(Ce,!0);a(Ce),a(we),a(re);var ie=r(re,2),Le=r(s(ie),2),ua=s(Le,!0);a(Le),a(ie);var fa=r(ie,2);{var ma=v=>{var l=Za(),c=s(l),h=s(c);a(c);var d=r(c,2);De(d,5,()=>(e(t),n(()=>e(t).articles)),Ne,(x,g)=>{var C=Ka(),y=s(C),I=s(y),z=s(I,!0);a(I);var G=r(I,2),J=s(G);a(G),a(y),a(C),m(P=>{S(y,"href",(e(g),n(()=>e(g).link))),i(z,(e(g),n(()=>e(g).title))),i(J,`${e(g),n(()=>e(g).publisher)??""} · ${P??""}`)},[()=>(e(g),n(()=>Oe(e(g).publishedAt)))]),_(x,C)}),a(d),a(l),m(()=>i(h,`관련 기사 (${e(t),n(()=>e(t).articles.length)??""})`)),_(v,l)};f(fa,v=>{e(t),n(()=>e(t).articles?.length>0)&&v(ma)})}a(X),m((v,l,c)=>{S(ue,"href",`${Se??""}/`),i(Ee,v),i(ea,l),i(sa,c),i(ta,`${e(t),n(()=>e(t).issueArticleCount)??""}개 기사`),i(na,`${e(t),n(()=>e(t).issuePublisherCount)??""}개 매체`),i(ia,(e(o),n(()=>e(o).conclusion))),i(ca,(e(o),n(()=>e(o).why_it_matters))),i(pa,(e(o),n(()=>e(o).counter_scenario))),i(_a,(e(o),n(()=>e(o).impact?.score??"-"))),ja(ga,`width: ${e(o),n(()=>(e(o).impact?.score??0)/5*100)??""}%`),i(da,(e(o),n(()=>e(o).impact?.reason))),i(ua,(e(o),n(()=>e(o).action_guide)))},[()=>($(Te),e(t),n(()=>Te(e(t).issueGroup))),()=>(e(t),n(()=>Re(e(t)))),()=>($(R),e(t),n(()=>R(e(t).issueLastPublishedAt)))]),_(M,X)};f(T,M=>{e(t)&&e(o)&&M(W)},!0)}_(A,D)};f(We,A=>{e(Q)?A(Xe):A(Ye,!1)},!0)}_(p,b)};f(qe,p=>{e(ge)?p(Qe):p(Ue,!1)})}_(je,de),Ba(),Ge()}export{gs as component};
