import{c as ts,a as _,f as u,s as c,e as ne}from"../chunks/D8_vNU_7.js";import{i as re}from"../chunks/Skp2_pbQ.js";import{o as le}from"../chunks/hSDH1p8K.js";import{w as bs,a2 as ve,a3 as J,a4 as ie,s as f,o as L,a as s,a6 as a,a7 as e,a5 as t,a8 as b,u as r,au as oe,as as ns}from"../chunks/PIemEuav.js";import{i as k}from"../chunks/DUIRlQin.js";import{e as ks,i as xs}from"../chunks/DXx87UvT.js";import{h as ce,i as pe,s as M,e as _e,j as ge}from"../chunks/Dmd42eFK.js";import{t as ue,s as de}from"../chunks/DKJ03sjb.js";import{p as me}from"../chunks/Br2wQH8j.js";import{s as fe,a as he}from"../chunks/Dip_QOWi.js";import{b as ys}from"../chunks/DnMR8rRX.js";import{g as ws,a as $s,f as Cs}from"../chunks/CWF1PM-K.js";import{i as be}from"../chunks/AaN-wQOB.js";function ke(x,$,G,P){var V=x.__style;if(bs||V!==$){var h=ue($);(!bs||h!==x.getAttribute("style"))&&(h==null?x.removeAttribute("style"):x.style.cssText=h),x.__style=$}return P}var xe=u('<div class="loading svelte-n723gn"><div class="spinner svelte-n723gn"></div></div>'),ye=u('<div class="error svelte-n723gn"><p> </p> <a class="svelte-n723gn">홈으로 돌아가기</a></div>'),we=u('<button><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-n723gn"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></button>'),$e=u('<p class="signal svelte-n723gn"> </p>'),Ce=u("<span>·</span> <span> </span>",1),Ie=u('<li class="svelte-n723gn"><span class="ev-source svelte-n723gn"> </span> <span class="ev-fact svelte-n723gn"> </span></li>'),Be=u('<section class="section svelte-n723gn"><h2 class="svelte-n723gn">근거</h2> <ul class="evidence svelte-n723gn"></ul></section>'),Le=u('<li class="svelte-n723gn"><a target="_blank" rel="noopener noreferrer" class="svelte-n723gn"><span class="art-title svelte-n723gn"> </span> <span class="art-meta svelte-n723gn"> </span></a></li>'),Ae=u('<section class="section svelte-n723gn"><h2 class="svelte-n723gn"> </h2> <ul class="articles svelte-n723gn"></ul></section>'),Ne=u('<article class="article svelte-n723gn"><a class="back svelte-n723gn">← 뒤로</a> <header class="header svelte-n723gn"><div class="header-top svelte-n723gn"><span class="cat svelte-n723gn"> </span> <!></div> <h1 class="title svelte-n723gn"> </h1> <!> <div class="meta svelte-n723gn"><span> </span> <span>·</span> <span> </span> <span>·</span> <span> </span> <!></div></header> <section class="section highlight svelte-n723gn"><h2 class="svelte-n723gn">핵심 요약</h2> <p class="lead svelte-n723gn"> </p></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">왜 중요한가</h2> <p class="svelte-n723gn"> </p></section> <!> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">반대 시나리오</h2> <p class="svelte-n723gn"> </p></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">영향도</h2> <div class="impact svelte-n723gn"><div class="impact-score svelte-n723gn"><span class="score-num svelte-n723gn"> </span> <span class="score-max svelte-n723gn">/5</span></div> <div class="impact-bar svelte-n723gn"><div class="impact-fill svelte-n723gn"></div></div> <p class="impact-reason svelte-n723gn"> </p></div></section> <section class="section action svelte-n723gn"><h2 class="svelte-n723gn">행동 가이드</h2> <p class="svelte-n723gn"> </p></section> <!></article>');function Ee(x,$){ve($,!1);const G=()=>he(be,"$isLoggedIn",P),[P,V]=fe();let h=me($,"params",8),n=L(null),i=L(null),rs=L(!0),j=L(null),y=L(!1),z=L(!1);le(async()=>{try{f(n,await ce(Number(h().issueId)));const o=s(n).cardJson;if(f(i,typeof o=="string"?JSON.parse(o):o),G())try{const d=await pe(Number(h().issueId));f(y,d.bookmarked)}catch{}}catch(o){f(j,o?.message??"불러오기 실패")}finally{f(rs,!1)}});async function Is(){if(G()){f(z,!0);try{s(y)?(await _e(Number(h().issueId)),f(y,!1)):(await ge(Number(h().issueId)),f(y,!0))}catch(o){console.error("북마크 처리 실패:",o)}finally{f(z,!1)}}}function Bs(o){const d=new Date(o);return`${d.getMonth()+1}월 ${d.getDate()}일`}function Ls(o){return o.headline||o.issueTitle}re();var ls=ts(),As=J(ls);{var Ns=o=>{var d=xe();_(o,d)},Ds=o=>{var d=ts(),Ss=J(d);{var Ts=C=>{var I=ye(),A=a(I),O=a(A,!0);e(A);var N=t(A,2);e(I),b(()=>{c(O,s(j)),M(N,"href",`${ys??""}/`)}),_(C,I)},Ms=C=>{var I=ts(),A=J(I);{var O=N=>{var R=Ne(),vs=a(R),q=t(vs,2),E=a(q),F=a(E),Gs=a(F,!0);e(F);var Js=t(F,2);{var Ps=v=>{var l=we();let p;var w=a(l);e(l),b(()=>{p=de(l,1,"bookmark-btn svelte-n723gn",null,p,{active:s(y)}),l.disabled=s(z),M(l,"aria-label",s(y)?"북마크 해제":"북마크 추가"),M(w,"fill",s(y)?"currentColor":"none")}),ne("click",l,Is),_(v,l)};k(Js,v=>{G()&&v(Ps)})}e(E);var H=t(E,2),Vs=a(H,!0);e(H);var is=t(H,2);{var js=v=>{var l=$e(),p=a(l,!0);e(l),b(()=>c(p,(s(n),r(()=>s(n).signalSummary)))),_(v,l)};k(is,v=>{s(n),r(()=>s(n).signalSummary)&&v(js)})}var os=t(is,2),K=a(os),zs=a(K,!0);e(K);var Q=t(K,4),Os=a(Q);e(Q);var U=t(Q,4),Rs=a(U);e(U);var qs=t(U,2);{var Es=v=>{var l=Ce(),p=t(J(l),2),w=a(p);e(p),b(m=>c(w,`${m??""} 조회`),[()=>(ns(Cs),s(n),r(()=>Cs(s(n).viewCount)))]),_(v,l)};k(qs,v=>{s(n),r(()=>s(n).viewCount)&&v(Es)})}e(os),e(q);var W=t(q,2),cs=t(a(W),2),Fs=a(cs,!0);e(cs),e(W);var X=t(W,2),ps=t(a(X),2),Hs=a(ps,!0);e(ps),e(X);var _s=t(X,2);{var Ks=v=>{var l=Be(),p=t(a(l),2);ks(p,5,()=>(s(i),r(()=>s(i).evidence)),xs,(w,m)=>{var D=Ie(),g=a(D),S=a(g,!0);e(g);var B=t(g,2),T=a(B,!0);e(B),e(D),b(()=>{c(S,(s(m),r(()=>s(m).source))),c(T,(s(m),r(()=>s(m).fact)))}),_(w,D)}),e(p),e(l),_(v,l)};k(_s,v=>{s(i),r(()=>s(i).evidence?.length>0)&&v(Ks)})}var Y=t(_s,2),gs=t(a(Y),2),Qs=a(gs,!0);e(gs),e(Y);var Z=t(Y,2),us=t(a(Z),2),ss=a(us),ds=a(ss),Us=a(ds,!0);e(ds),oe(2),e(ss);var es=t(ss,2),Ws=a(es);e(es);var ms=t(es,2),Xs=a(ms,!0);e(ms),e(us),e(Z);var as=t(Z,2),fs=t(a(as),2),Ys=a(fs,!0);e(fs),e(as);var Zs=t(as,2);{var se=v=>{var l=Ae(),p=a(l),w=a(p);e(p);var m=t(p,2);ks(m,5,()=>(s(n),r(()=>s(n).articles)),xs,(D,g)=>{var S=Le(),B=a(S),T=a(B),ee=a(T,!0);e(T);var hs=t(T,2),ae=a(hs);e(hs),e(B),e(S),b(te=>{M(B,"href",(s(g),r(()=>s(g).link))),c(ee,(s(g),r(()=>s(g).title))),c(ae,`${s(g),r(()=>s(g).publisher)??""} · ${te??""}`)},[()=>(s(g),r(()=>Bs(s(g).publishedAt)))]),_(D,S)}),e(m),e(l),b(()=>c(w,`관련 기사 (${s(n),r(()=>s(n).articles.length)??""})`)),_(v,l)};k(Zs,v=>{s(n),r(()=>s(n).articles?.length>0)&&v(se)})}e(R),b((v,l,p)=>{M(vs,"href",`${ys??""}/`),c(Gs,v),c(Vs,l),c(zs,p),c(Os,`${s(n),r(()=>s(n).issueArticleCount)??""}개 기사`),c(Rs,`${s(n),r(()=>s(n).issuePublisherCount)??""}개 매체`),c(Fs,(s(i),r(()=>s(i).conclusion))),c(Hs,(s(i),r(()=>s(i).why_it_matters))),c(Qs,(s(i),r(()=>s(i).counter_scenario))),c(Us,(s(i),r(()=>s(i).impact?.score??"-"))),ke(Ws,`width: ${s(i),r(()=>(s(i).impact?.score??0)/5*100)??""}%`),c(Xs,(s(i),r(()=>s(i).impact?.reason))),c(Ys,(s(i),r(()=>s(i).action_guide)))},[()=>(ns(ws),s(n),r(()=>ws(s(n).issueGroup))),()=>(s(n),r(()=>Ls(s(n)))),()=>(ns($s),s(n),r(()=>$s(s(n).issueLastPublishedAt)))]),_(N,R)};k(A,N=>{s(n)&&s(i)&&N(O)},!0)}_(C,I)};k(Ss,C=>{s(j)?C(Ts):C(Ms,!1)},!0)}_(o,d)};k(As,o=>{s(rs)?o(Ns):o(Ds,!1)})}_(x,ls),ie(),V()}export{Ee as component};
