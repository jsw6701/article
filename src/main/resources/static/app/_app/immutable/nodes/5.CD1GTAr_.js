import{f as E,e as ae,a as h,s as M,c as me}from"../chunks/B6ORK0R6.js";import{i as fe}from"../chunks/CbVsUGYm.js";import{ah as pe,at as _e,t as be,U as ge,au as ke,al as he,M as P,ak as qe,a8 as we,ab as o,ad as w,a as e,aa as ye,ae as n,s as t,o as b,ac as i,af as X,av as Se,aw as se,a9 as Ee,ax as Te,ay as xe}from"../chunks/C6hxv8OO.js";import{i as Z}from"../chunks/Csn9HCkf.js";import{e as Ie,i as Le}from"../chunks/DRZtneiz.js";import{r as y}from"../chunks/CE9KULDP.js";import{s as Ae}from"../chunks/CsOk_OTb.js";import{b as $,a as te,p as Fe}from"../chunks/sY_UlI7c.js";import{g as Ge}from"../chunks/DmYOCVMP.js";import{c as Me,s as Ue}from"../chunks/B8EtuH9q.js";function le(s,v,g=!1){if(s.multiple){if(v==null)return;if(!ge(v))return ke();for(var l of s.options)l.selected=v.includes(S(l));return}for(l of s.options){var c=S(l);if(he(c,v)){l.selected=!0;return}}(!g||v!==void 0)&&(s.selectedIndex=-1)}function Ce(s){var v=new MutationObserver(()=>{le(s,s.__value)});v.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),be(()=>{v.disconnect()})}function Ne(s,v,g=v){var l=new WeakSet,c=!0;pe(s,"change",d=>{var m=d?"[selected]":":checked",u;if(s.multiple)u=[].map.call(s.querySelectorAll(m),S);else{var r=s.querySelector(m)??s.querySelector("option:not([disabled])");u=r&&S(r)}g(u),P!==null&&l.add(P)}),_e(()=>{var d=v();if(s===document.activeElement){var m=qe??P;if(l.has(m))return}if(le(s,d,c),c&&d===void 0){var u=s.querySelector(":checked");u!==null&&(d=S(u),g(d))}s.__value=d,c=!1}),Ce(s)}function S(s){return"__value"in s?s.__value:s.value}var Oe=E('<span class="field-hint checking svelte-kmqcod">확인 중...</span>'),We=E("<span> </span>"),Re=E("<option> </option>"),je=E('<p class="error svelte-kmqcod"> </p>'),ze=E('<div class="signup-page svelte-kmqcod"><div class="signup-card svelte-kmqcod"><h1 class="title svelte-kmqcod">회원가입</h1> <form><div class="field svelte-kmqcod"><label for="username" class="svelte-kmqcod">아이디</label> <input type="text" id="username" placeholder="4~20자 영문, 숫자" autocomplete="username" class="svelte-kmqcod"/> <!></div> <div class="field svelte-kmqcod"><label for="password" class="svelte-kmqcod">비밀번호</label> <input type="password" id="password" placeholder="8자 이상" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label for="passwordConfirm" class="svelte-kmqcod">비밀번호 확인</label> <input type="password" id="passwordConfirm" placeholder="비밀번호 재입력" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label class="svelte-kmqcod">성별</label> <div class="radio-group svelte-kmqcod"><label class="radio-item svelte-kmqcod"><input type="radio" class="svelte-kmqcod"/> <span class="svelte-kmqcod">남성</span></label> <label class="radio-item svelte-kmqcod"><input type="radio" class="svelte-kmqcod"/> <span class="svelte-kmqcod">여성</span></label></div></div> <div class="field svelte-kmqcod"><label for="ageGroup" class="svelte-kmqcod">나이대</label> <select id="ageGroup" class="svelte-kmqcod"></select></div> <!> <button type="submit" class="submit-btn svelte-kmqcod"> </button></form> <p class="login-link svelte-kmqcod">이미 계정이 있으신가요? <a href="/login" class="svelte-kmqcod">로그인</a></p></div></div>');function Ve(s,v){we(v,!1);const g=[];let l=b(""),c=b(""),d=b(""),m=b("MALE"),u=b("TWENTIES"),r=b({checking:!1,available:null,message:""}),f=b(""),T=b(!1),B;function re(){if(t(r,{checking:!1,available:null,message:""}),e(l).length<4){e(l).length>0&&se(r,e(r).message="아이디는 4자 이상이어야 합니다.");return}clearTimeout(B),B=setTimeout(async()=>{se(r,e(r).checking=!0);try{const a=await Me(e(l));t(r,{checking:!1,available:a.available,message:a.message})}catch{t(r,{checking:!1,available:null,message:"확인 중 오류가 발생했습니다."})}},500)}async function ie(){if(t(f,""),!e(l).trim()||e(l).length<4){t(f,"아이디는 4자 이상이어야 합니다.");return}if(!/^[a-zA-Z0-9]+$/.test(e(l))){t(f,"아이디는 영문, 숫자만 사용 가능합니다.");return}if(e(c).length<8){t(f,"비밀번호는 8자 이상이어야 합니다.");return}if(e(c)!==e(d)){t(f,"비밀번호가 일치하지 않습니다.");return}if(e(r).available===!1){t(f,"이미 사용 중인 아이디입니다.");return}t(T,!0);try{const a=await Ue({username:e(l),password:e(c),gender:e(m),ageGroup:e(u)});a.success?Ge("/login?signup=success"):t(f,a.message??"회원가입에 실패했습니다.")}catch{t(f,"서버 오류가 발생했습니다.")}t(T,!1)}const oe={TEENS:"10대",TWENTIES:"20대",THIRTIES:"30대",FORTIES:"40대",FIFTIES:"50대",SIXTIES_PLUS:"60대 이상"};fe();var U=ze(),J=o(U),C=n(o(J),2),N=o(C),x=n(o(N),2);y(x);var ne=n(x,2);{var ve=a=>{var p=Oe();h(a,p)},ce=a=>{var p=me(),k=Ee(p);{var A=q=>{var _=We();let F;var G=o(_,!0);i(_),w(()=>{F=Ae(_,1,"field-hint svelte-kmqcod",null,F,{success:e(r).available,fail:e(r).available===!1}),M(G,e(r).message)}),h(q,_)};Z(k,q=>{e(r).message&&q(A)},!0)}h(a,p)};Z(ne,a=>{e(r).checking?a(ve):a(ce,!1)})}i(N);var O=n(N,2),K=n(o(O),2);y(K),i(O);var W=n(O,2),Q=n(o(W),2);y(Q),i(W);var R=n(W,2),V=n(o(R),2),j=o(V),I=o(j);y(I),I.value=I.__value="MALE",X(2),i(j);var Y=n(j,2),L=o(Y);y(L),L.value=L.__value="FEMALE",X(2),i(Y),i(V),i(R);var z=n(R,2),D=n(o(z),2);w(()=>{e(u),Se(()=>{})}),Ie(D,5,()=>Object.entries(oe),Le,(a,p)=>{var k=Te(()=>xe(e(p),2));let A=()=>e(k)[0],q=()=>e(k)[1];var _=Re(),F=o(_,!0);i(_);var G={};w(()=>{M(F,q()),G!==(G=A())&&(_.value=(_.__value=A())??"")}),h(a,_)}),i(D),i(z);var ee=n(z,2);{var de=a=>{var p=je(),k=o(p,!0);i(p),w(()=>M(k,e(f))),h(a,p)};Z(ee,a=>{e(f)&&a(de)})}var H=n(ee,2),ue=o(H,!0);i(H),i(C),X(2),i(J),i(U),w(()=>{H.disabled=e(T),M(ue,e(T)?"가입 중...":"회원가입")}),$(x,()=>e(l),a=>t(l,a)),ae("input",x,re),$(K,()=>e(c),a=>t(c,a)),$(Q,()=>e(d),a=>t(d,a)),te(g,[],I,()=>e(m),a=>t(m,a)),te(g,[],L,()=>e(m),a=>t(m,a)),Ne(D,()=>e(u),a=>t(u,a)),ae("submit",C,Fe(ie)),h(s,U),ye()}export{Ve as component};
