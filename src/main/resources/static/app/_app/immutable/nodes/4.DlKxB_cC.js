import{c as ts,a as _,f as u,s as c,e as na}from"../chunks/B-OvIa1U.js";import{i as ra}from"../chunks/CdXFSiSg.js";import{y as bs,a4 as la,a5 as va,a6 as J,a7 as ia,s as f,o as L,a as s,a9 as e,aa as a,a8 as t,ab as b,u as r,as as oa,aq as ns}from"../chunks/C_qc7GMT.js";import{i as k}from"../chunks/7qhV2vbv.js";import{e as ks,i as xs}from"../chunks/voZxLLH9.js";import{e as ca,f as pa,i as _a,s as M,r as ga,h as ua}from"../chunks/D2PtFGOZ.js";import{t as da,s as ma}from"../chunks/tHjlPVu2.js";import{p as fa}from"../chunks/zNEGutQ1.js";import{s as ha,a as ba}from"../chunks/CqCY2mX9.js";import{b as ys}from"../chunks/rYzDofXa.js";import{g as ws,a as $s,f as Cs}from"../chunks/CWF1PM-K.js";function ka(x,$,G,P){var V=x.__style;if(bs||V!==$){var h=da($);(!bs||h!==x.getAttribute("style"))&&(h==null?x.removeAttribute("style"):x.style.cssText=h),x.__style=$}return P}var xa=u('<div class="loading svelte-n723gn"><div class="spinner svelte-n723gn"></div></div>'),ya=u('<div class="error svelte-n723gn"><p> </p> <a class="svelte-n723gn">홈으로 돌아가기</a></div>'),wa=u('<button><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-n723gn"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></button>'),$a=u('<p class="signal svelte-n723gn"> </p>'),Ca=u("<span>·</span> <span> </span>",1),Ia=u('<li class="svelte-n723gn"><span class="ev-source svelte-n723gn"> </span> <span class="ev-fact svelte-n723gn"> </span></li>'),Ba=u('<section class="section svelte-n723gn"><h2 class="svelte-n723gn">근거</h2> <ul class="evidence svelte-n723gn"></ul></section>'),La=u('<li class="svelte-n723gn"><a target="_blank" rel="noopener noreferrer" class="svelte-n723gn"><span class="art-title svelte-n723gn"> </span> <span class="art-meta svelte-n723gn"> </span></a></li>'),Aa=u('<section class="section svelte-n723gn"><h2 class="svelte-n723gn"> </h2> <ul class="articles svelte-n723gn"></ul></section>'),Na=u('<article class="article svelte-n723gn"><a class="back svelte-n723gn">← 뒤로</a> <header class="header svelte-n723gn"><div class="header-top svelte-n723gn"><span class="cat svelte-n723gn"> </span> <!></div> <h1 class="title svelte-n723gn"> </h1> <!> <div class="meta svelte-n723gn"><span> </span> <span>·</span> <span> </span> <span>·</span> <span> </span> <!></div></header> <section class="section highlight svelte-n723gn"><h2 class="svelte-n723gn">핵심 요약</h2> <p class="lead svelte-n723gn"> </p></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">왜 중요한가</h2> <p class="svelte-n723gn"> </p></section> <!> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">반대 시나리오</h2> <p class="svelte-n723gn"> </p></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">영향도</h2> <div class="impact svelte-n723gn"><div class="impact-score svelte-n723gn"><span class="score-num svelte-n723gn"> </span> <span class="score-max svelte-n723gn">/5</span></div> <div class="impact-bar svelte-n723gn"><div class="impact-fill svelte-n723gn"></div></div> <p class="impact-reason svelte-n723gn"> </p></div></section> <section class="section action svelte-n723gn"><h2 class="svelte-n723gn">행동 가이드</h2> <p class="svelte-n723gn"> </p></section> <!></article>');function Ra(x,$){la($,!1);const G=()=>ba(_a,"$isLoggedIn",P),[P,V]=ha();let h=fa($,"params",8),n=L(null),i=L(null),rs=L(!0),q=L(null),y=L(!1),z=L(!1);va(async()=>{try{f(n,await ca(Number(h().issueId)));const o=s(n).cardJson;if(f(i,typeof o=="string"?JSON.parse(o):o),G())try{const d=await pa(Number(h().issueId));f(y,d.bookmarked)}catch{}}catch(o){f(q,o?.message??"불러오기 실패")}finally{f(rs,!1)}});async function Is(){if(G()){f(z,!0);try{s(y)?(await ga(Number(h().issueId)),f(y,!1)):(await ua(Number(h().issueId)),f(y,!0))}catch(o){console.error("북마크 처리 실패:",o)}finally{f(z,!1)}}}function Bs(o){const d=new Date(o);return`${d.getMonth()+1}월 ${d.getDate()}일`}function Ls(o){return o.headline||o.issueTitle}ra();var ls=ts(),As=J(ls);{var Ns=o=>{var d=xa();_(o,d)},Ds=o=>{var d=ts(),Ss=J(d);{var Ts=C=>{var I=ya(),A=e(I),O=e(A,!0);a(A);var N=t(A,2);a(I),b(()=>{c(O,s(q)),M(N,"href",`${ys??""}/`)}),_(C,I)},Ms=C=>{var I=ts(),A=J(I);{var O=N=>{var R=Na(),vs=e(R),j=t(vs,2),E=e(j),F=e(E),Gs=e(F,!0);a(F);var Js=t(F,2);{var Ps=v=>{var l=wa();let p;var w=e(l);a(l),b(()=>{p=ma(l,1,"bookmark-btn svelte-n723gn",null,p,{active:s(y)}),l.disabled=s(z),M(l,"aria-label",s(y)?"북마크 해제":"북마크 추가"),M(w,"fill",s(y)?"currentColor":"none")}),na("click",l,Is),_(v,l)};k(Js,v=>{G()&&v(Ps)})}a(E);var H=t(E,2),Vs=e(H,!0);a(H);var is=t(H,2);{var qs=v=>{var l=$a(),p=e(l,!0);a(l),b(()=>c(p,(s(n),r(()=>s(n).signalSummary)))),_(v,l)};k(is,v=>{s(n),r(()=>s(n).signalSummary)&&v(qs)})}var os=t(is,2),K=e(os),zs=e(K,!0);a(K);var Q=t(K,4),Os=e(Q);a(Q);var U=t(Q,4),Rs=e(U);a(U);var js=t(U,2);{var Es=v=>{var l=Ca(),p=t(J(l),2),w=e(p);a(p),b(m=>c(w,`${m??""} 조회`),[()=>(ns(Cs),s(n),r(()=>Cs(s(n).viewCount)))]),_(v,l)};k(js,v=>{s(n),r(()=>s(n).viewCount)&&v(Es)})}a(os),a(j);var W=t(j,2),cs=t(e(W),2),Fs=e(cs,!0);a(cs),a(W);var X=t(W,2),ps=t(e(X),2),Hs=e(ps,!0);a(ps),a(X);var _s=t(X,2);{var Ks=v=>{var l=Ba(),p=t(e(l),2);ks(p,5,()=>(s(i),r(()=>s(i).evidence)),xs,(w,m)=>{var D=Ia(),g=e(D),S=e(g,!0);a(g);var B=t(g,2),T=e(B,!0);a(B),a(D),b(()=>{c(S,(s(m),r(()=>s(m).source))),c(T,(s(m),r(()=>s(m).fact)))}),_(w,D)}),a(p),a(l),_(v,l)};k(_s,v=>{s(i),r(()=>s(i).evidence?.length>0)&&v(Ks)})}var Y=t(_s,2),gs=t(e(Y),2),Qs=e(gs,!0);a(gs),a(Y);var Z=t(Y,2),us=t(e(Z),2),ss=e(us),ds=e(ss),Us=e(ds,!0);a(ds),oa(2),a(ss);var as=t(ss,2),Ws=e(as);a(as);var ms=t(as,2),Xs=e(ms,!0);a(ms),a(us),a(Z);var es=t(Z,2),fs=t(e(es),2),Ys=e(fs,!0);a(fs),a(es);var Zs=t(es,2);{var sa=v=>{var l=Aa(),p=e(l),w=e(p);a(p);var m=t(p,2);ks(m,5,()=>(s(n),r(()=>s(n).articles)),xs,(D,g)=>{var S=La(),B=e(S),T=e(B),aa=e(T,!0);a(T);var hs=t(T,2),ea=e(hs);a(hs),a(B),a(S),b(ta=>{M(B,"href",(s(g),r(()=>s(g).link))),c(aa,(s(g),r(()=>s(g).title))),c(ea,`${s(g),r(()=>s(g).publisher)??""} · ${ta??""}`)},[()=>(s(g),r(()=>Bs(s(g).publishedAt)))]),_(D,S)}),a(m),a(l),b(()=>c(w,`관련 기사 (${s(n),r(()=>s(n).articles.length)??""})`)),_(v,l)};k(Zs,v=>{s(n),r(()=>s(n).articles?.length>0)&&v(sa)})}a(R),b((v,l,p)=>{M(vs,"href",`${ys??""}/`),c(Gs,v),c(Vs,l),c(zs,p),c(Os,`${s(n),r(()=>s(n).issueArticleCount)??""}개 기사`),c(Rs,`${s(n),r(()=>s(n).issuePublisherCount)??""}개 매체`),c(Fs,(s(i),r(()=>s(i).conclusion))),c(Hs,(s(i),r(()=>s(i).why_it_matters))),c(Qs,(s(i),r(()=>s(i).counter_scenario))),c(Us,(s(i),r(()=>s(i).impact?.score??"-"))),ka(Ws,`width: ${s(i),r(()=>(s(i).impact?.score??0)/5*100)??""}%`),c(Xs,(s(i),r(()=>s(i).impact?.reason))),c(Ys,(s(i),r(()=>s(i).action_guide)))},[()=>(ns(ws),s(n),r(()=>ws(s(n).issueGroup))),()=>(s(n),r(()=>Ls(s(n)))),()=>(ns($s),s(n),r(()=>$s(s(n).issueLastPublishedAt)))]),_(N,R)};k(A,N=>{s(n)&&s(i)&&N(O)},!0)}_(C,I)};k(Ss,C=>{s(q)?C(Ts):C(Ms,!1)},!0)}_(o,d)};k(As,o=>{s(rs)?o(Ns):o(Ds,!1)})}_(x,ls),ia(),V()}export{Ra as component};
