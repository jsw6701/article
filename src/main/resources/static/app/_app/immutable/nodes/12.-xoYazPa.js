import{f as l,a as o,c as O}from"../chunks/CSDkEukK.js";import"../chunks/G9K82XB2.js";import{o as ye,a as Me}from"../chunks/D2Z1D5OA.js";import{p as Ce,a as Te,e as Le,g as e,Y as M,ap as Ie,s as u,c as v,b as t,o as d,f as C,t as A}from"../chunks/TeviCJ82.js";import{s as g,e as De}from"../chunks/DJUeCBpJ.js";import{i as m}from"../chunks/iMg5e8oI.js";import{e as Se,i as ke}from"../chunks/CqNPvWgI.js";import{h as Ae}from"../chunks/DBo6aLs-.js";import{s as Ge}from"../chunks/B9lDzZO_.js";import{b as Be}from"../chunks/DWbD1g0-.js";import{i as Fe}from"../chunks/DgK7GOei.js";import{b as He}from"../chunks/DFC9nrag.js";import{i as Oe,l as Pe}from"../chunks/C8ccASB2.js";import{b as Ve,a as Ye}from"../chunks/8QpmlEFl.js";import{L as je}from"../chunks/BjWrnKfY.js";var qe=l('<div class="loading svelte-1u0ngwm"><div class="spinner svelte-1u0ngwm"></div></div>'),ze=l('<div class="message-box svelte-1u0ngwm"><p class="svelte-1u0ngwm"> </p> <button class="action-btn svelte-1u0ngwm">다시 시도</button></div>'),Ee=l('<div class="message-box svelte-1u0ngwm"><p class="svelte-1u0ngwm">브리핑 카드가 없습니다</p></div>'),Je=l('<p class="card-highlight svelte-1u0ngwm"> </p>'),Ke=l('<p class="card-desc svelte-1u0ngwm"> </p>'),Ne=l("<span>·</span> <span> </span>",1),Qe=l('<a class="card svelte-1u0ngwm"><div class="card-header svelte-1u0ngwm"><div class="card-meta svelte-1u0ngwm"><span class="card-category svelte-1u0ngwm"> </span> <!></div> <span class="card-time svelte-1u0ngwm"> </span></div> <h2 class="card-title svelte-1u0ngwm"> </h2> <!> <div class="card-footer svelte-1u0ngwm"><span> </span> <!></div></a>'),Re=l('<div class="loading-more svelte-1u0ngwm"><div class="spinner svelte-1u0ngwm"></div></div>'),Ue=l('<p class="end-message svelte-1u0ngwm">모든 브리핑을 불러왔습니다</p>'),We=l('<div class="cards svelte-1u0ngwm"></div> <div class="sentinel svelte-1u0ngwm"><!></div>',1),Xe=l('<div class="page svelte-1u0ngwm"><header class="header svelte-1u0ngwm"><h1 class="title svelte-1u0ngwm">피드</h1> <p class="subtitle svelte-1u0ngwm">모든 브리핑 카드</p></header> <!></div>');function ma(ee,ae){Ce(ae,!1);let w=M([]),P=M(!0),T=M(!1),V=M(null),G=M(!0),Y=0;const U=10;let B=M(),F=null;async function W(a=!1){if(!(e(T)||!a&&!e(G))){a?(d(P,!0),Y=0,d(w,[])):d(T,!0);try{const n=await Pe({limit:U,offset:Y});a?d(w,n.items):d(w,[...e(w),...n.items]),Y+=n.items.length,d(G,n.items.length===U)}catch(n){d(V,n?.message??"불러오기 실패")}finally{d(P,!1),d(T,!1)}}}ye(()=>{const a=Oe.subscribe(async n=>{n&&(await W(!0),F=new IntersectionObserver(L=>{L[0].isIntersecting&&e(G)&&!e(T)&&W()},{rootMargin:"100px"}),e(B)&&F.observe(e(B)),a())});return a}),Me(()=>{F&&F.disconnect()});function se(a){const n=new Date,L=new Date(a),p=Math.floor((n.getTime()-L.getTime())/1e3/60);return p<60?`${p}분 전`:p<1440?`${Math.floor(p/60)}시간 전`:`${Math.floor(p/1440)}일 전`}function re(a){return a.headline||a.issueTitle}Fe();var j=Xe();Ae("1u0ngwm",a=>{Le(()=>{Ie.title="피드 - SHIFT"})});var te=u(v(j),2);{var ne=a=>{var n=qe();o(a,n)},oe=a=>{var n=O(),L=C(n);{var p=h=>{var b=ze(),I=v(b),q=v(I,!0);t(I);var z=u(I,2);t(b),A(()=>g(q,e(V))),De("click",z,()=>location.reload()),o(h,b)},ve=h=>{var b=O(),I=C(b);{var q=x=>{var H=Ee();o(x,H)},z=x=>{var H=We(),E=C(H);Se(E,5,()=>e(w),ke,(c,s)=>{var y=Qe(),D=v(y),_=v(D),S=v(_),ue=v(S,!0);t(S);var de=u(S,2);{var me=r=>{je(r,{get lifecycle(){return e(s).lifecycle},showChange:!0})};m(de,r=>{e(s).lifecycle&&r(me)})}t(_);var X=u(_,2),fe=v(X,!0);t(X),t(D);var K=u(D,2),ge=v(K,!0);t(K);var Z=u(K,2);{var pe=r=>{var i=Je(),f=v(i,!0);t(i),A(()=>g(f,e(s).signalSummary)),o(r,i)},_e=r=>{var i=O(),f=C(i);{var Q=k=>{var R=Ke(),xe=v(R,!0);t(R),A(()=>g(xe,e(s).conclusion)),o(k,R)};m(f,k=>{e(s).conclusion&&k(Q)},!0)}o(r,i)};m(Z,r=>{e(s).signalSummary?r(pe):r(_e,!1)})}var $=u(Z,2),N=v($),we=v(N);t(N);var he=u(N,2);{var be=r=>{var i=Ne(),f=u(C(i),2),Q=v(f);t(f),A(k=>g(Q,`${k??""} 조회`),[()=>Ye(e(s).viewCount)]),o(r,i)};m(he,r=>{e(s).viewCount&&r(be)})}t($),t(y),A((r,i,f)=>{Ge(y,"href",`${He??""}/cards/${e(s).issueId??""}`),g(ue,r),g(fe,i),g(ge,f),g(we,`${e(s).articleCount??""}개 기사`)},[()=>Ve(e(s).issueGroup),()=>se(e(s).issueLastPublishedAt),()=>re(e(s))]),o(c,y)}),t(E);var J=u(E,2),ie=v(J);{var le=c=>{var s=Re();o(c,s)},ce=c=>{var s=O(),y=C(s);{var D=_=>{var S=Ue();o(_,S)};m(y,_=>{e(G)||_(D)},!0)}o(c,s)};m(ie,c=>{e(T)?c(le):c(ce,!1)})}t(J),Be(J,c=>d(B,c),()=>e(B)),o(x,H)};m(I,x=>{e(w).length===0?x(q):x(z,!1)},!0)}o(h,b)};m(L,h=>{e(V)?h(p):h(ve,!1)},!0)}o(a,n)};m(te,a=>{e(P)?a(ne):a(oe,!1)})}t(j),o(ee,j),Te()}export{ma as component};
