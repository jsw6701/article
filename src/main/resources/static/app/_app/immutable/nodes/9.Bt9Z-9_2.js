import{c as fe,a as B,f as Q}from"../chunks/C5g7XBZA.js";import"../chunks/1N9P_ows.js";import{c as he,o as be,g as te}from"../chunks/DjCfrimd.js";import{p as ie,aq as ne,o as a,g as e,Y as i,ar as ve,f as ce,a as de,c as s,s as l,ao as G,b as t,t as K,e as xe,ap as ge}from"../chunks/V-LZvqf2.js";import{s as N,e as j}from"../chunks/C_y0Aa-3.js";import{i as O}from"../chunks/BSeBmDgX.js";import{h as _e}from"../chunks/DLPZc01m.js";import{r as C,s as E}from"../chunks/gBni9Ox-.js";import{c as se,b as re,p as ke}from"../chunks/DDRt-sAN.js";import{i as me}from"../chunks/BhZ1EOWQ.js";import{s as ze,a as ye}from"../chunks/BJpLCdRy.js";import{b as I}from"../chunks/Bs7FA3So.js";import{g as $e}from"../chunks/CCZINJK3.js";import{i as we,b as le,c as Ie}from"../chunks/DyZVRJKY.js";import{s as Te,c as Se}from"../chunks/AWvmR92A.js";import{S as Pe}from"../chunks/C22KBAGO.js";import{p as oe}from"../chunks/C5r95B9E.js";import{J as qe}from"../chunks/BPtt4w3D.js";var Le=Q('<div class="error svelte-1h0k91m"> </div>'),Me=Q('<div class="modal-backdrop svelte-1h0k91m" role="presentation"><div class="modal svelte-1h0k91m" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="modal-header svelte-1h0k91m"><h2 id="modal-title" class="svelte-1h0k91m">약관 동의 필요</h2> <p class="modal-desc svelte-1h0k91m">서비스 이용을 위해 약관에 동의해 주세요.</p></div> <div class="modal-body svelte-1h0k91m"><div class="agreement-item svelte-1h0k91m"><label class="agreement-label svelte-1h0k91m"><input type="checkbox" class="svelte-1h0k91m"/> <span class="checkbox-custom svelte-1h0k91m"></span> <span class="agreement-text svelte-1h0k91m"><a target="_blank" rel="noopener noreferrer" class="svelte-1h0k91m">서비스 이용약관</a> <span class="required svelte-1h0k91m">(필수)</span></span></label></div> <div class="agreement-item svelte-1h0k91m"><label class="agreement-label svelte-1h0k91m"><input type="checkbox" class="svelte-1h0k91m"/> <span class="checkbox-custom svelte-1h0k91m"></span> <span class="agreement-text svelte-1h0k91m"><a target="_blank" rel="noopener noreferrer" class="svelte-1h0k91m">개인정보처리방침</a> <span class="required svelte-1h0k91m">(필수)</span></span></label></div> <button type="button" class="agree-all-btn svelte-1h0k91m">전체 동의</button> <!></div> <div class="modal-footer svelte-1h0k91m"><button type="button" class="submit-btn svelte-1h0k91m"> </button></div></div></div>');function Ae(R,T){ie(T,!1);const z=i();let V=oe(T,"userId",8),W=oe(T,"show",8,!1);const y=he();let n=i(!1),m=i(!1),o=i(!1),v=i("");async function p(){if(e(z)){a(o,!0),a(v,"");try{const c=await qe({userId:V()});c.success?y("agreed"):a(v,c.message||"약관 동의 처리에 실패했습니다.")}catch{a(v,"서버 오류가 발생했습니다.")}finally{a(o,!1)}}}function $(c){}ne(()=>(e(n),e(m),e(o)),()=>{a(z,e(n)&&e(m)&&!e(o))}),ve(),me();var F=fe(),S=ce(F);{var X=c=>{var h=Me(),w=s(h),b=l(s(w),2),P=s(b),x=s(P),g=s(x);C(g);var q=l(g,4),L=s(q);G(2),t(q),t(x),t(P);var _=l(P,2),H=s(_),k=s(H);C(k);var M=l(k,4),J=s(M);G(2),t(M),t(H),t(_);var A=l(_,2),Z=l(A,2);{var D=d=>{var U=Le(),ae=s(U,!0);t(U),K(()=>N(ae,e(v))),B(d,U)};O(Z,d=>{e(v)&&d(D)})}t(b);var Y=l(b,2),u=s(Y),ee=s(u,!0);t(u),t(Y),t(w),t(h),K(()=>{E(L,"href",`${I??""}/terms`),E(J,"href",`${I??""}/privacy`),u.disabled=!e(z),N(ee,e(o)?"처리 중...":"동의하고 계속하기")}),se(g,()=>e(n),d=>a(n,d)),se(k,()=>e(m),d=>a(m,d)),j("click",A,()=>{a(n,!0),a(m,!0)}),j("click",u,p),j("click",h,$),B(c,h)};O(S,c=>{W()&&c(X)})}B(R,F),de()}var De=Q('<div class="error svelte-1x05zx6"> </div>'),Ue=Q('<div class="page svelte-1x05zx6"><header class="header svelte-1x05zx6"><!> <p class="subtitle svelte-1x05zx6">계정에 로그인하세요</p></header> <form class="form svelte-1x05zx6"><div class="field svelte-1x05zx6"><label for="username" class="svelte-1x05zx6">아이디</label> <input type="text" id="username" placeholder="아이디 입력" autocomplete="username" class="svelte-1x05zx6"/></div> <div class="field svelte-1x05zx6"><label for="password" class="svelte-1x05zx6">비밀번호</label> <input type="password" id="password" placeholder="비밀번호 입력" autocomplete="current-password" class="svelte-1x05zx6"/> <a class="forgot-link svelte-1x05zx6">비밀번호를 잊으셨나요?</a></div> <div class="options-row svelte-1x05zx6"><label class="checkbox-label svelte-1x05zx6"><input type="checkbox" class="svelte-1x05zx6"/> <span class="checkbox-text svelte-1x05zx6">자동 로그인</span></label></div> <!> <button type="submit" class="submit svelte-1x05zx6"> </button></form> <div class="footer svelte-1x05zx6"><span>계정이 없으신가요?</span> <a class="svelte-1x05zx6">회원가입</a></div> <div class="footer-extra svelte-1x05zx6"><a class="svelte-1x05zx6">아이디 찾기</a></div></div> <!>',1);function ea(R,T){ie(T,!1);const z=()=>ye(we,"$isLoggedIn",V),[V,W]=ze();let y=i(""),n=i(""),m=i(!1),o=i(""),v=i(!1),p=i(!1),$=i(null);const F={home:"/",feed:"/today",trending:"/trending"};be(()=>{le.init()});async function S(){await Te.init();const r=te(Se),f=F[r]||"/";$e(`${I}${f}`)}async function X(){if(a(o,""),!e(y).trim()){a(o,"아이디를 입력해주세요.");return}if(!e(n)){a(o,"비밀번호를 입력해주세요.");return}a(v,!0);const r=await le.login(e(y),e(n),e(m));if(a(v,!1),r.success)if(r.requiresTermsAgreement){const f=te(Ie);f&&(a($,f.userId),a(p,!0))}else await S();else a(o,r.message)}function c(){a(p,!1),a($,null),S()}ne(()=>(z(),e(p)),()=>{z()&&!e(p)&&S()}),ve(),me();var h=Ue();_e("1x05zx6",r=>{xe(()=>{ge.title="로그인 - SHIFT"})});var w=ce(h),b=s(w),P=s(b);Pe(P,{size:"lg"}),G(2),t(b);var x=l(b,2),g=s(x),q=l(s(g),2);C(q),t(g);var L=l(g,2),_=l(s(L),2);C(_);var H=l(_,2);t(L);var k=l(L,2),M=s(k),J=s(M);C(J),G(2),t(M),t(k);var A=l(k,2);{var Z=r=>{var f=De(),ue=s(f,!0);t(f),K(()=>N(ue,e(o))),B(r,f)};O(A,r=>{e(o)&&r(Z)})}var D=l(A,2),Y=s(D,!0);t(D),t(x);var u=l(x,2),ee=l(s(u),2);t(u);var d=l(u,2),U=s(d);t(d),t(w);var ae=l(w,2);{var pe=r=>{Ae(r,{get userId(){return e($)},get show(){return e(p)},$$events:{agreed:c}})};O(ae,r=>{e(p)&&e($)&&r(pe)})}K(()=>{E(H,"href",`${I??""}/forgot-password`),D.disabled=e(v),N(Y,e(v)?"로그인 중...":"로그인"),E(ee,"href",`${I??""}/signup`),E(U,"href",`${I??""}/find-username`)}),re(q,()=>e(y),r=>a(y,r)),re(_,()=>e(n),r=>a(n,r)),se(J,()=>e(m),r=>a(m,r)),j("submit",x,ke(X)),B(R,h),de(),W()}export{ea as component};
