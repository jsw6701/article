import{f as E,e as ae,a as h,s as U,c as _e}from"../chunks/CS2dibgQ.js";import{i as be}from"../chunks/Bt_TkTeL.js";import{ab as ge,at as ke,t as he,U as qe,au as we,ag as ye,M as H,af as Se,a2 as Ee,a5 as o,a7 as w,a as e,a4 as Te,a8 as n,s as t,o as b,a6 as r,a9 as se,av as xe,aw as te,a3 as Ie,ax as Le,ay as Ae}from"../chunks/DyPSrcml.js";import{i as P}from"../chunks/BZsm3KgI.js";import{e as Fe,i as Ge}from"../chunks/DlrElwY4.js";import{b as y,s as Me,d as Ue,e as Ce}from"../chunks/DjyczLpt.js";import{s as Ne}from"../chunks/CpR1DMe9.js";import{b as X,a as le,p as Oe}from"../chunks/DCa5vvE5.js";import{b as re}from"../chunks/3vd1_UXx.js";import{g as We}from"../chunks/B6n42N9r.js";function ie(s,v,g=!1){if(s.multiple){if(v==null)return;if(!qe(v))return we();for(var l of s.options)l.selected=v.includes(S(l));return}for(l of s.options){var c=S(l);if(ye(c,v)){l.selected=!0;return}}(!g||v!==void 0)&&(s.selectedIndex=-1)}function $e(s){var v=new MutationObserver(()=>{ie(s,s.__value)});v.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),he(()=>{v.disconnect()})}function Re(s,v,g=v){var l=new WeakSet,c=!0;ge(s,"change",u=>{var m=u?"[selected]":":checked",d;if(s.multiple)d=[].map.call(s.querySelectorAll(m),S);else{var i=s.querySelector(m)??s.querySelector("option:not([disabled])");d=i&&S(i)}g(d),H!==null&&l.add(H)}),ke(()=>{var u=v();if(s===document.activeElement){var m=Se??H;if(l.has(m))return}if(ie(s,u,c),c&&u===void 0){var d=s.querySelector(":checked");d!==null&&(u=S(d),g(u))}s.__value=u,c=!1}),$e(s)}function S(s){return"__value"in s?s.__value:s.value}var je=E('<span class="field-hint checking svelte-kmqcod">확인 중...</span>'),ze=E("<span> </span>"),De=E("<option> </option>"),He=E('<p class="error svelte-kmqcod"> </p>'),Pe=E('<div class="signup-page svelte-kmqcod"><div class="signup-card svelte-kmqcod"><h1 class="title svelte-kmqcod">회원가입</h1> <form><div class="field svelte-kmqcod"><label for="username" class="svelte-kmqcod">아이디</label> <input type="text" id="username" placeholder="4~20자 영문, 숫자" autocomplete="username" class="svelte-kmqcod"/> <!></div> <div class="field svelte-kmqcod"><label for="password" class="svelte-kmqcod">비밀번호</label> <input type="password" id="password" placeholder="8자 이상" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label for="passwordConfirm" class="svelte-kmqcod">비밀번호 확인</label> <input type="password" id="passwordConfirm" placeholder="비밀번호 재입력" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label class="svelte-kmqcod">성별</label> <div class="radio-group svelte-kmqcod"><label class="radio-item svelte-kmqcod"><input type="radio" class="svelte-kmqcod"/> <span class="svelte-kmqcod">남성</span></label> <label class="radio-item svelte-kmqcod"><input type="radio" class="svelte-kmqcod"/> <span class="svelte-kmqcod">여성</span></label></div></div> <div class="field svelte-kmqcod"><label for="ageGroup" class="svelte-kmqcod">나이대</label> <select id="ageGroup" class="svelte-kmqcod"></select></div> <!> <button type="submit" class="submit-btn svelte-kmqcod"> </button></form> <p class="login-link svelte-kmqcod">이미 계정이 있으신가요? <a class="svelte-kmqcod">로그인</a></p></div></div>');function sa(s,v){Ee(v,!1);const g=[];let l=b(""),c=b(""),u=b(""),m=b("MALE"),d=b("TWENTIES"),i=b({checking:!1,available:null,message:""}),p=b(""),T=b(!1),Z;function oe(){if(t(i,{checking:!1,available:null,message:""}),e(l).length<4){e(l).length>0&&te(i,e(i).message="아이디는 4자 이상이어야 합니다.");return}clearTimeout(Z),Z=setTimeout(async()=>{te(i,e(i).checking=!0);try{const a=await Ue(e(l));t(i,{checking:!1,available:a.available,message:a.message})}catch{t(i,{checking:!1,available:null,message:"확인 중 오류가 발생했습니다."})}},500)}async function ne(){if(t(p,""),!e(l).trim()||e(l).length<4){t(p,"아이디는 4자 이상이어야 합니다.");return}if(!/^[a-zA-Z0-9]+$/.test(e(l))){t(p,"아이디는 영문, 숫자만 사용 가능합니다.");return}if(e(c).length<8){t(p,"비밀번호는 8자 이상이어야 합니다.");return}if(e(c)!==e(u)){t(p,"비밀번호가 일치하지 않습니다.");return}if(e(i).available===!1){t(p,"이미 사용 중인 아이디입니다.");return}t(T,!0);try{const a=await Ce({username:e(l),password:e(c),gender:e(m),ageGroup:e(d)});a.success?We(`${re}/login?signup=success`):t(p,a.message??"회원가입에 실패했습니다.")}catch{t(p,"서버 오류가 발생했습니다.")}t(T,!1)}const ve={TEENS:"10대",TWENTIES:"20대",THIRTIES:"30대",FORTIES:"40대",FIFTIES:"50대",SIXTIES_PLUS:"60대 이상"};be();var C=Pe(),B=o(C),x=n(o(B),2),N=o(x),I=n(o(N),2);y(I);var ce=n(I,2);{var ue=a=>{var f=je();h(a,f)},de=a=>{var f=_e(),k=Ie(f);{var F=q=>{var _=ze();let G;var M=o(_,!0);r(_),w(()=>{G=Ne(_,1,"field-hint svelte-kmqcod",null,G,{success:e(i).available,fail:e(i).available===!1}),U(M,e(i).message)}),h(q,_)};P(k,q=>{e(i).message&&q(F)},!0)}h(a,f)};P(ce,a=>{e(i).checking?a(ue):a(de,!1)})}r(N);var O=n(N,2),J=n(o(O),2);y(J),r(O);var W=n(O,2),K=n(o(W),2);y(K),r(W);var $=n(W,2),Q=n(o($),2),R=o(Q),L=o(R);y(L),L.value=L.__value="MALE",se(2),r(R);var V=n(R,2),A=o(V);y(A),A.value=A.__value="FEMALE",se(2),r(V),r(Q),r($);var j=n($,2),z=n(o(j),2);w(()=>{e(d),xe(()=>{})}),Fe(z,5,()=>Object.entries(ve),Ge,(a,f)=>{var k=Le(()=>Ae(e(f),2));let F=()=>e(k)[0],q=()=>e(k)[1];var _=De(),G=o(_,!0);r(_);var M={};w(()=>{U(G,q()),M!==(M=F())&&(_.value=(_.__value=F())??"")}),h(a,_)}),r(z),r(j);var Y=n(j,2);{var me=a=>{var f=He(),k=o(f,!0);r(f),w(()=>U(k,e(p))),h(a,f)};P(Y,a=>{e(p)&&a(me)})}var D=n(Y,2),pe=o(D,!0);r(D),r(x);var ee=n(x,2),fe=n(o(ee));r(ee),r(B),r(C),w(()=>{D.disabled=e(T),U(pe,e(T)?"가입 중...":"회원가입"),Me(fe,"href",`${re??""}/login`)}),X(I,()=>e(l),a=>t(l,a)),ae("input",I,oe),X(J,()=>e(c),a=>t(c,a)),X(K,()=>e(u),a=>t(u,a)),le(g,[],L,()=>e(m),a=>t(m,a)),le(g,[],A,()=>e(m),a=>t(m,a)),Re(z,()=>e(d),a=>t(d,a)),ae("submit",x,Oe(ne)),h(s,C),Te()}export{sa as component};
