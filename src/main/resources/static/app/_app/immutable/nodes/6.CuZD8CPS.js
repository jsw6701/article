import{f as T,e as te,a as h,s as C,c as ke}from"../chunks/CC4GLFaW.js";import{i as he}from"../chunks/Vuw_Qtj8.js";import{a9 as qe,at as we,t as ye,Q as Ee,au as Se,ad as Te,I as Q,ac as Ie,a2 as xe,a6 as v,a8 as y,a as e,a4 as Le,a5 as i,s as l,o as b,a7 as o,as as re,av as Ae,aw as ie,a3 as Fe,ax as Me,ay as Ge}from"../chunks/BCBllwWT.js";import{i as X}from"../chunks/vsECunA6.js";import{e as Ue,i as Ce}from"../chunks/B1qOUn_2.js";import{f as E,s as Ne,k as Oe,m as We}from"../chunks/CQlLVhH8.js";import{s as N}from"../chunks/0zgmL7Io.js";import{b as Z,a as oe,p as $e}from"../chunks/DNHS9rmD.js";import{b as ve}from"../chunks/BlpVvTHe.js";import{g as Re}from"../chunks/5OgZfVJF.js";function ne(s,n,g=!1){if(s.multiple){if(n==null)return;if(!Ee(n))return Se();for(var t of s.options)t.selected=n.includes(S(t));return}for(t of s.options){var u=S(t);if(Te(u,n)){t.selected=!0;return}}(!g||n!==void 0)&&(s.selectedIndex=-1)}function je(s){var n=new MutationObserver(()=>{ne(s,s.__value)});n.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ye(()=>{n.disconnect()})}function ze(s,n,g=n){var t=new WeakSet,u=!0;qe(s,"change",d=>{var c=d?"[selected]":":checked",m;if(s.multiple)m=[].map.call(s.querySelectorAll(c),S);else{var r=s.querySelector(c)??s.querySelector("option:not([disabled])");m=r&&S(r)}g(m),Q!==null&&t.add(Q)}),we(()=>{var d=n();if(s===document.activeElement){var c=Ie??Q;if(t.has(c))return}if(ne(s,d,u),u&&d===void 0){var m=s.querySelector(":checked");m!==null&&(d=S(m),g(d))}s.__value=d,u=!1}),je(s)}function S(s){return"__value"in s?s.__value:s.value}var De=T('<span class="hint svelte-kmqcod">확인 중...</span>'),He=T("<span> </span>"),Pe=T("<option> </option>"),Qe=T('<div class="error-msg svelte-kmqcod"> </div>'),Xe=T('<div class="page svelte-kmqcod"><header class="page-header svelte-kmqcod"><h1 class="svelte-kmqcod">회원가입</h1> <p class="svelte-kmqcod">새 계정을 만드세요</p></header> <form class="form svelte-kmqcod"><div class="field svelte-kmqcod"><label for="username" class="svelte-kmqcod">아이디</label> <input type="text" id="username" placeholder="4자 이상, 영문/숫자" autocomplete="username"/> <!></div> <div class="field svelte-kmqcod"><label for="password" class="svelte-kmqcod">비밀번호</label> <input type="password" id="password" placeholder="8자 이상" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label for="passwordConfirm" class="svelte-kmqcod">비밀번호 확인</label> <input type="password" id="passwordConfirm" placeholder="비밀번호 재입력" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label class="svelte-kmqcod">성별</label> <div class="radio-group svelte-kmqcod"><label><input type="radio" class="svelte-kmqcod"/> 남성</label> <label><input type="radio" class="svelte-kmqcod"/> 여성</label></div></div> <div class="field svelte-kmqcod"><label for="ageGroup" class="svelte-kmqcod">연령대</label> <select id="ageGroup" class="svelte-kmqcod"></select></div> <!> <button type="submit" class="submit svelte-kmqcod"> </button></form> <div class="footer svelte-kmqcod"><span>이미 계정이 있으신가요?</span> <a class="svelte-kmqcod">로그인</a></div></div>');function ta(s,n){xe(n,!1);const g=[];let t=b(""),u=b(""),d=b(""),c=b("MALE"),m=b("TWENTIES"),r=b({checking:!1,available:null,message:""}),f=b(""),I=b(!1),B;function ce(){if(l(r,{checking:!1,available:null,message:""}),e(t).length<4){e(t).length>0&&ie(r,e(r).message="4자 이상 입력해주세요");return}clearTimeout(B),B=setTimeout(async()=>{ie(r,e(r).checking=!0);try{const a=await Oe(e(t));l(r,{checking:!1,available:a.available,message:a.available?"사용 가능":"이미 사용중"})}catch{l(r,{checking:!1,available:null,message:"확인 실패"})}},500)}async function ue(){if(l(f,""),!e(t).trim()||e(t).length<4){l(f,"아이디는 4자 이상이어야 합니다");return}if(!/^[a-zA-Z0-9]+$/.test(e(t))){l(f,"아이디는 영문과 숫자만 가능합니다");return}if(e(u).length<8){l(f,"비밀번호는 8자 이상이어야 합니다");return}if(e(u)!==e(d)){l(f,"비밀번호가 일치하지 않습니다");return}if(e(r).available===!1){l(f,"이미 사용중인 아이디입니다");return}l(I,!0);try{const a=await We({username:e(t),password:e(u),gender:e(c),ageGroup:e(m)});a.success?Re(`${ve}/login?signup=success`):l(f,a.message??"가입 실패")}catch{l(f,"서버 오류가 발생했습니다")}l(I,!1)}const de={TEENS:"10대",TWENTIES:"20대",THIRTIES:"30대",FORTIES:"40대",FIFTIES:"50대",SIXTIES_PLUS:"60대 이상"};he();var O=Xe(),x=i(v(O),2),W=v(x),q=i(v(W),2);E(q);let J;var me=i(q,2);{var fe=a=>{var p=De();h(a,p)},pe=a=>{var p=ke(),k=Fe(p);{var M=w=>{var _=He();let G;var U=v(_,!0);o(_),y(()=>{G=N(_,1,"hint svelte-kmqcod",null,G,{success:e(r).available,error:e(r).available===!1}),C(U,e(r).message)}),h(w,_)};X(k,w=>{e(r).message&&w(M)},!0)}h(a,p)};X(me,a=>{e(r).checking?a(fe):a(pe,!1)})}o(W);var $=i(W,2),K=i(v($),2);E(K),o($);var R=i($,2),V=i(v(R),2);E(V),o(R);var j=i(R,2),Y=i(v(j),2),L=v(Y);let ee;var A=v(L);E(A),A.value=A.__value="MALE",re(),o(L);var z=i(L,2);let ae;var F=v(z);E(F),F.value=F.__value="FEMALE",re(),o(z),o(Y),o(j);var D=i(j,2),H=i(v(D),2);y(()=>{e(m),Ae(()=>{})}),Ue(H,5,()=>Object.entries(de),Ce,(a,p)=>{var k=Me(()=>Ge(e(p),2));let M=()=>e(k)[0],w=()=>e(k)[1];var _=Pe(),G=v(_,!0);o(_);var U={};y(()=>{C(G,w()),U!==(U=M())&&(_.value=(_.__value=M())??"")}),h(a,_)}),o(H),o(D);var se=i(D,2);{var _e=a=>{var p=Qe(),k=v(p,!0);o(p),y(()=>C(k,e(f))),h(a,p)};X(se,a=>{e(f)&&a(_e)})}var P=i(se,2),be=v(P,!0);o(P),o(x);var le=i(x,2),ge=i(v(le),2);o(le),o(O),y(()=>{J=N(q,1,"svelte-kmqcod",null,J,{success:e(r).available===!0,error:e(r).available===!1}),ee=N(L,1,"radio svelte-kmqcod",null,ee,{active:e(c)==="MALE"}),ae=N(z,1,"radio svelte-kmqcod",null,ae,{active:e(c)==="FEMALE"}),P.disabled=e(I),C(be,e(I)?"가입 중...":"회원가입"),Ne(ge,"href",`${ve??""}/login`)}),Z(q,()=>e(t),a=>l(t,a)),te("input",q,ce),Z(K,()=>e(u),a=>l(u,a)),Z(V,()=>e(d),a=>l(d,a)),oe(g,[],A,()=>e(c),a=>l(c,a)),oe(g,[],F,()=>e(c),a=>l(c,a)),ze(H,()=>e(m),a=>l(m,a)),te("submit",x,$e(ue)),h(s,O),Le()}export{ta as component};
