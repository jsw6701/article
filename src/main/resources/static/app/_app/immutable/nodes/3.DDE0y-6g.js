import{f as n,a as s,c as z,s as g,e as A}from"../chunks/CC4GLFaW.js";import{i as na}from"../chunks/Vuw_Qtj8.js";import{o as ia}from"../chunks/D2MiqHYE.js";import{a2 as ua,a4 as pa,s as x,o as D,a5 as d,a6 as r,a as e,a7 as t,a3 as R,a8 as h}from"../chunks/BCBllwWT.js";import{i as b}from"../chunks/vsECunA6.js";import{e as ma,i as da}from"../chunks/B1qOUn_2.js";import{d as fa,s as E,e as _a}from"../chunks/CQlLVhH8.js";import{s as ga,a as F}from"../chunks/Bl3D_aLP.js";import{b as V}from"../chunks/BlpVvTHe.js";import{g as ha}from"../chunks/5OgZfVJF.js";import{i as ba,c as ka}from"../chunks/c5vKzgo2.js";import{g as ya}from"../chunks/CWF1PM-K.js";var xa=n('<div class="loading svelte-18cncau"><div class="spinner svelte-18cncau"></div></div>'),Ia=n('<div class="error svelte-18cncau"><p> </p> <button class="svelte-18cncau">다시 시도</button></div>'),wa=n('<div class="empty svelte-18cncau"><p>저장한 브리핑이 없습니다</p> <a class="svelte-18cncau">브리핑 둘러보기</a></div>'),La=n('<p class="item-signal svelte-18cncau"> </p>'),Ta=n('<p class="item-desc svelte-18cncau"> </p>'),$a=n('<div class="item svelte-18cncau"><a class="item-content svelte-18cncau"><span class="item-cat svelte-18cncau"> </span> <h2 class="item-title svelte-18cncau"> </h2> <!></a> <button class="remove-btn svelte-18cncau" aria-label="북마크 삭제"><svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" class="svelte-18cncau"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></button></div>'),Ba=n('<div class="list svelte-18cncau"></div>'),Ma=n('<div class="page svelte-18cncau"><header class="page-header svelte-18cncau"><h1 class="svelte-18cncau">북마크</h1> <p class="svelte-18cncau">저장한 브리핑</p></header> <!></div>');function Fa(H,J){ua(J,!1);const K=()=>F(ba,"$isLoggedIn",j),k=()=>F(ka,"$currentUser",j),[j,N]=ga();let f=D([]),q=D(!0),I=D(null);ia(async()=>{if(!K()||!k()){ha(`${V}/login`);return}try{const a=await fa(k().accessToken);x(f,a.items)}catch(a){x(I,a?.message??"불러오기 실패")}finally{x(q,!1)}});async function O(a){if(k())try{await _a(a,k().accessToken),x(f,e(f).filter(o=>o.issueId!==a))}catch(o){console.error("북마크 삭제 실패:",o)}}function P(a){return a.headline||a.issueTitle}na();var w=Ma(),Q=d(r(w),2);{var W=a=>{var o=xa();s(a,o)},X=a=>{var o=z(),Y=R(o);{var Z=u=>{var p=Ia(),_=r(p),L=r(_,!0);t(_);var T=d(_,2);t(p),h(()=>g(L,e(I))),A("click",T,()=>location.reload()),s(u,p)},aa=u=>{var p=z(),_=R(p);{var L=m=>{var i=wa(),$=d(r(i),2);t(i),h(()=>E($,"href",`${V??""}/`)),s(m,i)},T=m=>{var i=Ba();ma(i,5,()=>e(f),da,($,c)=>{var B=$a(),y=r(B),M=r(y),ea=r(M,!0);t(M);var U=d(M,2),sa=r(U,!0);t(U);var ta=d(U,2);{var ra=l=>{var v=La(),C=r(v,!0);t(v),h(()=>g(C,e(c).signalSummary)),s(l,v)},oa=l=>{var v=z(),C=R(v);{var la=G=>{var S=Ta(),va=r(S,!0);t(S),h(()=>g(va,e(c).conclusion)),s(G,S)};b(C,G=>{e(c).conclusion&&G(la)},!0)}s(l,v)};b(ta,l=>{e(c).signalSummary?l(ra):l(oa,!1)})}t(y);var ca=d(y,2);t(B),h((l,v)=>{E(y,"href",`${V??""}/cards/${e(c).issueId??""}`),g(ea,l),g(sa,v)},[()=>ya(e(c).issueGroup),()=>P(e(c))]),A("click",ca,()=>O(e(c).issueId)),s($,B)}),t(i),s(m,i)};b(_,m=>{e(f).length===0?m(L):m(T,!1)},!0)}s(u,p)};b(Y,u=>{e(I)?u(Z):u(aa,!1)},!0)}s(a,o)};b(Q,a=>{e(q)?a(W):a(X,!1)})}t(w),s(H,w),pa(),N()}export{Fa as component};
