import{f as T,e as J,a as u,s as M,c as me,t as Z}from"../chunks/JBNUid9-.js";import{i as Je}from"../chunks/D--sC15e.js";import{W as ea,at as aa,_ as sa,u as ta,au as ra,a0 as ia,m as _e,$ as la,K as na,L as va,T as oa,U as da,Q as v,S as I,d as e,N as ca,P as i,O as t,q as y,V as pe,R as n,Y as d,av as ua,aw as A,M as ge,ax as fa,ay as ma}from"../chunks/DExS8c7-.js";import{i as x}from"../chunks/CziFgNj8.js";import{e as _a,i as pa}from"../chunks/CUorJNVT.js";import{i as ga,c as ba,d as G,s as ka,j as ha,k as qa,m as ya,v as xa}from"../chunks/D4c94o38.js";import{s as V}from"../chunks/D4DO-hTu.js";import{b as j,a as Ae,p as wa}from"../chunks/CJgiaJ7v.js";import{s as Ea,a as Sa}from"../chunks/BWMsIlHo.js";import{b as ee}from"../chunks/B0N0VACA.js";import{g as $e}from"../chunks/CS_G86ak.js";import{S as Ia}from"../chunks/DAus8HYY.js";function Ce(l,g,$=!1){if(l.multiple){if(g==null)return;if(!ta(g))return ra();for(var w of l.options)w.selected=g.includes(P(w));return}for(w of l.options){var C=P(w);if(ia(C,g)){w.selected=!0;return}}(!$||g!==void 0)&&(l.selectedIndex=-1)}function Ta(l){var g=new MutationObserver(()=>{Ce(l,l.__value)});g.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),sa(()=>{g.disconnect()})}function La(l,g,$=g){var w=new WeakSet,C=!0;ea(l,"change",E=>{var _=E?"[selected]":":checked",k;if(l.multiple)k=[].map.call(l.querySelectorAll(_),P);else{var R=l.querySelector(_)??l.querySelector("option:not([disabled])");k=R&&P(R)}$(k),_e!==null&&w.add(_e)}),aa(()=>{var E=g();if(l===document.activeElement){var _=la??_e;if(w.has(_))return}if(Ce(l,E,C),C&&E===void 0){var k=l.querySelector(":checked");k!==null&&(E=P(k),$(E))}l.__value=E,C=!1}),Ta(l)}function P(l){return"__value"in l?l.__value:l.value}var Ma=T('<span class="hint svelte-kmqcod">확인 중...</span>'),Aa=T("<span> </span>"),$a=T("<span> <!></span>"),Ca=T('<span class="hint success svelte-kmqcod">이메일 인증 완료</span>'),Fa=T('<span class="hint error svelte-kmqcod"> </span>'),za=T('<div class="field svelte-kmqcod"><label for="verificationCode" class="svelte-kmqcod">인증 코드</label> <div class="code-row svelte-kmqcod"><input type="text" id="verificationCode" placeholder="6자리 코드 입력" maxlength="6" inputmode="numeric" pattern="[0-9]*" class="svelte-kmqcod"/> <button type="button" class="verify-btn svelte-kmqcod"> </button></div> <!></div>'),Ga=T("<option> </option>"),Ra=T('<div class="error-msg svelte-kmqcod"> </div>'),Ua=T('<div class="page svelte-kmqcod"><header class="page-header svelte-kmqcod"><!> <p class="svelte-kmqcod">새 계정을 만드세요</p></header> <form class="form svelte-kmqcod"><div class="field svelte-kmqcod"><label for="username" class="svelte-kmqcod">아이디</label> <input type="text" id="username" placeholder="4자 이상, 영문/숫자" autocomplete="username"/> <!></div> <div class="field svelte-kmqcod"><label for="email" class="svelte-kmqcod">이메일</label> <div class="email-row svelte-kmqcod"><input type="email" id="email" placeholder="example@email.com" autocomplete="email"/> <button type="button" class="verify-btn svelte-kmqcod"><!></button></div> <!> <!></div> <!> <div class="field svelte-kmqcod"><label for="password" class="svelte-kmqcod">비밀번호</label> <input type="password" id="password" placeholder="8자 이상" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label for="passwordConfirm" class="svelte-kmqcod">비밀번호 확인</label> <input type="password" id="passwordConfirm" placeholder="비밀번호 재입력" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label class="svelte-kmqcod">성별</label> <div class="radio-group svelte-kmqcod"><label><input type="radio" class="svelte-kmqcod"/> 남성</label> <label><input type="radio" class="svelte-kmqcod"/> 여성</label></div></div> <div class="field svelte-kmqcod"><label for="ageGroup" class="svelte-kmqcod">연령대</label> <select id="ageGroup" class="svelte-kmqcod"></select></div> <!> <button type="submit" class="submit svelte-kmqcod"> </button></form> <div class="footer svelte-kmqcod"><span>이미 계정이 있으신가요?</span> <a class="svelte-kmqcod">로그인</a></div></div>');function Ya(l,g){na(g,!1);const $=()=>Sa(ga,"$isLoggedIn",w),[w,C]=Ea(),E=[];va(()=>{ba.init()});let _=y(""),k=y(""),R=y(""),S=y(""),U=y(""),F=y("MALE"),D=y("TWENTIES"),c=y({checking:!1,available:null,message:""}),a=y({sending:!1,sent:!1,verifying:!1,verified:!1,message:"",expireMinutes:null}),h=y(""),H=y(!1),be;function Fe(){if(t(c,{checking:!1,available:null,message:""}),e(_).length<4){e(_).length>0&&A(c,e(c).message="4자 이상 입력해주세요");return}clearTimeout(be),be=setTimeout(async()=>{A(c,e(c).checking=!0);try{const s=await ha(e(_));t(c,{checking:!1,available:s.available,message:s.available?"사용 가능":"이미 사용중"})}catch{t(c,{checking:!1,available:null,message:"확인 실패"})}},500)}function ke(s){return/^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(s)}async function ze(){if(!ke(e(S))){A(a,e(a).message="유효한 이메일을 입력해주세요");return}A(a,e(a).sending=!0),A(a,e(a).message="");try{const s=await qa({email:e(S)});s.success?t(a,{...e(a),sending:!1,sent:!0,message:"인증 코드가 발송되었습니다",expireMinutes:s.expireMinutes}):t(a,{...e(a),sending:!1,message:s.message??"발송 실패"})}catch{t(a,{...e(a),sending:!1,message:"서버 오류"})}}async function Ge(){if(e(U).length!==6){A(a,e(a).message="6자리 코드를 입력해주세요");return}A(a,e(a).verifying=!0),A(a,e(a).message="");try{const s=await xa({email:e(S),code:e(U)});s.success?t(a,{...e(a),verifying:!1,verified:!0,message:"인증 완료"}):t(a,{...e(a),verifying:!1,message:s.message??"인증 실패"})}catch{t(a,{...e(a),verifying:!1,message:"서버 오류"})}}async function Re(){if(t(h,""),!e(_).trim()||e(_).length<4){t(h,"아이디는 4자 이상이어야 합니다");return}if(!/^[a-zA-Z0-9]+$/.test(e(_))){t(h,"아이디는 영문과 숫자만 가능합니다");return}if(!ke(e(S))){t(h,"유효한 이메일을 입력해주세요");return}if(!e(a).verified){t(h,"이메일 인증이 필요합니다");return}if(e(k).length<8){t(h,"비밀번호는 8자 이상이어야 합니다");return}if(e(k)!==e(R)){t(h,"비밀번호가 일치하지 않습니다");return}if(e(c).available===!1){t(h,"이미 사용중인 아이디입니다");return}t(H,!0);try{const s=await ya({username:e(_),password:e(k),email:e(S),gender:e(F),ageGroup:e(D)});s.success?$e(`${ee}/login?signup=success`):t(h,s.message??"가입 실패")}catch{t(h,"서버 오류가 발생했습니다")}t(H,!1)}const Ue={TEENS:"10대",TWENTIES:"20대",THIRTIES:"30대",FORTIES:"40대",FIFTIES:"50대",SIXTIES_PLUS:"60대 이상"};oa(()=>($(),ee),()=>{$()&&$e(`${ee}/`)}),da(),Je();var ae=Ua(),se=v(ae),Ve=v(se);Ia(Ve,{size:"lg"}),pe(2),n(se);var K=i(se,2),te=v(K),N=i(v(te),2);G(N);let he;var Ne=i(N,2);{var Oe=s=>{var r=Ma();u(s,r)},We=s=>{var r=me(),f=ge(r);{var b=p=>{var o=Aa();let m;var q=v(o,!0);n(o),I(()=>{m=V(o,1,"hint svelte-kmqcod",null,m,{success:e(c).available,error:e(c).available===!1}),M(q,(e(c),d(()=>e(c).message)))}),u(p,o)};x(f,p=>{e(c),d(()=>e(c).message)&&p(b)},!0)}u(s,r)};x(Ne,s=>{e(c),d(()=>e(c).checking)?s(Oe):s(We,!1)})}n(te);var re=i(te,2),ie=i(v(re),2),O=v(ie);G(O);let qe;var Q=i(O,2),Ze=v(Q);{var je=s=>{var r=Z("발송중...");u(s,r)},Pe=s=>{var r=me(),f=ge(r);{var b=o=>{var m=Z("인증완료");u(o,m)},p=o=>{var m=me(),q=ge(m);{var z=L=>{var fe=Z("재발송");u(L,fe)},W=L=>{var fe=Z("인증요청");u(L,fe)};x(q,L=>{e(a),d(()=>e(a).sent)?L(z):L(W,!1)},!0)}u(o,m)};x(f,o=>{e(a),d(()=>e(a).verified)?o(b):o(p,!1)},!0)}u(s,r)};x(Ze,s=>{e(a),d(()=>e(a).sending)?s(je):s(Pe,!1)})}n(Q),n(ie);var ye=i(ie,2);{var De=s=>{var r=$a();let f;var b=v(r),p=i(b);{var o=m=>{var q=Z();I(()=>M(q,`(${e(a),d(()=>e(a).expireMinutes)??""}분 유효)`)),u(m,q)};x(p,m=>{e(a),d(()=>e(a).expireMinutes)&&m(o)})}n(r),I(()=>{f=V(r,1,"hint svelte-kmqcod",null,f,{success:e(a).sent&&!e(a).verified,error:!e(a).sent&&!e(a).verified}),M(b,`${e(a),d(()=>e(a).message)??""} `)}),u(s,r)};x(ye,s=>{e(a),d(()=>e(a).message&&!e(a).verified)&&s(De)})}var He=i(ye,2);{var Ke=s=>{var r=Ca();u(s,r)};x(He,s=>{e(a),d(()=>e(a).verified)&&s(Ke)})}n(re);var xe=i(re,2);{var Qe=s=>{var r=za(),f=i(v(r),2),b=v(f);G(b);var p=i(b,2),o=v(p,!0);n(p),n(f);var m=i(f,2);{var q=z=>{var W=Fa(),L=v(W,!0);n(W),I(()=>M(L,(e(a),d(()=>e(a).message)))),u(z,W)};x(m,z=>{e(a),d(()=>e(a).message&&e(a).sent&&!e(a).verified)&&z(q)})}n(r),I(()=>{p.disabled=(e(a),e(U),d(()=>e(a).verifying||e(U).length!==6)),M(o,(e(a),d(()=>e(a).verifying?"확인중...":"확인")))}),j(b,()=>e(U),z=>t(U,z)),J("click",p,Ge),u(s,r)};x(xe,s=>{e(a),d(()=>e(a).sent&&!e(a).verified)&&s(Qe)})}var le=i(xe,2),we=i(v(le),2);G(we),n(le);var ne=i(le,2),Ee=i(v(ne),2);G(Ee),n(ne);var ve=i(ne,2),Se=i(v(ve),2),X=v(Se);let Ie;var Y=v(X);G(Y),Y.value=Y.__value="MALE",pe(),n(X);var oe=i(X,2);let Te;var B=v(oe);G(B),B.value=B.__value="FEMALE",pe(),n(oe),n(Se),n(ve);var de=i(ve,2),ce=i(v(de),2);I(()=>{e(D),ua(()=>{})}),_a(ce,5,()=>d(()=>Object.entries(Ue)),pa,(s,r)=>{var f=fa(()=>ma(e(r),2));let b=()=>e(f)[0],p=()=>e(f)[1];var o=Ga(),m=v(o,!0);n(o);var q={};I(()=>{M(m,p()),q!==(q=b())&&(o.value=(o.__value=b())??"")}),u(s,o)}),n(ce),n(de);var Le=i(de,2);{var Xe=s=>{var r=Ra(),f=v(r,!0);n(r),I(()=>M(f,e(h))),u(s,r)};x(Le,s=>{e(h)&&s(Xe)})}var ue=i(Le,2),Ye=v(ue,!0);n(ue),n(K);var Me=i(K,2),Be=i(v(Me),2);n(Me),n(ae),I(()=>{he=V(N,1,"svelte-kmqcod",null,he,{success:e(c).available===!0,error:e(c).available===!1}),O.disabled=(e(a),d(()=>e(a).verified)),qe=V(O,1,"svelte-kmqcod",null,qe,{success:e(a).verified}),Q.disabled=(e(a),e(S),d(()=>e(a).sending||e(a).verified||!e(S))),Ie=V(X,1,"radio svelte-kmqcod",null,Ie,{active:e(F)==="MALE"}),Te=V(oe,1,"radio svelte-kmqcod",null,Te,{active:e(F)==="FEMALE"}),ue.disabled=e(H),M(Ye,e(H)?"가입 중...":"회원가입"),ka(Be,"href",`${ee??""}/login`)}),j(N,()=>e(_),s=>t(_,s)),J("input",N,Fe),j(O,()=>e(S),s=>t(S,s)),J("click",Q,ze),j(we,()=>e(k),s=>t(k,s)),j(Ee,()=>e(R),s=>t(R,s)),Ae(E,[],Y,()=>e(F),s=>t(F,s)),Ae(E,[],B,()=>e(F),s=>t(F,s)),La(ce,()=>e(D),s=>t(D,s)),J("submit",K,wa(Re)),u(l,ae),ca(),C()}export{Ya as component};
