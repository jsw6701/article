import{f as k,a as o,c as pe,t as N}from"../chunks/C5g7XBZA.js";import"../chunks/1N9P_ows.js";import{o as ua,a as fa}from"../chunks/DjCfrimd.js";import{p as pa,aq as ge,ar as ga,t as w,g as e,a as _a,Y as m,e as ba,c as n,s as r,o as t,ap as ka,ao as _e,b as i,u,at as M,as as ha,f as Y}from"../chunks/V-LZvqf2.js";import{e as L,s as C}from"../chunks/C_y0Aa-3.js";import{i as b}from"../chunks/BSeBmDgX.js";import{e as qa,i as ya}from"../chunks/U3QY9uhu.js";import{h as xa}from"../chunks/DLPZc01m.js";import{r as F,s as be}from"../chunks/gBni9Ox-.js";import{s as z}from"../chunks/35QTP2O1.js";import{b as H,c as Ve,p as Ea}from"../chunks/DDRt-sAN.js";import{i as wa}from"../chunks/BhZ1EOWQ.js";import{s as Ia,a as Sa}from"../chunks/BJpLCdRy.js";import{b as R}from"../chunks/Bs7FA3So.js";import{g as Ze}from"../chunks/CCZINJK3.js";import{B as Ta,C as Ma,D as La,E as $a}from"../chunks/BPtt4w3D.js";import{i as Aa,b as Ca}from"../chunks/DyZVRJKY.js";import{S as Fa}from"../chunks/C22KBAGO.js";var za=k('<span class="hint svelte-kmqcod">확인 중...</span>'),Da=k("<span> </span>"),Ra=k('<span class="timer svelte-kmqcod"> </span>'),Ua=k(" <!>",1),Va=k("<span><!></span>"),Za=k('<span class="hint success svelte-kmqcod">이메일 인증 완료</span>'),Ga=k('<button type="button" class="resend-btn svelte-kmqcod">인증 코드 재발송</button>'),Na=k('<div class="field svelte-kmqcod"><label for="verificationCode" class="svelte-kmqcod">인증 코드</label> <div class="input-row svelte-kmqcod"><input type="text" id="verificationCode" placeholder="6자리 코드" maxlength="6" inputmode="numeric" pattern="[0-9]*" class="svelte-kmqcod"/> <button type="button" class="inline-btn svelte-kmqcod"> </button></div> <!></div>'),Ha=k('<button type="button"> </button>'),Oa=k('<div class="error-msg svelte-kmqcod"> </div>'),Pa=k('<div class="page svelte-kmqcod"><header class="header svelte-kmqcod"><!> <p class="subtitle svelte-kmqcod">새 계정을 만드세요</p></header> <form class="form svelte-kmqcod"><div class="field svelte-kmqcod"><label for="username" class="svelte-kmqcod">아이디</label> <input type="text" id="username" placeholder="4자 이상, 영문/숫자" autocomplete="username"/> <!></div> <div class="field svelte-kmqcod"><label for="email" class="svelte-kmqcod">이메일</label> <div class="input-row svelte-kmqcod"><input type="email" id="email" placeholder="example@email.com" autocomplete="email"/> <button type="button" class="inline-btn svelte-kmqcod"><!></button></div> <!> <!></div> <!> <div class="field svelte-kmqcod"><label for="password" class="svelte-kmqcod">비밀번호</label> <input type="password" id="password" placeholder="8자 이상" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label for="passwordConfirm" class="svelte-kmqcod">비밀번호 확인</label> <input type="password" id="passwordConfirm" placeholder="비밀번호 재입력" autocomplete="new-password" class="svelte-kmqcod"/></div> <div class="field svelte-kmqcod"><label class="svelte-kmqcod">성별</label> <div class="segment-control svelte-kmqcod"><button type="button">남성</button> <button type="button">여성</button></div></div> <div class="field svelte-kmqcod"><label class="svelte-kmqcod">연령대</label> <div class="segment-control wide svelte-kmqcod"></div></div> <div class="agreements svelte-kmqcod"><label class="agreement svelte-kmqcod"><input type="checkbox" class="svelte-kmqcod"/> <span class="checkbox-custom svelte-kmqcod"></span> <span class="agreement-text svelte-kmqcod"><a target="_blank" rel="noopener" class="svelte-kmqcod">서비스 이용약관</a>에 동의합니다 (필수)</span></label> <label class="agreement svelte-kmqcod"><input type="checkbox" class="svelte-kmqcod"/> <span class="checkbox-custom svelte-kmqcod"></span> <span class="agreement-text svelte-kmqcod"><a target="_blank" rel="noopener" class="svelte-kmqcod">개인정보처리방침</a>에 동의합니다 (필수)</span></label></div> <!> <button type="submit" class="submit svelte-kmqcod"> </button></form> <div class="footer svelte-kmqcod"><span>이미 계정이 있으신가요?</span> <a class="svelte-kmqcod">로그인</a></div></div>');function cs(Ge,Ne){pa(Ne,!1);const ke=()=>Sa(Aa,"$isLoggedIn",He),[He,Oe]=Ia(),j=m(),I=m();ua(()=>{Ca.init()}),fa(()=>{S&&clearInterval(S)});let y=m(""),U=m(""),J=m(""),x=m(""),D=m(""),V=m("MALE"),K=m("TWENTIES"),v=m({checking:!1,available:null,message:""}),s=m({sending:!1,sent:!1,verifying:!1,verified:!1,message:"",expireMinutes:null}),g=m(""),O=m(!1),P=m(!1),W=m(!1),S=null,E=m(0);function Pe(a){S&&clearInterval(S),t(E,a*60),S=setInterval(()=>{ha(E,-1),e(E)<=0&&(S&&clearInterval(S),S=null)},1e3)}let he;function We(){if(t(v,{checking:!1,available:null,message:""}),e(y).length<4){e(y).length>0&&M(v,e(v).message="4자 이상 입력해주세요");return}clearTimeout(he),he=setTimeout(async()=>{M(v,e(v).checking=!0);try{const a=await Ta(e(y));t(v,{checking:!1,available:a.available,message:a.available?"사용 가능":"이미 사용중"})}catch{t(v,{checking:!1,available:null,message:"확인 실패"})}},500)}function qe(a){return/^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(a)}async function ye(){if(!qe(e(x))){M(s,e(s).message="유효한 이메일을 입력해주세요");return}M(s,e(s).sending=!0),M(s,e(s).message="");try{const a=await Ma({email:e(x)});a.success?(t(s,{...e(s),sending:!1,sent:!0,message:"인증 코드가 발송되었습니다",expireMinutes:a.expireMinutes}),a.expireMinutes&&Pe(a.expireMinutes)):t(s,{...e(s),sending:!1,message:a.message??"발송 실패"})}catch{t(s,{...e(s),sending:!1,message:"서버 오류"})}}async function Be(){if(e(D).length!==6){M(s,e(s).message="6자리 코드를 입력해주세요");return}M(s,e(s).verifying=!0),M(s,e(s).message="");try{const a=await $a({email:e(x),code:e(D)});a.success?t(s,{...e(s),verifying:!1,verified:!0,message:"인증 완료"}):t(s,{...e(s),verifying:!1,message:a.message??"인증 실패"})}catch{t(s,{...e(s),verifying:!1,message:"서버 오류"})}}async function Xe(){if(t(g,""),!e(y).trim()||e(y).length<4){t(g,"아이디는 4자 이상이어야 합니다");return}if(!/^[a-zA-Z0-9]+$/.test(e(y))){t(g,"아이디는 영문과 숫자만 가능합니다");return}if(!qe(e(x))){t(g,"유효한 이메일을 입력해주세요");return}if(!e(s).verified){t(g,"이메일 인증이 필요합니다");return}if(e(U).length<8){t(g,"비밀번호는 8자 이상이어야 합니다");return}if(e(U)!==e(J)){t(g,"비밀번호가 일치하지 않습니다");return}if(e(v).available===!1){t(g,"이미 사용중인 아이디입니다");return}if(!e(P)||!e(W)){t(g,"이용약관 및 개인정보처리방침에 동의해주세요");return}t(O,!0);try{const a=await La({username:e(y),password:e(U),email:e(x),gender:e(V),ageGroup:e(K)});a.success?Ze(`${R}/login?signup=success`):t(g,a.message??"가입 실패")}catch{t(g,"서버 오류가 발생했습니다")}t(O,!1)}const Ye=[{value:"TEENS",label:"10대"},{value:"TWENTIES",label:"20대"},{value:"THIRTIES",label:"30대"},{value:"FORTIES",label:"40대"},{value:"FIFTIES",label:"50대"},{value:"SIXTIES_PLUS",label:"60대+"}];ge(()=>(ke(),R),()=>{ke()&&Ze(`${R}/`)}),ge(()=>e(E),()=>{t(j,e(E)>0?`${Math.floor(e(E)/60)}:${(e(E)%60).toString().padStart(2,"0")}`:"")}),ge(()=>(e(s),e(E)),()=>{t(I,e(s).sent&&e(E)===0)}),ga(),wa();var Q=Pa();xa("kmqcod",a=>{ba(()=>{ka.title="회원가입 - SHIFT"})});var ee=n(Q),je=n(ee);Fa(je,{size:"lg"}),_e(2),i(ee);var B=r(ee,2),ae=n(B),Z=r(n(ae),2);F(Z);let xe;var Je=r(Z,2);{var Ke=a=>{var l=za();o(a,l)},Qe=a=>{var l=pe(),c=Y(l);{var _=p=>{var f=Da();let d;var h=n(f,!0);i(f),w(()=>{d=z(f,1,"hint svelte-kmqcod",null,d,{success:e(v).available,error:e(v).available===!1}),C(h,(e(v),u(()=>e(v).message)))}),o(p,f)};b(c,p=>{e(v),u(()=>e(v).message)&&p(_)},!0)}o(a,l)};b(Je,a=>{e(v),u(()=>e(v).checking)?a(Ke):a(Qe,!1)})}i(ae);var se=r(ae,2),te=r(n(se),2),G=n(te);F(G);let Ee;var X=r(G,2),ea=n(X);{var aa=a=>{var l=N("발송중");o(a,l)},sa=a=>{var l=pe(),c=Y(l);{var _=f=>{var d=N("완료");o(f,d)},p=f=>{var d=pe(),h=Y(d);{var q=T=>{var A=N("재발송");o(T,A)},$=T=>{var A=N("인증");o(T,A)};b(h,T=>{e(s),u(()=>e(s).sent)?T(q):T($,!1)},!0)}o(f,d)};b(c,f=>{e(s),u(()=>e(s).verified)?f(_):f(p,!1)},!0)}o(a,l)};b(ea,a=>{e(s),u(()=>e(s).sending)?a(aa):a(sa,!1)})}i(X),i(te);var we=r(te,2);{var ta=a=>{var l=Va();let c;var _=n(l);{var p=d=>{var h=N("인증 코드가 만료되었습니다. 다시 발송해주세요.");o(d,h)},f=d=>{var h=Ua(),q=Y(h),$=r(q);{var T=A=>{var fe=Ra(),ma=n(fe);i(fe),w(()=>C(ma,`(${e(j)??""})`)),o(A,fe)};b($,A=>{e(j)&&A(T)})}w(()=>C(q,`${e(s),u(()=>e(s).message)??""} `)),o(d,h)};b(_,d=>{e(I)?d(p):d(f,!1)})}i(l),w(()=>c=z(l,1,"hint svelte-kmqcod",null,c,{success:e(s).sent&&!e(I),error:!e(s).sent||e(I)})),o(a,l)};b(we,a=>{e(s),u(()=>e(s).message&&!e(s).verified)&&a(ta)})}var la=r(we,2);{var ra=a=>{var l=Za();o(a,l)};b(la,a=>{e(s),u(()=>e(s).verified)&&a(ra)})}i(se);var Ie=r(se,2);{var ia=a=>{var l=Na(),c=r(n(l),2),_=n(c);F(_);var p=r(_,2),f=n(p,!0);i(p),i(c);var d=r(c,2);{var h=q=>{var $=Ga();w(()=>$.disabled=(e(s),u(()=>e(s).sending))),L("click",$,ye),o(q,$)};b(d,q=>{e(I)||q(h)})}i(l),w(()=>{_.disabled=e(I),p.disabled=(e(s),e(D),e(I),u(()=>e(s).verifying||e(D).length!==6||e(I))),C(f,(e(s),u(()=>e(s).verifying?"확인중":"확인")))}),H(_,()=>e(D),q=>t(D,q)),L("click",p,Be),o(a,l)};b(Ie,a=>{e(s),u(()=>e(s).sent&&!e(s).verified)&&a(ia)})}var le=r(Ie,2),Se=r(n(le),2);F(Se),i(le);var re=r(le,2),Te=r(n(re),2);F(Te),i(re);var ie=r(re,2),Me=r(n(ie),2),ne=n(Me);let Le;var $e=r(ne,2);let Ae;i(Me),i(ie);var oe=r(ie,2),Ce=r(n(oe),2);qa(Ce,5,()=>Ye,ya,(a,l)=>{var c=Ha();let _;var p=n(c,!0);i(c),w(()=>{_=z(c,1,"segment svelte-kmqcod",null,_,{active:e(K)===e(l).value}),C(p,(e(l),u(()=>e(l).label)))}),L("click",c,()=>t(K,e(l).value)),o(a,c)}),i(Ce),i(oe);var ve=r(oe,2),ce=n(ve),de=n(ce);F(de);var Fe=r(de,4),na=n(Fe);_e(),i(Fe),i(ce);var ze=r(ce,2),me=n(ze);F(me);var De=r(me,4),oa=n(De);_e(),i(De),i(ze),i(ve);var Re=r(ve,2);{var va=a=>{var l=Oa(),c=n(l,!0);i(l),w(()=>C(c,e(g))),o(a,l)};b(Re,a=>{e(g)&&a(va)})}var ue=r(Re,2),ca=n(ue,!0);i(ue),i(B);var Ue=r(B,2),da=r(n(Ue),2);i(Ue),i(Q),w(()=>{xe=z(Z,1,"svelte-kmqcod",null,xe,{success:e(v).available===!0,error:e(v).available===!1}),G.disabled=(e(s),u(()=>e(s).verified)),Ee=z(G,1,"svelte-kmqcod",null,Ee,{success:e(s).verified}),X.disabled=(e(s),e(x),u(()=>e(s).sending||e(s).verified||!e(x))),Le=z(ne,1,"segment svelte-kmqcod",null,Le,{active:e(V)==="MALE"}),Ae=z($e,1,"segment svelte-kmqcod",null,Ae,{active:e(V)==="FEMALE"}),be(na,"href",`${R??""}/terms`),be(oa,"href",`${R??""}/privacy`),ue.disabled=e(O)||!e(P)||!e(W),C(ca,e(O)?"가입 중...":"회원가입"),be(da,"href",`${R??""}/login`)}),H(Z,()=>e(y),a=>t(y,a)),L("input",Z,We),H(G,()=>e(x),a=>t(x,a)),L("click",X,ye),H(Se,()=>e(U),a=>t(U,a)),H(Te,()=>e(J),a=>t(J,a)),L("click",ne,()=>t(V,"MALE")),L("click",$e,()=>t(V,"FEMALE")),Ve(de,()=>e(P),a=>t(P,a)),Ve(me,()=>e(W),a=>t(W,a)),L("submit",B,Ea(Xe)),o(Ge,Q),_a(),Oe()}export{cs as component};
