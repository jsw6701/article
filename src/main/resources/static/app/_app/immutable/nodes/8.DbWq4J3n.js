import{f as h,a as c,c as xe}from"../chunks/CSDkEukK.js";import"../chunks/G9K82XB2.js";import{o as We}from"../chunks/D2Z1D5OA.js";import{p as Xe,f as E,a as Ze,e as ea,o as r,Y as x,ap as aa,s as t,c as a,g as s,b as e,t as D}from"../chunks/TeviCJ82.js";import{s as v,e as d}from"../chunks/DJUeCBpJ.js";import{i as L}from"../chunks/iMg5e8oI.js";import{e as ye,i as Me}from"../chunks/CqNPvWgI.js";import{h as ta}from"../chunks/DBo6aLs-.js";import{r as sa,s as $e}from"../chunks/B9lDzZO_.js";import{s as X}from"../chunks/C9eT_MQU.js";import{b as la,s as ra}from"../chunks/DLP64Ruc.js";import{i as ia}from"../chunks/DgK7GOei.js";import{b as oa}from"../chunks/tyQMpd50.js";import{s as va,a as De}from"../chunks/CmgmZfZy.js";import{g as na}from"../chunks/juZnnKQr.js";import{b as Z}from"../chunks/6qb4cKv1.js";import{z as ca,m as da,A as pa,y as Pe}from"../chunks/C8ccASB2.js";import{s as U}from"../chunks/CxvkBVpW.js";import{d as ua,e as ma}from"../chunks/8QpmlEFl.js";var _a=h('<div class="loading svelte-leta3i"><div class="spinner svelte-leta3i"></div></div>'),fa=h('<div class="error-box svelte-leta3i"><p> </p></div>'),ba=h("<button> </button>"),ga=h("<button> </button>"),ha=h('<section class="section svelte-leta3i"><div class="profile-row svelte-leta3i"><div class="profile-avatar svelte-leta3i"> </div> <div class="profile-info svelte-leta3i"><h2 class="profile-name svelte-leta3i"> </h2> <p class="profile-email svelte-leta3i"> </p></div></div></section> <section class="section svelte-leta3i"><h3 class="section-title svelte-leta3i">앱 설정</h3> <div class="group svelte-leta3i"><div class="row svelte-leta3i"><span class="row-label svelte-leta3i">다크 모드</span> <button><span class="toggle-knob svelte-leta3i"></span></button></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">텍스트 크기</span> <div class="segment-control svelte-leta3i"></div></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">시작 화면</span> <div class="segment-control svelte-leta3i"></div></div></div></section> <section class="section svelte-leta3i"><h3 class="section-title svelte-leta3i">계정 정보</h3> <div class="group svelte-leta3i"><div class="row svelte-leta3i"><span class="row-label svelte-leta3i">성별</span> <span class="row-value svelte-leta3i"> </span></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">연령대</span> <span class="row-value svelte-leta3i"> </span></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">가입일</span> <span class="row-value svelte-leta3i"> </span></div> <div class="row svelte-leta3i"><span class="row-label svelte-leta3i">저장한 브리핑</span> <span class="row-value svelte-leta3i"> </span></div></div></section> <section class="section svelte-leta3i"><h3 class="section-title svelte-leta3i">정보</h3> <div class="group svelte-leta3i"><a class="row link svelte-leta3i"><span class="row-label svelte-leta3i">이용약관</span> <svg class="chevron svelte-leta3i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"></path></svg></a> <a class="row link svelte-leta3i"><span class="row-label svelte-leta3i">개인정보처리방침</span> <svg class="chevron svelte-leta3i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"></path></svg></a></div></section> <section class="section svelte-leta3i"><div class="group svelte-leta3i"><button class="row link svelte-leta3i"><span class="row-label logout svelte-leta3i">로그아웃</span></button> <button class="row link svelte-leta3i"><span class="row-label danger svelte-leta3i">회원 탈퇴</span></button></div></section>',1),wa=h('<p class="modal-error svelte-leta3i"> </p>'),ka=h('<div class="modal-backdrop svelte-leta3i" role="button" tabindex="-1"><div class="modal svelte-leta3i" role="dialog" aria-modal="true"><h2 class="modal-title svelte-leta3i">회원 탈퇴</h2> <p class="modal-desc svelte-leta3i">정말 탈퇴하시겠습니까?<br/> 모든 데이터가 삭제되며 복구할 수 없습니다.</p> <input type="password" class="modal-input svelte-leta3i" placeholder="비밀번호 확인"/> <!> <div class="modal-buttons svelte-leta3i"><button class="modal-btn cancel svelte-leta3i">취소</button> <button class="modal-btn danger svelte-leta3i"> </button></div></div></div>'),xa=h('<div class="page svelte-leta3i"><h1 class="page-title svelte-leta3i">설정</h1> <!></div> <!>',1);function Ka(Ae,ee){Xe(ee,!1);const Se=()=>De(da,"$currentUser",ae),G=()=>De(U,"$settings",ae),[ae,Le]=va(),ze=[{value:"small",label:"작게"},{value:"medium",label:"보통"},{value:"large",label:"크게"}],Ce=[{value:"home",label:"홈"},{value:"feed",label:"피드"},{value:"trending",label:"트렌드"}];let p=x(null),B=x(!0),F=x(""),O=x(!1),y=x(""),M=x(!1),_=x("");We(async()=>{if(!Se()){r(B,!1);return}try{r(p,await ca())}catch(l){console.error("getMyProfile error:",l),r(F,l instanceof Error?l.message:"프로필을 불러올 수 없습니다.")}finally{r(B,!1)}});function Ee(l){return new Date(l).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}async function Ue(){await Pe.logout()}async function Ge(){if(!s(y)){r(_,"비밀번호를 입력해주세요.");return}r(M,!0),r(_,"");try{const l=await pa(s(y));l.success?(Pe.clear(),na(`${Z}/login`)):r(_,l.message||"탈퇴 처리 중 오류가 발생했습니다.")}catch(l){r(_,l instanceof Error?l.message:"탈퇴 처리 중 오류가 발생했습니다.")}finally{r(M,!1)}}function Be(){r(O,!0),r(y,""),r(_,"")}function T(){r(O,!1),r(y,""),r(_,"")}ia();var te=xa();ta("leta3i",l=>{ea(()=>{aa.title="설정 - SHIFT"})});var H=E(te),Fe=t(a(H),2);{var Oe=l=>{var n=_a();c(l,n)},Te=l=>{var n=xe(),P=E(n);{var $=f=>{var u=fa(),b=a(u),g=a(b,!0);e(b),e(u),D(()=>v(g,s(F))),c(f,u)},z=f=>{var u=xe(),b=E(u);{var g=A=>{var o=ha(),w=E(o),C=a(w),I=a(C),Ke=a(I,!0);e(I);var se=t(I,2),K=a(se),Re=a(K,!0);e(K);var le=t(K,2),Ye=a(le,!0);e(le),e(se),e(C),e(w);var R=t(w,2),re=t(a(R),2),Y=a(re),ie=t(a(Y),2);let oe;e(Y);var j=t(Y,2),ve=t(a(j),2);ye(ve,5,()=>ze,Me,(S,m)=>{var i=ba();let k;var W=a(i,!0);e(i),D(()=>{k=X(i,1,"segment svelte-leta3i",null,k,{active:G().fontSize===s(m).value}),v(W,s(m).label)}),d("click",i,()=>U.setFontSize(s(m).value)),c(S,i)}),e(ve),e(j);var ne=t(j,2),ce=t(a(ne),2);ye(ce,5,()=>Ce,Me,(S,m)=>{var i=ga();let k;var W=a(i,!0);e(i),D(()=>{k=X(i,1,"segment svelte-leta3i",null,k,{active:G().startPage===s(m).value}),v(W,s(m).label)}),d("click",i,()=>U.setStartPage(s(m).value)),c(S,i)}),e(ce),e(ne),e(re),e(R);var q=t(R,2),de=t(a(q),2),J=a(de),pe=t(a(J),2),je=a(pe,!0);e(pe),e(J);var N=t(J,2),ue=t(a(N),2),qe=a(ue,!0);e(ue),e(N);var Q=t(N,2),me=t(a(Q),2),Je=a(me,!0);e(me),e(Q);var _e=t(Q,2),fe=t(a(_e),2),Ne=a(fe);e(fe),e(_e),e(de),e(q);var V=t(q,2),be=t(a(V),2),ge=a(be),Qe=t(ge,2);e(be),e(V);var he=t(V,2),we=a(he),ke=a(we),Ve=t(ke,2);e(we),e(he),D((S,m,i,k)=>{v(Ke,S),v(Re,s(p).username),v(Ye,s(p).email),oe=X(ie,1,"toggle svelte-leta3i",null,oe,{active:G().theme==="dark"}),v(je,m),v(qe,i),v(Je,k),v(Ne,`${s(p).bookmarkCount??""}개`),$e(ge,"href",`${Z??""}/terms`),$e(Qe,"href",`${Z??""}/privacy`)},[()=>s(p).username.charAt(0).toUpperCase(),()=>ua(s(p).gender),()=>ma(s(p).ageGroup),()=>Ee(s(p).createdAt)]),d("click",ie,()=>U.toggleTheme()),d("click",ke,Ue),d("click",Ve,Be),c(A,o)};L(b,A=>{s(p)&&A(g)},!0)}c(f,u)};L(P,f=>{s(F)?f($):f(z,!1)},!0)}c(l,n)};L(Fe,l=>{s(B)?l(Oe):l(Te,!1)})}e(H);var He=t(H,2);{var Ie=l=>{var n=ka(),P=a(n),$=t(a(P),4);sa($);var z=t($,2);{var f=o=>{var w=wa(),C=a(w,!0);e(w),D(()=>v(C,s(_))),c(o,w)};L(z,o=>{s(_)&&o(f)})}var u=t(z,2),b=a(u),g=t(b,2),A=a(g,!0);e(g),e(u),e(P),e(n),D(()=>{$.disabled=s(M),b.disabled=s(M),g.disabled=s(M),v(A,s(M)?"처리 중...":"탈퇴하기")}),la($,()=>s(y),o=>r(y,o)),d("click",b,T),d("click",g,Ge),d("click",P,ra(function(o){oa.call(this,ee,o)})),d("click",n,T),d("keydown",n,o=>o.key==="Escape"&&T()),c(l,n)};L(He,l=>{s(O)&&l(Ie)})}c(Ae,te),Ze(),Le()}export{Ka as component};
