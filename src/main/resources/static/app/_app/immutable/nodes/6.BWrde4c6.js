import{c as me,a as p,f}from"../chunks/CSDkEukK.js";import"../chunks/G9K82XB2.js";import{o as ba}from"../chunks/D2Z1D5OA.js";import{p as xa,f as F,a as ka,o as $,Y as G,g as e,c as s,b as a,s as v,t as u,u as l,ao as wa,d as C,j as $a}from"../chunks/TeviCJ82.js";import{s as c,e as Ca}from"../chunks/DJUeCBpJ.js";import{i as b}from"../chunks/iMg5e8oI.js";import{e as D,i as j}from"../chunks/CqNPvWgI.js";import{s as J}from"../chunks/B9lDzZO_.js";import{s as La}from"../chunks/C9eT_MQU.js";import{s as Ia}from"../chunks/CxBfKdbX.js";import{i as Aa}from"../chunks/DgK7GOei.js";import{p as Ba}from"../chunks/LNPAuzPM.js";import{s as Da,a as ja}from"../chunks/CmgmZfZy.js";import{b as je}from"../chunks/DFC9nrag.js";import{v as Na,w as Sa,i as Ma,t as Pa,x as Ta}from"../chunks/C8ccASB2.js";import{b as Ne,c as H,a as Se,f as Me,g as Pe}from"../chunks/8QpmlEFl.js";import{L as za}from"../chunks/BjWrnKfY.js";var Ga=f('<div class="loading svelte-n723gn"><div class="spinner svelte-n723gn"></div></div>'),Ja=f('<div class="error svelte-n723gn"><p> </p> <a class="svelte-n723gn">홈으로 돌아가기</a></div>'),Va=f('<button><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-n723gn"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></button>'),qa=f('<p class="signal svelte-n723gn"> </p>'),Ea=f("<span>·</span> <span> </span>",1),Oa=f('<div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">정점 도달</span> <span class="stat-value svelte-n723gn"> </span></div>'),Ra=f('<div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">정점 기사 수</span> <span class="stat-value svelte-n723gn"> </span></div>'),Ya=f('<section class="section lifecycle-section svelte-n723gn"><h2 class="svelte-n723gn">이슈 생애주기</h2> <div class="lifecycle-content svelte-n723gn"><div class="lifecycle-stage svelte-n723gn"><span class="lifecycle-emoji svelte-n723gn"> </span> <div class="lifecycle-info svelte-n723gn"><span class="lifecycle-label svelte-n723gn"> </span> <span class="lifecycle-desc svelte-n723gn"> </span></div></div> <div class="lifecycle-stats svelte-n723gn"><div class="lifecycle-stat svelte-n723gn"><span class="stat-value svelte-n723gn"> </span></div> <!> <div class="lifecycle-stat svelte-n723gn"><span class="stat-label svelte-n723gn">현재 기사 수</span> <span class="stat-value svelte-n723gn"> </span></div> <!></div></div></section>'),Za=f('<p class="lead svelte-n723gn"> </p>'),Fa=f('<p class="svelte-n723gn"> </p>'),Ha=f('<span class="ev-fact svelte-n723gn"> </span>'),Ka=f('<li class="svelte-n723gn"><span class="ev-source svelte-n723gn"> </span> <!></li>'),Qa=f('<section class="section svelte-n723gn"><h2 class="svelte-n723gn">근거</h2> <ul class="evidence svelte-n723gn"></ul></section>'),Ua=f('<p class="svelte-n723gn"> </p>'),Wa=f('<p class="impact-reason svelte-n723gn"> </p>'),Xa=f('<p class="svelte-n723gn"> </p>'),es=f('<li class="svelte-n723gn"><a target="_blank" rel="noopener noreferrer" class="svelte-n723gn"><span class="art-title svelte-n723gn"> </span> <span class="art-meta svelte-n723gn"> </span></a></li>'),as=f('<section class="section svelte-n723gn"><h2 class="svelte-n723gn"> </h2> <ul class="articles svelte-n723gn"></ul></section>'),ss=f('<article class="article svelte-n723gn"><a class="back svelte-n723gn">← 뒤로</a> <header class="header svelte-n723gn"><div class="header-top svelte-n723gn"><div class="header-left svelte-n723gn"><span class="cat svelte-n723gn"> </span> <!></div> <!></div> <h1 class="title svelte-n723gn"> </h1> <!> <div class="meta svelte-n723gn"><span> </span> <span>·</span> <span> </span> <span>·</span> <span> </span> <!></div></header> <!> <section class="section highlight svelte-n723gn"><h2 class="svelte-n723gn">핵심 요약</h2> <!></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">왜 중요한가</h2> <!></section> <!> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">반대 시나리오</h2> <!></section> <section class="section svelte-n723gn"><h2 class="svelte-n723gn">영향도</h2> <div class="impact svelte-n723gn"><div class="impact-score svelte-n723gn"><span class="score-num svelte-n723gn"> </span> <span class="score-max svelte-n723gn">/5</span></div> <div class="impact-bar svelte-n723gn"><div class="impact-fill svelte-n723gn"></div></div> <!></div></section> <section class="section action svelte-n723gn"><h2 class="svelte-n723gn">행동 가이드</h2> <!></section> <!></article>');function bs(Te,he){xa(he,!1);const K=()=>ja(Ma,"$isLoggedIn",ze),[ze,Ge]=Da();let Z=Ba(he,"params",8),t=G(null),_=G(null),ye=G(!0),Q=G(null),N=G(!1),U=G(!1);ba(async()=>{try{$(t,await Na(Number(Z().issueId)));const o=e(t).cardJson;if($(_,typeof o=="string"?JSON.parse(o):o),K())try{const m=await Sa(Number(Z().issueId));$(N,m.bookmarked)}catch{}}catch(o){$(Q,o?.message??"불러오기 실패")}finally{$(ye,!1)}});async function Je(){if(K()){$(U,!0);try{e(N)?(await Pa(Number(Z().issueId)),$(N,!1)):(await Ta(Number(Z().issueId)),$(N,!0))}catch(o){console.error("북마크 처리 실패:",o)}finally{$(U,!1)}}}function Ve(o){const m=new Date(o);return`${m.getMonth()+1}월 ${m.getDate()}일`}function qe(o){return o.headline||o.issueTitle}function P(o){if(!o)return[];const m=o.trim();if(m.includes(`

`))return m.split(/\n\n+/).map(g=>g.trim()).filter(g=>g);if(m.includes(`
`))return m.split(/\n+/).map(g=>g.trim()).filter(g=>g);const V=m.split(new RegExp("(?<=[.!?])(?=\\s+[가-힣A-Z])")).map(g=>g.trim()).filter(g=>g);if(V.length<=3)return[m];const q=[];let L=[];return V.forEach((g,I)=>{L.push(g),(L.length>=2||I===V.length-1)&&(q.push(L.join(" ")),L=[])}),L.length>0&&q.push(L.join(" ")),q}Aa();var be=me(),Ee=F(be);{var Oe=o=>{var m=Ga();p(o,m)},Re=o=>{var m=me(),V=F(m);{var q=g=>{var I=Ja(),E=s(I),W=s(E,!0);a(E);var O=v(E,2);a(I),u(()=>{c(W,e(Q)),J(O,"href",`${je??""}/`)}),p(g,I)},L=g=>{var I=me(),E=F(I);{var W=O=>{var X=ss(),xe=s(X),ee=v(xe,2),ae=s(ee),se=s(ae),te=s(se),Ye=s(te,!0);a(te);var Ze=v(te,2);{var Fe=i=>{za(i,{get lifecycle(){return e(t),l(()=>e(t).lifecycle)},size:"medium"})};b(Ze,i=>{e(t),l(()=>e(t).lifecycle)&&i(Fe)})}a(se);var He=v(se,2);{var Ke=i=>{var n=Va();let r;var d=s(n);a(n),u(()=>{r=La(n,1,"bookmark-btn svelte-n723gn",null,r,{active:e(N)}),n.disabled=e(U),J(n,"aria-label",e(N)?"북마크 해제":"북마크 추가"),J(d,"fill",e(N)?"currentColor":"none")}),Ca("click",n,Je),p(i,n)};b(He,i=>{K()&&i(Ke)})}a(ae);var ne=v(ae,2),Qe=s(ne,!0);a(ne);var ke=v(ne,2);{var Ue=i=>{var n=qa(),r=s(n,!0);a(n),u(()=>c(r,(e(t),l(()=>e(t).signalSummary)))),p(i,n)};b(ke,i=>{e(t),l(()=>e(t).signalSummary)&&i(Ue)})}var we=v(ke,2),re=s(we),We=s(re,!0);a(re);var le=v(re,4),Xe=s(le);a(le);var ve=v(le,4),ea=s(ve);a(ve);var aa=v(ve,2);{var sa=i=>{var n=Ea(),r=v(F(n),2),d=s(r);a(r),u(y=>c(d,`${y??""} 조회`),[()=>(C(Se),e(t),l(()=>Se(e(t).viewCount)))]),p(i,n)};b(aa,i=>{e(t),l(()=>e(t).viewCount)&&i(sa)})}a(we),a(ee);var $e=v(ee,2);{var ta=i=>{const n=$a(()=>(C(Pe),e(t),l(()=>Pe(e(t).lifecycle.stage))));var r=Ya(),d=v(s(r),2),y=s(d),x=s(y),h=s(x,!0);a(x);var A=v(x,2),k=s(A),S=s(k,!0);a(k);var T=v(k,2),B=s(T,!0);a(T),a(A),a(y);var z=v(y,2),R=s(z),Ae=s(R),da=s(Ae,!0);a(Ae),a(R);var Be=v(R,2);{var fa=w=>{var M=Oa(),Y=v(s(M),2),ue=s(Y,!0);a(Y),a(M),u(ya=>c(ue,ya),[()=>(C(H),e(t),l(()=>H(e(t).lifecycle.peakDate)))]),p(w,M)};b(Be,w=>{e(t),l(()=>e(t).lifecycle.peakDate)&&w(fa)})}var fe=v(Be,2),De=v(s(fe),2),ua=s(De);a(De),a(fe);var ma=v(fe,2);{var ha=w=>{var M=Ra(),Y=v(s(M),2),ue=s(Y);a(Y),a(M),u(()=>c(ue,`${e(t),l(()=>e(t).lifecycle.peakArticleCount)??""}개`)),p(w,M)};b(ma,w=>{e(t),l(()=>e(t).lifecycle.peakArticleCount>0)&&w(ha)})}a(z),a(d),a(r),u(w=>{J(r,"data-stage",(e(t),l(()=>e(t).lifecycle.stage))),c(h,(C(e(n)),l(()=>e(n).emoji))),c(S,(C(e(n)),l(()=>e(n).label))),c(B,(C(e(n)),l(()=>e(n).description))),c(da,w),c(ua,`${e(t),l(()=>e(t).lifecycle.currentArticleCount)??""}개 (24시간)`)},[()=>(C(Me),e(t),l(()=>Me(e(t).lifecycle)))]),p(i,r)};b($e,i=>{e(t),l(()=>e(t).lifecycle)&&i(ta)})}var ie=v($e,2),na=v(s(ie),2);D(na,1,()=>(e(_),l(()=>P(e(_).conclusion))),j,(i,n)=>{var r=Za(),d=s(r,!0);a(r),u(()=>c(d,e(n))),p(i,r)}),a(ie);var ce=v(ie,2),ra=v(s(ce),2);D(ra,1,()=>(e(_),l(()=>P(e(_).why_it_matters))),j,(i,n)=>{var r=Fa(),d=s(r,!0);a(r),u(()=>c(d,e(n))),p(i,r)}),a(ce);var Ce=v(ce,2);{var la=i=>{var n=Qa(),r=v(s(n),2);D(r,5,()=>(e(_),l(()=>e(_).evidence)),j,(d,y)=>{var x=Ka(),h=s(x),A=s(h,!0);a(h);var k=v(h,2);D(k,1,()=>(e(y),l(()=>P(e(y).fact))),j,(S,T)=>{var B=Ha(),z=s(B,!0);a(B),u(()=>c(z,e(T))),p(S,B)}),a(x),u(()=>c(A,(e(y),l(()=>e(y).source)))),p(d,x)}),a(r),a(n),p(i,n)};b(Ce,i=>{e(_),l(()=>e(_).evidence?.length>0)&&i(la)})}var oe=v(Ce,2),va=v(s(oe),2);D(va,1,()=>(e(_),l(()=>P(e(_).counter_scenario))),j,(i,n)=>{var r=Ua(),d=s(r,!0);a(r),u(()=>c(d,e(n))),p(i,r)}),a(oe);var pe=v(oe,2),Le=v(s(pe),2),_e=s(Le),Ie=s(_e),ia=s(Ie,!0);a(Ie),wa(2),a(_e);var ge=v(_e,2),ca=s(ge);a(ge);var oa=v(ge,2);D(oa,1,()=>(e(_),l(()=>P(e(_).impact?.reason))),j,(i,n)=>{var r=Wa(),d=s(r,!0);a(r),u(()=>c(d,e(n))),p(i,r)}),a(Le),a(pe);var de=v(pe,2),pa=v(s(de),2);D(pa,1,()=>(e(_),l(()=>P(e(_).action_guide))),j,(i,n)=>{var r=Xa(),d=s(r,!0);a(r),u(()=>c(d,e(n))),p(i,r)}),a(de);var _a=v(de,2);{var ga=i=>{var n=as(),r=s(n),d=s(r);a(r);var y=v(r,2);D(y,5,()=>(e(t),l(()=>e(t).articles)),j,(x,h)=>{var A=es(),k=s(A),S=s(k),T=s(S,!0);a(S);var B=v(S,2),z=s(B);a(B),a(k),a(A),u(R=>{J(k,"href",(e(h),l(()=>e(h).link))),c(T,(e(h),l(()=>e(h).title))),c(z,`${e(h),l(()=>e(h).publisher)??""} · ${R??""}`)},[()=>(e(h),l(()=>Ve(e(h).publishedAt)))]),p(x,A)}),a(y),a(n),u(()=>c(d,`관련 기사 (${e(t),l(()=>e(t).articles.length)??""})`)),p(i,n)};b(_a,i=>{e(t),l(()=>e(t).articles?.length>0)&&i(ga)})}a(X),u((i,n,r)=>{J(xe,"href",`${je??""}/`),c(Ye,i),c(Qe,n),c(We,r),c(Xe,`${e(t),l(()=>e(t).issueArticleCount)??""}개 기사`),c(ea,`${e(t),l(()=>e(t).issuePublisherCount)??""}개 매체`),c(ia,(e(_),l(()=>e(_).impact?.score??"-"))),Ia(ca,`width: ${e(_),l(()=>(e(_).impact?.score??0)/5*100)??""}%`)},[()=>(C(Ne),e(t),l(()=>Ne(e(t).issueGroup))),()=>(e(t),l(()=>qe(e(t)))),()=>(C(H),e(t),l(()=>H(e(t).issueLastPublishedAt)))]),p(O,X)};b(E,O=>{e(t)&&e(_)&&O(W)},!0)}p(g,I)};b(V,g=>{e(Q)?g(q):g(L,!1)},!0)}p(o,m)};b(Ee,o=>{e(ye)?o(Oe):o(Re,!1)})}p(Te,be),ka(),Ge()}export{bs as component};
