var k;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(k||(k={}));class x extends Error{constructor(t,n,i){super(t),this.message=t,this.code=n,this.data=i}}const K=e=>{var t,n;return e?.androidBridge?"android":!((n=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},z=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},i=n.Plugins=n.Plugins||{},s=()=>t!==null?t.name:K(e),r=()=>s()!=="web",o=c=>{const u=m.get(c);return!!(u?.platforms.has(s())||d(c))},d=c=>{var u;return(u=n.PluginHeaders)===null||u===void 0?void 0:u.find(O=>O.name===c)},f=c=>e.console.error(c),m=new Map,C=(c,u={})=>{const O=m.get(c);if(O)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),O.proxy;const v=s(),T=d(c);let y;const M=async()=>(!y&&v in u?y=typeof u[v]=="function"?y=await u[v]():y=u[v]:t!==null&&!y&&"web"in u&&(y=typeof u.web=="function"?y=await u.web():y=u.web),y),N=(l,h)=>{var g,w;if(T){const b=T?.methods.find(p=>h===p.name);if(b)return b.rtype==="promise"?p=>n.nativePromise(c,h.toString(),p):(p,L)=>n.nativeCallback(c,h.toString(),p,L);if(l)return(g=l[h])===null||g===void 0?void 0:g.bind(l)}else{if(l)return(w=l[h])===null||w===void 0?void 0:w.bind(l);throw new x(`"${c}" plugin is not implemented on ${v}`,k.Unimplemented)}},j=l=>{let h;const g=(...w)=>{const b=M().then(p=>{const L=N(p,l);if(L){const $=L(...w);return h=$?.remove,$}else throw new x(`"${c}.${l}()" is not implemented on ${v}`,k.Unimplemented)});return l==="addListener"&&(b.remove=async()=>h()),b};return g.toString=()=>`${l.toString()}() { [capacitor code] }`,Object.defineProperty(g,"name",{value:l,writable:!1,configurable:!1}),g},D=j("addListener"),I=j("removeListener"),q=(l,h)=>{const g=D({eventName:l},h),w=async()=>{const p=await g;I({eventName:l,callbackId:p},h)},b=new Promise(p=>g.then(()=>p({remove:w})));return b.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await w()},b},U=new Proxy({},{get(l,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?q:D;case"removeListener":return I;default:return j(h)}}});return i[c]=U,m.set(c,{name:c,proxy:U,platforms:new Set([...Object.keys(u),...T?[v]:[]])}),U};return n.convertFileSrc||(n.convertFileSrc=c=>c),n.getPlatform=s,n.handleError=f,n.isNativePlatform=r,n.isPluginAvailable=o,n.registerPlugin=C,n.Exception=x,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},V=e=>e.Capacitor=z(e),A=V(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),B=A.registerPlugin;class R{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let i=!1;this.listeners[t]||(this.listeners[t]=[],i=!0),this.listeners[t].push(n);const r=this.windowListeners[t];r&&!r.registered&&this.addWindowListener(r),i&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,i){const s=this.listeners[t];if(!s){if(i){let r=this.retainedEventArguments[t];r||(r=[]),r.push(n),this.retainedEventArguments[t]=r}return}s.forEach(r=>r(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(t="not implemented"){return new A.Exception(t,k.Unimplemented)}unavailable(t="not available"){return new A.Exception(t,k.Unavailable)}async removeListener(t,n){const i=this.listeners[t];if(!i)return;const s=i.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(i=>{this.notifyListeners(t,i)}))}}const H=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),G=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Y extends R{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(i=>{if(i.length<=0)return;let[s,r]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=G(s).trim(),r=G(r).trim(),n[s]=r}),n}async setCookie(t){try{const n=H(t.key),i=H(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,r=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${i||""}${s}; path=${r}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}B("CapacitorCookies",{web:()=>new Y});const Q=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const s=i.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},i.onerror=s=>n(s),i.readAsDataURL(e)}),X=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,r,o)=>(s[r]=e[t[o]],s),{})},Z=(e,t=!0)=>e?Object.entries(e).reduce((i,s)=>{const[r,o]=s;let d,f;return Array.isArray(o)?(f="",o.forEach(m=>{d=t?encodeURIComponent(m):m,f+=`${r}=${d}&`}),f.slice(0,-1)):(d=t?encodeURIComponent(o):o,f=`${r}=${d}`),`${i}&${f}`},"").substr(1):null,ee=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=X(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[o,d]of Object.entries(e.data||{}))r.set(o,d);n.body=r.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const r=new FormData;if(e.data instanceof FormData)e.data.forEach((d,f)=>{r.append(f,d)});else for(const d of Object.keys(e.data))r.append(d,e.data[d]);n.body=r;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class te extends R{async request(t){const n=ee(t,t.webFetchExtra),i=Z(t.params,t.shouldEncodeUrlParams),s=i?`${t.url}?${i}`:t.url,r=await fetch(s,n),o=r.headers.get("content-type")||"";let{responseType:d="text"}=r.ok?t:{};o.includes("application/json")&&(d="json");let f,m;switch(d){case"arraybuffer":case"blob":m=await r.blob(),f=await Q(m);break;case"json":f=await r.json();break;default:f=await r.text()}const C={};return r.headers.forEach((c,u)=>{C[u]=c}),{data:f,headers:C,status:r.status,url:r.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}B("CapacitorHttp",{web:()=>new te});var _;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(_||(_={}));var F;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(F||(F={}));class ne extends R{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}B("SystemBars",{web:()=>new ne});function re(){return A.isNativePlatform()?"https://shift-dev.kr":""}const W=re(),E="auth_user";function se(){if(typeof window>"u")return null;const e=localStorage.getItem(E);if(!e)return null;try{return JSON.parse(e)?.accessToken??null}catch{return null}}function ie(){if(typeof window>"u")return null;const e=localStorage.getItem(E);if(!e)return null;try{return JSON.parse(e)?.refreshToken??null}catch{return null}}function ae(e,t){if(typeof window>"u")return;const n=localStorage.getItem(E);if(n)try{const i=JSON.parse(n);i.accessToken=e,i.refreshToken=t,localStorage.setItem(E,JSON.stringify(i))}catch{}}function oe(){typeof window<"u"&&(localStorage.removeItem(E),window.dispatchEvent(new CustomEvent("auth:expired")))}let J=!1,S=null;async function ce(){if(J&&S)return S;const e=ie();return e?(J=!0,S=(async()=>{try{const t=await fetch(`${W}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(!t.ok)return!1;const n=await t.json();return n.success&&n.accessToken&&n.refreshToken?(ae(n.accessToken,n.refreshToken),!0):!1}catch{return!1}finally{J=!1,S=null}})(),S):!1}function P(e){const t=new URLSearchParams;Object.entries(e).forEach(([i,s])=>{s==null||s===""||t.set(i,String(s))});const n=t.toString();return n?`?${n}`:""}async function a(e,t,n=!1,i=!1){const s={...t?.headers??{}};if(n){const o=se();o&&(s.Authorization=`Bearer ${o}`)}const r=await fetch(`${W}${e}`,{...t,headers:s});if(r.status===401&&n&&!i){if(await ce())return a(e,t,n,!0);throw oe(),new Error("인증이 만료되었습니다. 다시 로그인해주세요.")}if(!r.ok){const o=await r.text().catch(()=>"");throw new Error(`API ${r.status} ${r.statusText}: ${o}`)}return await r.json()}function ue(e){return a(`/api/cards${P({group:e.group,status:e.status??"ACTIVE",from:e.from,to:e.to,limit:e.limit??20,offset:e.offset??0})}`,void 0,!0)}function de(e){return a(`/api/cards/${e}`,void 0,!0)}function le(e={}){return a(`/api/trending${P({hours:e.hours??3,limit:e.limit??10})}`,void 0,!0)}function fe(e={}){return a(`/api/trending/popular${P({limit:e.limit??10})}`,void 0,!0)}function he(e){return a("/api/auth/email/send-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function pe(e){return a("/api/auth/email/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function ge(e){return a("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function me(e){return a("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function ye(e){return a(`/api/auth/check-username${P({username:e})}`)}function we(e){return a("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})})}function be(e){return a("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})})}function ve(e){return a("/api/auth/password/send-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function Pe(e){return a("/api/auth/password/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function Te(e){return a("/api/auth/terms/agree",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function ke(e){return a("/api/auth/find-username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function Se(){try{return(await a("/api/users/settings",void 0,!0)).data}catch{return null}}function Ee(e){return a("/api/users/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},!0)}function Ce(e){return a(`/api/bookmarks/${e}`,{method:"POST"},!0)}function Oe(e){return a(`/api/bookmarks/${e}`,{method:"DELETE"},!0)}function Le(e){return a(`/api/bookmarks/${e}/status`,void 0,!0)}function $e(){return a("/api/bookmarks",void 0,!0)}function Ae(){return a("/api/admin/dashboard",void 0,!0)}function je(e=30){return a(`/api/admin/stats/signups${P({days:e})}`,void 0,!0)}function Ue(e=30){return a(`/api/admin/stats/views${P({days:e})}`,void 0,!0)}function xe(){return a("/api/admin/stats/gender",void 0,!0)}function Je(){return a("/api/admin/stats/age-groups",void 0,!0)}function Be(e={}){return a(`/api/admin/users${P({page:e.page??1,size:e.size??20,search:e.search})}`,void 0,!0)}function Re(e,t){return a(`/api/admin/users/${e}/role`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:t})},!0)}function De(e){return a(`/api/admin/users/${e}`,{method:"DELETE"},!0)}function Ie(){return a("/api/admin/grades",void 0,!0)}function He(){return a("/api/admin/stats/grades",void 0,!0)}function Ge(e,t){return a(`/api/admin/users/${e}/grade`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({grade:t})},!0)}async function _e(){const e=await a("/api/users/me",void 0,!0);if(!e.success||!e.data)throw new Error(e.message||"프로필을 불러올 수 없습니다.");return e.data}function Fe(e){return a("/api/users/me",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})},!0)}function We(e){return a("/api/users/me/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},!0)}function Me(e){return a("/api/users/me/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},!0)}export{Pe as A,ye as B,he as C,ge as D,pe as E,_e as F,Fe as G,We as H,Me as I,Te as J,me as a,ue as b,le as c,fe as d,Ae as e,je as f,Se as g,Ue as h,xe as i,Je as j,He as k,be as l,Ie as m,Be as n,De as o,Ge as p,Re as q,we as r,$e as s,Oe as t,Ee as u,de as v,Le as w,Ce as x,ve as y,ke as z};
