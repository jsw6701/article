import{W as m,X as x,Y as E,Z as b,_ as D,G as h,h as y,m as d,$ as g,a0 as w}from"./DExS8c7-.js";function V(e,l,r=l){var t=new WeakSet;m(e,"input",async c=>{var f=c?e.defaultValue:e.value;if(f=_(e)?i(f):f,r(f),d!==null&&t.add(d),await x(),f!==(f=l())){var v=e.selectionStart,s=e.selectionEnd,n=e.value.length;if(e.value=f??"",s!==null){var a=e.value.length;v===s&&s===n&&a>n?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=v,e.selectionEnd=Math.min(s,a))}}}),(y&&e.defaultValue!==e.value||E(l)==null&&e.value)&&(r(_(e)?i(e.value):e.value),d!==null&&t.add(d)),b(()=>{var c=l();if(e===document.activeElement){var f=g??d;if(t.has(f))return}_(e)&&c===i(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const u=new Set;function W(e,l,r,t,c=t){var f=r.getAttribute("type")==="checkbox",v=e;let s=!1;if(l!==null)for(var n of l)v=v[n]??=[];v.push(r),m(r,"change",()=>{var a=r.__value;f&&(a=k(v,a,r.checked)),c(a)},()=>c(f?[]:null)),b(()=>{var a=t();if(y&&r.defaultChecked!==r.checked){s=!0;return}f?(a=a||[],r.checked=a.includes(r.__value)):r.checked=w(r.__value,a)}),D(()=>{var a=v.indexOf(r);a!==-1&&v.splice(a,1)}),u.has(v)||(u.add(v),h(()=>{v.sort((a,o)=>a.compareDocumentPosition(o)===4?-1:1),u.delete(v)})),h(()=>{if(s){var a;if(f)a=k(v,a,r.checked);else{var o=v.find(S=>S.checked);a=o?.__value}c(a)}})}function k(e,l,r){for(var t=new Set,c=0;c<e.length;c+=1)e[c].checked&&t.add(e[c].__value);return r||t.delete(l),Array.from(t)}function _(e){var l=e.type;return l==="number"||l==="range"}function i(e){return e===""?null:+e}function q(e){return function(...l){var r=l[0];return r.preventDefault(),e?.apply(this,l)}}export{W as a,V as b,q as p};
